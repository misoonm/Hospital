<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯ Ù…Ø³ØªØ´ÙÙ‰ - Ø·Ø¨ÙŠØ¨ 24/7</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=El+Messiri:wght@400;500;600;700&family=Tajawal:wght@300;400;500;700;800;900&display=swap" rel="stylesheet">
    <style>
  :root {
    --primary: #1e40af;
    --primary-dark: #1e3a8a;
    --primary-light: #dbeafe;
    --secondary: #dc2626;
    --accent: #f59e0b;
    --success: #059669;
    --warning: #d97706;
    --error: #dc2626;
    --dark: #1e1b4b;
    --light: #f0f9ff;
    --surface: #ffffff;
    --glass: rgba(255, 255, 255, 0.25);
    --glass-dark: rgba(255, 255, 255, 0.1);
    --text-primary: #1e293b;
    --text-secondary: #475569;
    --text-light: #64748b;
    --gradient-primary: linear-gradient(135deg, #1e40af 0%, #3730a3 100%);
    --gradient-hospital: linear-gradient(135deg, #1e40af 0%, #dc2626 100%);
    --gradient-premium: linear-gradient(135deg, #1e40af 0%, #3730a3 50%, #7c3aed 100%);
    --gradient-success: linear-gradient(135deg, #059669 0%, #10b981 100%);
    --shadow-soft: 0 8px 32px rgba(0, 0, 0, 0.1);
    --shadow-glass: 0 8px 32px rgba(30, 64, 175, 0.2);
    --shadow-card: 0 4px 24px rgba(0, 0, 0, 0.08);
    --shadow-large: 0 16px 48px rgba(0, 0, 0, 0.15);
    --radius-xl: 24px;
    --radius-lg: 20px;
    --radius-md: 16px;
    --radius-sm: 12px;
    --transition-smooth: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-bounce: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Tajawal', 'El Messiri', sans-serif;
    -webkit-tap-highlight-color: transparent;
}

body {
    background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 50%, #dbeafe 100%);
    color: var(--text-primary);
    direction: rtl;
    overflow-x: hidden;
    min-height: 100vh;
}

/* ØªØµÙ…ÙŠÙ… Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØªÙ…ÙŠØ² */
.status-bar {
    background: transparent;
    color: var(--text-primary);
    padding: 12px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 14px;
    font-weight: 500;
    backdrop-filter: blur(20px);
    position: relative;
    z-index: 1000;
}

.status-bar::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--glass);
    backdrop-filter: blur(20px);
    z-index: -1;
}

/* Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
.premium-app {
    max-width: 428px;
    margin: 0 auto;
    background: transparent;
    min-height: 100vh;
    position: relative;
    overflow: hidden;
}

/* Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© */
.background-effects {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    pointer-events: none;
}

.floating-shapes {
    position: absolute;
    width: 100%;
    height: 100%;
}

.shape {
    position: absolute;
    border-radius: 50%;
    background: var(--gradient-primary);
    opacity: 0.1;
    animation: float 6s ease-in-out infinite;
}

.shape:nth-child(1) {
    width: 200px;
    height: 200px;
    top: 10%;
    left: 10%;
    animation-delay: 0s;
}

.shape:nth-child(2) {
    width: 150px;
    height: 150px;
    top: 60%;
    right: 20%;
    animation-delay: 2s;
}

.shape:nth-child(3) {
    width: 100px;
    height: 100px;
    bottom: 20%;
    left: 20%;
    animation-delay: 4s;
}

@keyframes float {
    0%, 100% { transform: translateY(0px) rotate(0deg); }
    50% { transform: translateY(-20px) rotate(180deg); }
}

/* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ù…ØªÙ‚Ø¯Ù… */
.appointment-header {
    background: var(--gradient-hospital);
    color: white;
    padding: 40px 24px 30px;
    border-radius: 0 0 var(--radius-xl) var(--radius-xl);
    box-shadow: var(--shadow-glass);
    position: relative;
    overflow: hidden;
}

.header-background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><polygon fill="rgba(255,255,255,0.05)" points="0,1000 1000,0 1000,1000"/></svg>');
    background-size: cover;
}

.header-content {
    position: relative;
    z-index: 2;
    text-align: center;
}

.header-title {
    font-size: 28px;
    font-weight: 800;
    margin-bottom: 8px;
    background: linear-gradient(45deg, #fff, #dbeafe);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.header-subtitle {
    font-size: 16px;
    opacity: 0.9;
    margin-bottom: 25px;
}

.quick-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
    margin-top: 20px;
}

.stat-item {
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(10px);
    border-radius: var(--radius-md);
    padding: 15px;
    text-align: center;
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.stat-value {
    font-size: 20px;
    font-weight: 800;
    margin-bottom: 4px;
}

.stat-label {
    font-size: 12px;
    opacity: 0.9;
}

/* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
.appointment-content {
    padding: 25px 20px;
    padding-bottom: 120px;
}

.section-title {
    font-size: 20px;
    font-weight: 800;
    margin: 30px 0 20px;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 12px;
    padding-right: 8px;
}

.section-title::before {
    content: '';
    width: 4px;
    height: 24px;
    background: var(--gradient-hospital);
    border-radius: 2px;
}

/* Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø­Ø¬Ø² */
.booking-steps {
    display: flex;
    justify-content: space-between;
    margin-bottom: 30px;
    position: relative;
    padding: 0 10px;
}

.booking-steps::before {
    content: '';
    position: absolute;
    top: 20px;
    right: 10%;
    left: 10%;
    height: 3px;
    background: #e2e8f0;
    z-index: 1;
}

.step {
    display: flex;
    flex-direction: column;
    align-items: center;
    z-index: 2;
    position: relative;
    flex: 1;
}

.step-number {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: #e2e8f0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 800;
    color: var(--text-secondary);
    margin-bottom: 8px;
    transition: var(--transition-smooth);
    border: 3px solid white;
}

.step.active .step-number {
    background: var(--gradient-hospital);
    color: white;
    transform: scale(1.1);
}

.step.completed .step-number {
    background: var(--success);
    color: white;
}

.step-label {
    font-size: 12px;
    font-weight: 700;
    color: var(--text-secondary);
    text-align: center;
}

.step.active .step-label {
    color: var(--primary);
}

/* Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø®Ø·ÙˆØ§Øª */
.step-content {
    display: none;
}

.step-content.active {
    display: block;
    animation: fadeIn 0.5s ease-out;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø®Ø·ÙˆØ§Øª */
.step-actions {
    display: flex;
    justify-content: space-between;
    margin-top: 30px;
    gap: 15px;
}

.btn {
    padding: 14px 24px;
    border: none;
    border-radius: var(--radius-md);
    font-weight: 800;
    cursor: pointer;
    transition: var(--transition-bounce);
    font-size: 15px;
    display: flex;
    align-items: center;
    gap: 8px;
    min-width: 120px;
    justify-content: center;
}

.btn-primary {
    background: var(--gradient-hospital);
    color: white;
}

.btn-secondary {
    background: var(--light);
    color: var(--text-primary);
    border: 2px solid #e2e8f0;
}

.btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-soft);
}

.btn:active {
    transform: translateY(0);
}

.btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
}

/* Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…ØªÙ‚Ø¯Ù… */
.search-section {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: 25px;
    box-shadow: var(--shadow-card);
    margin-bottom: 25px;
    border: 1px solid #f1f5f9;
}

.search-container {
    position: relative;
    margin-bottom: 20px;
}

.search-input {
    width: 100%;
    padding: 15px 50px 15px 15px;
    border: 2px solid #e2e8f0;
    border-radius: var(--radius-md);
    font-size: 16px;
    transition: var(--transition-smooth);
}

.search-input:focus {
    border-color: var(--primary);
    outline: none;
    box-shadow: 0 0 0 3px rgba(30, 64, 175, 0.1);
}

.search-icon {
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-secondary);
}

.search-filters {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}

.filter-select {
    padding: 12px;
    border: 2px solid #e2e8f0;
    border-radius: var(--radius-md);
    font-size: 14px;
    background: white;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.filter-select:focus {
    border-color: var(--primary);
    outline: none;
}

/* Ø§Ù„Ø®Ø¯Ù…Ø§Øª */
.services-section {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: 25px;
    box-shadow: var(--shadow-card);
    margin-bottom: 25px;
    border: 1px solid #f1f5f9;
}

.services-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
    margin-top: 20px;
}

.service-card {
    background: #f8fafc;
    border: 2px solid #e2e8f0;
    border-radius: var(--radius-md);
    padding: 20px 12px;
    text-align: center;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.service-card:hover {
    border-color: var(--primary);
    transform: translateY(-3px);
}

.service-card.active {
    background: var(--primary-light);
    border-color: var(--primary);
}

.service-icon {
    width: 50px;
    height: 50px;
    border-radius: var(--radius-md);
    background: var(--gradient-hospital);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 12px;
    font-size: 20px;
    color: white;
}

.service-name {
    font-weight: 700;
    font-size: 13px;
    margin-bottom: 6px;
}

.service-count {
    font-size: 11px;
    color: var(--text-secondary);
}

/* Ø§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª */
.hospitals-section {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: 25px;
    box-shadow: var(--shadow-card);
    margin-bottom: 25px;
    border: 1px solid #f1f5f9;
}

.hospitals-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 15px;
    margin-top: 20px;
}

.hospital-card {
    background: #f8fafc;
    border-radius: var(--radius-lg);
    padding: 20px;
    display: flex;
    gap: 15px;
    cursor: pointer;
    transition: var(--transition-bounce);
    border: 2px solid transparent;
}

.hospital-card:hover {
    transform: translateX(-8px);
    border-color: var(--primary);
    box-shadow: var(--shadow-soft);
}

.hospital-card.selected {
    background: var(--primary-light);
    border-color: var(--primary);
}

.hospital-avatar {
    width: 70px;
    height: 70px;
    border-radius: var(--radius-md);
    background: var(--gradient-hospital);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    color: white;
    flex-shrink: 0;
}

.hospital-info {
    flex: 1;
}

.hospital-name {
    font-weight: 800;
    font-size: 16px;
    margin-bottom: 6px;
}

.hospital-address {
    font-size: 14px;
    color: var(--text-secondary);
    margin-bottom: 8px;
}

.hospital-rating {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
}

.stars {
    color: #f59e0b;
}

.rating-value {
    font-weight: 700;
    font-size: 14px;
}

.rating-count {
    font-size: 12px;
    color: var(--text-secondary);
}

.hospital-features {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.feature-tag {
    background: var(--primary-light);
    color: var(--primary);
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 600;
}

.hospital-actions {
    display: flex;
    flex-direction: column;
    gap: 8px;
    justify-content: center;
}

.select-btn {
    background: var(--gradient-hospital);
    color: white;
    border: none;
    padding: 8px 12px;
    border-radius: var(--radius-md);
    font-size: 12px;
    font-weight: 700;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.select-btn:hover {
    transform: translateY(-2px);
}

/* ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ù…Ø®ØªØ§Ø± */
.appointment-details-card {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: 20px;
    box-shadow: var(--shadow-card);
    margin-bottom: 25px;
    border: 2px solid var(--primary);
}

.selected-hospital-info {
    display: flex;
    align-items: center;
    gap: 15px;
}

/* Ø§Ù„ØªÙ‚ÙˆÙŠÙ… */
.calendar-section {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: 25px;
    box-shadow: var(--shadow-card);
    margin-bottom: 25px;
    border: 1px solid #f1f5f9;
}

.calendar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.current-month {
    font-size: 18px;
    font-weight: 800;
    color: var(--text-primary);
}

.nav-btn {
    background: var(--light);
    border: 2px solid #e2e8f0;
    width: 40px;
    height: 40px;
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.nav-btn:hover {
    background: var(--primary-light);
    border-color: var(--primary);
}

.calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 8px;
    margin-bottom: 15px;
}

.calendar-day-header {
    text-align: center;
    font-weight: 700;
    font-size: 12px;
    color: var(--text-secondary);
    padding: 8px 0;
}

.calendar-day {
    aspect-ratio: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: var(--transition-smooth);
    font-weight: 600;
    font-size: 14px;
}

.calendar-day:hover {
    background: var(--primary-light);
}

.calendar-day.selected {
    background: var(--gradient-hospital);
    color: white;
    transform: scale(1.1);
}

.calendar-day.disabled {
    color: var(--text-light);
    cursor: not-allowed;
    opacity: 0.5;
}

.calendar-day.today {
    background: var(--accent);
    color: white;
}

/* Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø­Ø© */
.time-slots-section {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: 25px;
    box-shadow: var(--shadow-card);
    margin-bottom: 25px;
    border: 1px solid #f1f5f9;
}

.time-slots-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    margin-top: 20px;
}

.time-slot {
    background: #f8fafc;
    border: 2px solid #e2e8f0;
    border-radius: var(--radius-md);
    padding: 12px 8px;
    text-align: center;
    cursor: pointer;
    transition: var(--transition-smooth);
    font-weight: 600;
    font-size: 14px;
}

.time-slot:hover {
    border-color: var(--primary);
    transform: translateY(-2px);
}

.time-slot.selected {
    background: var(--gradient-hospital);
    color: white;
    border-color: var(--primary);
}

.time-slot.disabled {
    background: #f1f5f9;
    color: var(--text-light);
    cursor: not-allowed;
    opacity: 0.6;
}

/* Ù…Ù„Ø®Øµ Ø§Ù„Ø­Ø¬Ø² */
.appointment-summary-card {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: 25px;
    box-shadow: var(--shadow-card);
    margin-bottom: 25px;
    border: 2px solid var(--success);
}

.summary-header {
    font-size: 18px;
    font-weight: 800;
    margin-bottom: 20px;
    color: var(--text-primary);
    text-align: center;
}

.summary-item {
    display: flex;
    justify-content: space-between;
    padding: 12px 0;
    border-bottom: 1px solid #e2e8f0;
}

.summary-item:last-child {
    border-bottom: none;
}

.summary-label {
    font-weight: 600;
    color: var(--text-secondary);
}

.summary-value {
    font-weight: 700;
    color: var(--text-primary);
}

/* Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø© */
.service-type-buttons {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    margin-top: 15px;
}

.service-type-btn {
    background: #f8fafc;
    border: 2px solid #e2e8f0;
    border-radius: var(--radius-md);
    padding: 15px 10px;
    text-align: center;
    cursor: pointer;
    transition: var(--transition-smooth);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
}

.service-type-btn:hover {
    border-color: var(--primary);
    transform: translateY(-2px);
}

.service-type-btn.active {
    background: var(--primary-light);
    border-color: var(--primary);
}

.service-type-btn i {
    font-size: 20px;
    color: var(--primary);
}

.service-type-btn.active i {
    color: white;
}

.service-type-btn span {
    font-weight: 700;
    font-size: 12px;
}

/* Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø®Ø¯Ù…Ø§Øª */
.service-options-section {
    display: none;
    margin-top: 25px;
}

.service-options-section.active {
    display: block;
    animation: fadeIn 0.5s ease-out;
}

.services-checkbox-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 12px;
    margin-top: 20px;
}

.service-checkbox {
    position: relative;
}

.service-checkbox input {
    display: none;
}

.service-checkbox label {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 15px;
    background: #f8fafc;
    border: 2px solid #e2e8f0;
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: var(--transition-smooth);
}

.service-checkbox input:checked + label {
    background: var(--primary-light);
    border-color: var(--primary);
    transform: translateX(-5px);
}

.service-checkbox:hover label {
    border-color: var(--primary);
}

.service-icon {
    width: 50px;
    height: 50px;
    border-radius: var(--radius-md);
    background: var(--gradient-hospital);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    color: white;
    flex-shrink: 0;
}

.service-details {
    flex: 1;
}

.service-name {
    font-weight: 700;
    font-size: 14px;
    margin-bottom: 4px;
}

.service-price {
    font-weight: 800;
    font-size: 16px;
    color: var(--primary);
    margin-bottom: 2px;
}

.service-duration {
    font-size: 12px;
    color: var(--text-secondary);
}

/* Ù…Ù„Ø®Øµ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© */
.selected-services-summary {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: 25px;
    box-shadow: var(--shadow-card);
    margin: 25px 0;
    border: 2px solid var(--success);
}

.selected-services-list {
    margin: 15px 0;
}

.service-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 0;
    border-bottom: 1px solid #e2e8f0;
}

.service-item:last-child {
    border-bottom: none;
}

.service-item-name {
    font-weight: 600;
    font-size: 14px;
}

.service-item-price {
    font-weight: 700;
    color: var(--primary);
}

.no-services {
    text-align: center;
    color: var(--text-secondary);
    font-style: italic;
    padding: 20px;
}

.total-cost, .total-duration {
    display: flex;
    justify-content: space-between;
    padding: 12px 0;
    font-weight: 800;
    font-size: 16px;
    border-top: 2px solid #e2e8f0;
}

.total-cost {
    color: var(--primary);
}

.total-duration {
    color: var(--text-primary);
}

/* Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ */
.form-section {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: 25px;
    box-shadow: var(--shadow-card);
    margin-bottom: 25px;
    border: 1px solid #f1f5f9;
}

.form-group {
    margin-bottom: 20px;
}

.form-label {
    display: block;
    margin-bottom: 8px;
    font-weight: 700;
    color: var(--text-primary);
    font-size: 14px;
}

.form-input, .form-select, .form-textarea {
    width: 100%;
    padding: 14px 16px;
    border: 2px solid #e2e8f0;
    border-radius: var(--radius-md);
    font-size: 16px;
    transition: var(--transition-smooth);
    background: white;
    font-family: 'Tajawal', sans-serif;
}

.form-input:focus, .form-select:focus, .form-textarea:focus {
    border-color: var(--primary);
    outline: none;
    box-shadow: 0 0 0 3px rgba(30, 64, 175, 0.1);
}

.form-textarea {
    resize: vertical;
    min-height: 80px;
}

/* Radio Buttons */
.radio-group {
    display: flex;
    gap: 20px;
    margin-top: 10px;
    flex-wrap: wrap;
}

.radio-label {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    font-weight: 600;
}

.radio-custom {
    width: 20px;
    height: 20px;
    border: 2px solid #e2e8f0;
    border-radius: 50%;
    position: relative;
    transition: var(--transition-smooth);
}

.radio-label input {
    display: none;
}

.radio-label input:checked + .radio-custom {
    border-color: var(--primary);
    background: var(--primary);
}

.radio-label input:checked + .radio-custom::after {
    content: '';
    width: 8px;
    height: 8px;
    background: white;
    border-radius: 50%;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

/* Ø§Ù„Ø¯ÙØ¹ */
.payment-summary-card {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: 25px;
    box-shadow: var(--shadow-card);
    margin-bottom: 25px;
    border: 2px solid var(--primary);
}

.appointment-number {
    background: var(--primary-light);
    color: var(--primary);
    padding: 12px;
    border-radius: var(--radius-md);
    font-family: monospace;
    font-weight: 700;
    text-align: center;
    margin: 15px 0;
    font-size: 18px;
}

.services-breakdown {
    margin: 20px 0;
    padding: 20px;
    background: #f8fafc;
    border-radius: var(--radius-md);
}

.breakdown-header {
    font-weight: 700;
    margin-bottom: 15px;
    color: var(--text-primary);
}

.services-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.service-breakdown-item {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px solid #e2e8f0;
}

.service-breakdown-item:last-child {
    border-bottom: none;
}

.summary-item.total {
    background: #f8fafc;
    padding: 15px;
    border-radius: var(--radius-md);
    margin-top: 10px;
    border: 2px solid var(--success);
}

.summary-item.total .summary-value {
    font-size: 18px;
    color: var(--success);
}

/* Ø·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹ */
.payment-methods-section {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: 25px;
    box-shadow: var(--shadow-card);
    margin-bottom: 25px;
    border: 1px solid #f1f5f9;
}

.payment-methods {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
    margin: 20px 0;
}

.payment-method {
    background: #f8fafc;
    border: 2px solid #e2e8f0;
    border-radius: var(--radius-md);
    padding: 20px 12px;
    text-align: center;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.payment-method:hover {
    border-color: var(--primary);
    transform: translateY(-3px);
}

.payment-method.active {
    background: var(--primary-light);
    border-color: var(--primary);
}

.method-icon {
    width: 50px;
    height: 50px;
    border-radius: var(--radius-md);
    background: var(--gradient-hospital);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 12px;
    font-size: 20px;
    color: white;
}

.method-name {
    font-weight: 700;
    font-size: 13px;
}

.payment-details {
    margin-top: 20px;
    padding: 20px;
    background: #f8fafc;
    border-radius: var(--radius-md);
}

.balance-info {
    background: var(--success);
    color: white;
    padding: 10px;
    border-radius: var(--radius-sm);
    text-align: center;
    font-weight: 700;
    margin-top: 10px;
}

.cash-notice {
    background: var(--warning);
    color: white;
    padding: 15px;
    border-radius: var(--radius-md);
    text-align: center;
    font-weight: 600;
}

/* Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª */
.instructions-section {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: 25px;
    box-shadow: var(--shadow-card);
    margin-bottom: 25px;
    border: 1px solid #f1f5f9;
}

.instructions-card {
    background: #fef3c7;
    border: 2px solid #f59e0b;
    border-radius: var(--radius-md);
    padding: 20px;
}

.instructions-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 15px;
    font-weight: 700;
    color: #92400e;
}

.instructions-list {
    list-style: none;
    padding: 0;
}

.instructions-list li {
    padding: 8px 0;
    border-bottom: 1px solid rgba(245, 158, 11, 0.3);
    position: relative;
    padding-right: 20px;
}

.instructions-list li:last-child {
    border-bottom: none;
}

.instructions-list li::before {
    content: 'â€¢';
    color: #f59e0b;
    font-weight: bold;
    position: absolute;
    right: 0;
}

/* Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(10px);
    z-index: 2000;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.modal-content {
    background: white;
    border-radius: var(--radius-xl);
    padding: 30px;
    max-width: 400px;
    width: 100%;
    box-shadow: var(--shadow-large);
    animation: modalAppear 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    max-height: 90vh;
    overflow-y: auto;
}

@keyframes modalAppear {
    from {
        opacity: 0;
        transform: scale(0.8) translateY(50px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

.modal-header {
    display: flex;
    justify-content: between;
    align-items: center;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 2px solid #f1f5f9;
}

.modal-title {
    font-size: 22px;
    font-weight: 800;
    color: var(--text-primary);
}

.close-modal {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: var(--text-secondary);
    transition: var(--transition-smooth);
}

.close-modal:hover {
    color: var(--error);
    transform: rotate(90deg);
}

/* ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø² */
.confirmation-content {
    text-align: center;
    padding: 20px 0;
}

.success-icon {
    font-size: 64px;
    color: var(--success);
    margin-bottom: 20px;
}

.confirmation-content h3 {
    margin-bottom: 10px;
    color: var(--text-primary);
}

.confirmation-content p {
    color: var(--text-secondary);
    margin-bottom: 20px;
    line-height: 1.6;
}

.appointment-details {
    background: #f8fafc;
    border-radius: var(--radius-lg);
    padding: 20px;
    margin: 20px 0;
    text-align: right;
}

.detail-item {
    display: flex;
    justify-content: space-between;
    padding: 10px 0;
    border-bottom: 1px solid #e2e8f0;
}

.detail-item:last-child {
    border-bottom: none;
}

.detail-label {
    font-weight: 600;
    color: var(--text-secondary);
}

.detail-value {
    font-weight: 700;
    color: var(--text-primary);
}

.reminder-notice {
    background: var(--primary-light);
    color: var(--primary);
    padding: 15px;
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    gap: 10px;
    justify-content: center;
    font-weight: 600;
    margin: 15px 0;
}

.preparation-notice {
    background: #fef3c7;
    color: #92400e;
    padding: 15px;
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    gap: 10px;
    justify-content: center;
    font-weight: 600;
    margin: 15px 0;
    border: 1px solid #f59e0b;
}

.modal-actions {
    display: flex;
    gap: 12px;
    margin-top: 25px;
}

.modal-actions .btn {
    flex: 1;
}

/* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø³ÙÙ„ÙŠ */
.bottom-nav-premium {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--glass);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    display: flex;
    padding: 15px;
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-soft);
    z-index: 1000;
    max-width: 380px;
    width: calc(100% - 40px);
}

.nav-item-premium {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 10px 12px;
    border-radius: var(--radius-md);
    transition: var(--transition-bounce);
    flex: 1;
    position: relative;
    text-decoration: none;
    color: inherit;
}

.nav-item-premium.active {
    background: var(--gradient-hospital);
    color: white;
    transform: translateY(-10px);
}

.nav-item-premium.active .nav-label {
    color: white;
}

.nav-item-premium.active::before {
    content: '';
    position: absolute;
    top: -8px;
    width: 20px;
    height: 3px;
    background: var(--gradient-hospital);
    border-radius: 2px;
}

.nav-icon-premium {
    font-size: 20px;
    margin-bottom: 6px;
    transition: var(--transition-smooth);
}

.nav-item-premium.active .nav-icon-premium {
    transform: scale(1.2);
}

.nav-label {
    font-size: 11px;
    font-weight: 700;
    color: var(--text-secondary);
}

/* Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª */
.notification {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--success);
    color: white;
    padding: 16px 24px;
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-large);
    z-index: 3000;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 12px;
    animation: slideDown 0.3s ease-out;
}

.notification.error {
    background: var(--error);
}

.notification.warning {
    background: var(--warning);
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateX(-50%) translateY(-50px);
    }
    to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
}

/* Ø§Ù„ØªÙƒÙŠÙ Ù…Ø¹ Ø§Ù„Ø´Ø§Ø´Ø§Øª */
@media (max-width: 428px) {
    .services-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .search-filters {
        grid-template-columns: 1fr;
    }
    
    .time-slots-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .payment-methods {
        grid-template-columns: 1fr;
    }
    
    .service-type-buttons {
        grid-template-columns: 1fr;
    }
    
    .modal-actions {
        flex-direction: column;
    }
    
    .step-actions {
        flex-direction: column;
    }
    
    .radio-group {
        flex-direction: column;
        gap: 10px;
    }
    
    .hospital-card {
        flex-direction: column;
        text-align: center;
    }
    
    .hospital-actions {
        flex-direction: row;
        justify-content: center;
    }
}
</style>
</head>
<body>
    <!-- ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© -->
    <div class="background-effects">
        <div class="floating-shapes">
            <div class="shape"></div>
            <div class="shape"></div>
            <div class="shape"></div>
        </div>
    </div>

    <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© -->
    <div class="status-bar">
        <div class="status-left">
            <span id="currentTime">2:45</span>
        </div>
        <div class="status-right">
            <i class="fas fa-signal"></i>
            <i class="fas fa-wifi"></i>
            <i class="fas fa-battery-three-quarters"></i>
        </div>
    </div>

    <!-- Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <div class="premium-app">
        <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
        <div class="appointment-header">
            <div class="header-background"></div>
            <div class="header-content">
                <h1 class="header-title">Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯ Ù…Ø³ØªØ´ÙÙ‰</h1>
                <p class="header-subtitle">Ø§Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯Ùƒ Ù„Ù„ÙØ­ÙˆØµØ§Øª ÙˆØ§Ù„Ø£Ø´Ø¹Ø© ÙÙŠ Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª</p>
                
                <div class="quick-stats">
                    <div class="stat-item">
                        <div class="stat-value">50+</div>
                        <div class="stat-label">Ù…Ø³ØªØ´ÙÙ‰ Ù…Ø¹ØªÙ…Ø¯</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">24/7</div>
                        <div class="stat-label">Ø­Ø¬Ø² Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">4.8</div>
                        <div class="stat-label">ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø±Ø¶Ù‰</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
        <div class="appointment-content">
            <!-- Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø­Ø¬Ø² -->
            <div class="booking-steps">
                <div class="step active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-label">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰</div>
                </div>
                <div class="step" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-label">Ø­Ø¯Ø¯ Ø§Ù„Ù…ÙˆØ¹Ø¯</div>
                </div>
                <div class="step" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-label">Ø§Ø®ØªØ± Ø§Ù„Ø®Ø¯Ù…Ø©</div>
                </div>
                <div class="step" data-step="4">
                    <div class="step-number">4</div>
                    <div class="step-label">Ø§Ø¯ÙØ¹ ÙˆØ£ÙƒØ¯</div>
                </div>
            </div>

            <!-- Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰ -->
            <div class="step-content active" id="step1">
                <div class="section-title">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰</div>
                
                <!-- Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…ØªÙ‚Ø¯Ù… -->
                <div class="search-section">
                    <div class="search-container">
                        <input type="text" class="search-input" id="hospitalSearch" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø³ØªØ´ÙÙ‰ Ø£Ùˆ Ù…Ù†Ø·Ù‚Ø©...">
                        <i class="fas fa-search search-icon"></i>
                    </div>
                    <div class="search-filters">
                        <select class="filter-select" id="cityFilter">
                            <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¯Ù†</option>
                            <option value="sanaa">ØµÙ†Ø¹Ø§Ø¡</option>
                            <option value="aden">Ø¹Ø¯Ù†</option>
                            <option value="taiz">ØªØ¹Ø²</option>
                            <option value="hodeidah">Ø§Ù„Ø­Ø¯ÙŠØ¯Ø©</option>
                            <option value="ibb">Ø¥Ø¨</option>
                        </select>
                        <select class="filter-select" id="specialtyFilter">
                            <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ®ØµØµØ§Øª</option>
                            <option value="radiology">Ø§Ù„Ø£Ø´Ø¹Ø©</option>
                            <option value="lab">Ø§Ù„Ù…Ø®ØªØ¨Ø±</option>
                            <option value="surgery">Ø§Ù„Ø¬Ø±Ø§Ø­Ø©</option>
                            <option value="internal">Ø§Ù„Ø¨Ø§Ø·Ù†ÙŠØ©</option>
                        </select>
                    </div>
                </div>

                <!-- Ø§Ù„ØªØ®ØµØµØ§Øª -->
                <div class="section-title">Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø®Ø¯Ù…Ø§Øª</div>
                <div class="services-section">
                    <div class="services-grid" id="servicesGrid">
                        <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±Ø¨Øª -->
                    </div>
                </div>

                <!-- Ø§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª -->
                <div class="section-title">Ø§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©</div>
                <div class="hospitals-section">
                    <div class="hospitals-grid" id="hospitalsGrid">
                        <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±Ø¨Øª -->
                    </div>
                </div>

                <div class="step-actions">
                    <button class="btn btn-primary next-step" data-next="2" disabled>
                        Ø§Ù„ØªØ§Ù„ÙŠ <i class="fas fa-arrow-left"></i>
                    </button>
                </div>
            </div>

            <!-- Ø§Ù„Ø®Ø·ÙˆØ© 2: ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆØ¹Ø¯ -->
            <div class="step-content" id="step2">
                <div class="section-title">Ø­Ø¯Ø¯ ØªØ§Ø±ÙŠØ® ÙˆÙˆÙ‚Øª Ø§Ù„Ù…ÙˆØ¹Ø¯</div>
                
                <div class="appointment-details-card">
                    <div class="selected-hospital-info">
                        <div class="hospital-avatar" id="selectedHospitalAvatar">ğŸ¥</div>
                        <div class="hospital-info">
                            <div class="hospital-name" id="selectedHospitalName">---</div>
                            <div class="hospital-address" id="selectedHospitalAddress">---</div>
                            <div class="hospital-rating">
                                <span class="stars" id="selectedHospitalStars">â˜…â˜…â˜…â˜…â˜…</span>
                                <span class="rating-value" id="selectedHospitalRating">4.8</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="calendar-section">
                    <div class="calendar-header">
                        <button class="nav-btn prev-month"><i class="fas fa-chevron-right"></i></button>
                        <div class="current-month" id="currentMonth">Ù…Ø§Ø±Ø³ 2024</div>
                        <button class="nav-btn next-month"><i class="fas fa-chevron-left"></i></button>
                    </div>
                    <div class="calendar-grid" id="calendarGrid">
                        <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±Ø¨Øª -->
                    </div>
                </div>

                <div class="time-slots-section">
                    <div class="section-title">Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø­Ø©</div>
                    <div class="time-slots-grid" id="timeSlotsGrid">
                        <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±Ø¨Øª -->
                    </div>
                </div>

                <div class="step-actions">
                    <button class="btn btn-secondary prev-step" data-prev="1">
                        <i class="fas fa-arrow-right"></i> Ø§Ù„Ø³Ø§Ø¨Ù‚
                    </button>
                    <button class="btn btn-primary next-step" data-next="3" disabled>
                        Ø§Ù„ØªØ§Ù„ÙŠ <i class="fas fa-arrow-left"></i>
                    </button>
                </div>
            </div>

            <!-- Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø®Ø¯Ù…Ø© -->
            <div class="step-content" id="step3">
                <div class="section-title">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</div>
                
                <div class="appointment-summary-card">
                    <div class="summary-header">Ù…Ù„Ø®Øµ Ø§Ù„Ø­Ø¬Ø²</div>
                    <div class="summary-item">
                        <span class="summary-label">Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰:</span>
                        <span class="summary-value" id="summaryHospital">---</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Ø§Ù„ØªØ§Ø±ÙŠØ®:</span>
                        <span class="summary-value" id="summaryDate">---</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Ø§Ù„ÙˆÙ‚Øª:</span>
                        <span class="summary-value" id="summaryTime">---</span>
                    </div>
                </div>

                <div class="services-selection-section">
                    <!-- Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø© -->
                    <div class="form-group">
                        <label class="form-label">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© *</label>
                        <div class="service-type-buttons">
                            <button class="service-type-btn active" data-type="radiology">
                                <i class="fas fa-x-ray"></i>
                                <span>Ø§Ù„Ø£Ø´Ø¹Ø©</span>
                            </button>
                            <button class="service-type-btn" data-type="lab">
                                <i class="fas fa-flask"></i>
                                <span>Ø§Ù„ÙØ­ÙˆØµØ§Øª</span>
                            </button>
                            <button class="service-type-btn" data-type="other">
                                <i class="fas fa-stethoscope"></i>
                                <span>Ø®Ø¯Ù…Ø§Øª Ø£Ø®Ø±Ù‰</span>
                            </button>
                        </div>
                    </div>

                    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø´Ø¹Ø© -->
                    <div class="service-options-section active" id="radiologyOptions">
                        <div class="section-title">Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£Ø´Ø¹Ø© Ø§Ù„Ù…ØªØ§Ø­Ø©</div>
                        <div class="services-checkbox-grid">
                            <div class="service-checkbox">
                                <input type="checkbox" id="xray-chest" data-price="80" data-duration="30">
                                <label for="xray-chest">
                                    <div class="service-icon">
                                        <i class="fas fa-lungs"></i>
                                    </div>
                                    <div class="service-details">
                                        <div class="service-name">Ø£Ø´Ø¹Ø© Ø§Ù„ØµØ¯Ø±</div>
                                        <div class="service-price">80 Ø±.ÙŠ</div>
                                        <div class="service-duration">30 Ø¯Ù‚ÙŠÙ‚Ø©</div>
                                    </div>
                                </label>
                            </div>
                            <div class="service-checkbox">
                                <input type="checkbox" id="xray-bones" data-price="120" data-duration="45">
                                <label for="xray-bones">
                                    <div class="service-icon">
                                        <i class="fas fa-bone"></i>
                                    </div>
                                    <div class="service-details">
                                        <div class="service-name">Ø£Ø´Ø¹Ø© Ø§Ù„Ø¹Ø¸Ø§Ù…</div>
                                        <div class="service-price">120 Ø±.ÙŠ</div>
                                        <div class="service-duration">45 Ø¯Ù‚ÙŠÙ‚Ø©</div>
                                    </div>
                                </label>
                            </div>
                            <div class="service-checkbox">
                                <input type="checkbox" id="ct-scan" data-price="350" data-duration="60">
                                <label for="ct-scan">
                                    <div class="service-icon">
                                        <i class="fas fa-brain"></i>
                                    </div>
                                    <div class="service-details">
                                        <div class="service-name">Ø§Ù„Ø£Ø´Ø¹Ø© Ø§Ù„Ù…Ù‚Ø·Ø¹ÙŠØ©</div>
                                        <div class="service-price">350 Ø±.ÙŠ</div>
                                        <div class="service-duration">60 Ø¯Ù‚ÙŠÙ‚Ø©</div>
                                    </div>
                                </label>
                            </div>
                            <div class="service-checkbox">
                                <input type="checkbox" id="mri" data-price="600" data-duration="90">
                                <label for="mri">
                                    <div class="service-icon">
                                        <i class="fas fa-magnet"></i>
                                    </div>
                                    <div class="service-details">
                                        <div class="service-name">Ø§Ù„Ø±Ù†ÙŠÙ† Ø§Ù„Ù…ØºÙ†Ø§Ø·ÙŠØ³ÙŠ</div>
                                        <div class="service-price">600 Ø±.ÙŠ</div>
                                        <div class="service-duration">90 Ø¯Ù‚ÙŠÙ‚Ø©</div>
                                    </div>
                                </label>
                            </div>
                            <div class="service-checkbox">
                                <input type="checkbox" id="ultrasound" data-price="150" data-duration="40">
                                <label for="ultrasound">
                                    <div class="service-icon">
                                        <i class="fas fa-baby"></i>
                                    </div>
                                    <div class="service-details">
                                        <div class="service-name">Ø§Ù„Ù…ÙˆØ¬Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ©</div>
                                        <div class="service-price">150 Ø±.ÙŠ</div>
                                        <div class="service-duration">40 Ø¯Ù‚ÙŠÙ‚Ø©</div>
                                    </div>
                                </label>
                            </div>
                            <div class="service-checkbox">
                                <input type="checkbox" id="mammogram" data-price="200" data-duration="50">
                                <label for="mammogram">
                                    <div class="service-icon">
                                        <i class="fas fa-female"></i>
                                    </div>
                                    <div class="service-details">
                                        <div class="service-name">Ø£Ø´Ø¹Ø© Ø§Ù„Ø«Ø¯ÙŠ</div>
                                        <div class="service-price">200 Ø±.ÙŠ</div>
                                        <div class="service-duration">50 Ø¯Ù‚ÙŠÙ‚Ø©</div>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙØ­ÙˆØµØ§Øª -->
                    <div class="service-options-section" id="labOptions">
                        <div class="section-title">Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ÙØ­ÙˆØµØ§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©</div>
                        <div class="services-checkbox-grid">
                            <div class="service-checkbox">
                                <input type="checkbox" id="blood-test" data-price="50" data-duration="15">
                                <label for="blood-test">
                                    <div class="service-icon">
                                        <i class="fas fa-tint"></i>
                                    </div>
                                    <div class="service-details">
                                        <div class="service-name">ÙØ­Øµ Ø§Ù„Ø¯Ù… Ø§Ù„Ø´Ø§Ù…Ù„</div>
                                        <div class="service-price">50 Ø±.ÙŠ</div>
                                        <div class="service-duration">15 Ø¯Ù‚ÙŠÙ‚Ø©</div>
                                    </div>
                                </label>
                            </div>
                            <div class="service-checkbox">
                                <input type="checkbox" id="sugar-test" data-price="30" data-duration="10">
                                <label for="sugar-test">
                                    <div class="service-icon">
                                        <i class="fas fa-candy-cane"></i>
                                    </div>
                                    <div class="service-details">
                                        <div class="service-name">ÙØ­Øµ Ø§Ù„Ø³ÙƒØ±</div>
                                        <div class="service-price">30 Ø±.ÙŠ</div>
                                        <div class="service-duration">10 Ø¯Ù‚ÙŠÙ‚Ø©</div>
                                    </div>
                                </label>
                            </div>
                            <div class="service-checkbox">
                                <input type="checkbox" id="cholesterol" data-price="40" data-duration="10">
                                <label for="cholesterol">
                                    <div class="service-icon">
                                        <i class="fas fa-heartbeat"></i>
                                    </div>
                                    <div class="service-details">
                                        <div class="service-name">ÙØ­Øµ Ø§Ù„ÙƒÙˆÙ„ÙŠØ³ØªØ±ÙˆÙ„</div>
                                        <div class="service-price">40 Ø±.ÙŠ</div>
                                        <div class="service-duration">10 Ø¯Ù‚ÙŠÙ‚Ø©</div>
                                    </div>
                                </label>
                            </div>
                            <div class="service-checkbox">
                                <input type="checkbox" id="liver-test" data-price="70" data-duration="20">
                                <label for="liver-test">
                                    <div class="service-icon">
                                        <i class="fas fa-liver"></i>
                                    </div>
                                    <div class="service-details">
                                        <div class="service-name">ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ÙƒØ¨Ø¯</div>
                                        <div class="service-price">70 Ø±.ÙŠ</div>
                                        <div class="service-duration">20 Ø¯Ù‚ÙŠÙ‚Ø©</div>
                                    </div>
                                </label>
                            </div>
                            <div class="service-checkbox">
                                <input type="checkbox" id="kidney-test" data-price="60" data-duration="20">
                                <label for="kidney-test">
                                    <div class="service-icon">
                                        <i class="fas fa-kidneys"></i>
                                    </div>
                                    <div class="service-details">
                                        <div class="service-name">ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ÙƒÙ„Ù‰</div>
                                        <div class="service-price">60 Ø±.ÙŠ</div>
                                        <div class="service-duration">20 Ø¯Ù‚ÙŠÙ‚Ø©</div>
                                    </div>
                                </label>
                            </div>
                            <div class="service-checkbox">
                                <input type="checkbox" id="urine-test" data-price="25" data-duration="10">
                                <label for="urine-test">
                                    <div class="service-icon">
                                        <i class="fas fa-vial"></i>
                                    </div>
                                    <div class="service-details">
                                        <div class="service-name">ÙØ­Øµ Ø§Ù„Ø¨ÙˆÙ„</div>
                                        <div class="service-price">25 Ø±.ÙŠ</div>
                                        <div class="service-duration">10 Ø¯Ù‚ÙŠÙ‚Ø©</div>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Ø®Ø¯Ù…Ø§Øª Ø£Ø®Ø±Ù‰ -->
                    <div class="service-options-section" id="otherOptions">
                        <div class="section-title">Ø®Ø¯Ù…Ø§Øª Ø£Ø®Ø±Ù‰</div>
                        <div class="services-checkbox-grid">
                            <div class="service-checkbox">
                                <input type="checkbox" id="ecg" data-price="100" data-duration="25">
                                <label for="ecg">
                                    <div class="service-icon">
                                        <i class="fas fa-heart"></i>
                                    </div>
                                    <div class="service-details">
                                        <div class="service-name">Ø±Ø³Ù… Ø§Ù„Ù‚Ù„Ø¨</div>
                                        <div class="service-price">100 Ø±.ÙŠ</div>
                                        <div class="service-duration">25 Ø¯Ù‚ÙŠÙ‚Ø©</div>
                                    </div>
                                </label>
                            </div>
                            <div class="service-checkbox">
                                <input type="checkbox" id="echo" data-price="250" data-duration="45">
                                <label for="echo">
                                    <div class="service-icon">
                                        <i class="fas fa-wave-square"></i>
                                    </div>
                                    <div class="service-details">
                                        <div class="service-name">Ø¥ÙŠÙƒÙˆ Ø§Ù„Ù‚Ù„Ø¨</div>
                                        <div class="service-price">250 Ø±.ÙŠ</div>
                                        <div class="service-duration">45 Ø¯Ù‚ÙŠÙ‚Ø©</div>
                                    </div>
                                </label>
                            </div>
                            <div class="service-checkbox">
                                <input type="checkbox" id="endoscopy" data-price="400" data-duration="60">
                                <label for="endoscopy">
                                    <div class="service-icon">
                                        <i class="fas fa-camera"></i>
                                    </div>
                                    <div class="service-details">
                                        <div class="service-name">Ù…Ù†Ø¸Ø§Ø± Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ù‡Ø¶Ù…ÙŠ</div>
                                        <div class="service-price">400 Ø±.ÙŠ</div>
                                        <div class="service-duration">60 Ø¯Ù‚ÙŠÙ‚Ø©</div>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Ù…Ù„Ø®Øµ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© -->
                    <div class="selected-services-summary">
                        <div class="summary-header">Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©</div>
                        <div class="selected-services-list" id="selectedServicesList">
                            <div class="no-services">Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø£ÙŠ Ø®Ø¯Ù…Ø§Øª</div>
                        </div>
                        <div class="total-cost">
                            <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:</span>
                            <span id="totalCost">0 Ø±.ÙŠ</span>
                        </div>
                        <div class="total-duration">
                            <span>Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªÙˆÙ‚Ø¹:</span>
                            <span id="totalDuration">0 Ø¯Ù‚ÙŠÙ‚Ø©</span>
                        </div>
                    </div>

                    <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© -->
                    <div class="form-section">
                        <div class="form-group">
                            <label class="form-label">Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©</label>
                            <textarea class="form-textarea" id="additionalDetails" 
                                      placeholder="Ø£ÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ø£Ùˆ ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø®Ø§ØµØ©..." 
                                      rows="3"></textarea>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Ù‡Ù„ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ù…Ø³Ø§Ø¹Ø¯Ø© Ø®Ø§ØµØ©ØŸ</label>
                            <div class="radio-group">
                                <label class="radio-label">
                                    <input type="radio" name="specialAssistance" value="no">
                                    <span class="radio-custom"></span>
                                    Ù„Ø§
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="specialAssistance" value="wheelchair">
                                    <span class="radio-custom"></span>
                                    ÙƒØ±Ø³ÙŠ Ù…ØªØ­Ø±Ùƒ
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="specialAssistance" value="nurse">
                                    <span class="radio-custom"></span>
                                    Ù…Ø³Ø§Ø¹Ø¯Ø© Ù…Ù…Ø±Ø¶
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="step-actions">
                    <button class="btn btn-secondary prev-step" data-prev="2">
                        <i class="fas fa-arrow-right"></i> Ø§Ù„Ø³Ø§Ø¨Ù‚
                    </button>
                    <button class="btn btn-primary next-step" data-next="4">
                        Ø§Ù„ØªØ§Ù„ÙŠ <i class="fas fa-arrow-left"></i>
                    </button>
                </div>
            </div>

            <!-- Ø§Ù„Ø®Ø·ÙˆØ© 4: Ø§Ù„Ø¯ÙØ¹ ÙˆØ§Ù„ØªØ£ÙƒÙŠØ¯ -->
            <div class="step-content" id="step4">
                <div class="section-title">Ø§Ù„Ø¯ÙØ¹ ÙˆØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø²</div>
                
                <div class="payment-summary-card">
                    <div class="summary-header">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø¬Ø²</div>
                    <div class="appointment-number" id="appointmentNumber">HOS-2024-001</div>
                    
                    <div class="summary-item">
                        <span class="summary-label">Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰:</span>
                        <span class="summary-value" id="paymentHospital">---</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Ø§Ù„Ù…ÙˆØ¹Ø¯:</span>
                        <span class="summary-value" id="paymentDateTime">---</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©:</span>
                        <span class="summary-value" id="paymentServiceType">---</span>
                    </div>
                    
                    <div class="services-breakdown">
                        <div class="breakdown-header">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø§Øª:</div>
                        <div class="services-list" id="paymentServicesList">
                            <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±Ø¨Øª -->
                        </div>
                    </div>
                    
                    <div class="summary-item total">
                        <span class="summary-label">Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚:</span>
                        <span class="summary-value" id="paymentAmount">--- Ø±.ÙŠ</span>
                    </div>
                </div>

                <div class="payment-methods-section">
                    <div class="section-title">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</div>
                    
                    <div class="payment-methods">
                        <div class="payment-method active" data-method="wallet">
                            <div class="method-icon">
                                <i class="fas fa-wallet"></i>
                            </div>
                            <div class="method-name">Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©</div>
                        </div>
                        <div class="payment-method" data-method="card">
                            <div class="method-icon">
                                <i class="fas fa-credit-card"></i>
                            </div>
                            <div class="method-name">Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø§Ø¦ØªÙ…Ø§Ù†ÙŠØ©</div>
                        </div>
                        <div class="payment-method" data-method="cash">
                            <div class="method-icon">
                                <i class="fas fa-money-bill-wave"></i>
                            </div>
                            <div class="method-name">Ø§Ù„Ø¯ÙØ¹ ÙÙŠ Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰</div>
                        </div>
                    </div>

                    <div class="payment-details" id="walletPayment">
                        <div class="form-group">
                            <label class="form-label">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­ÙØ¸Ø©</label>
                            <select class="form-select" id="selectedWallet" required>
                                <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­ÙØ¸Ø©</option>
                            </select>
                        </div>
                        <div class="balance-info">
                            Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø­: <span id="walletBalance">0 Ø±.ÙŠ</span>
                        </div>
                    </div>

                    <div class="payment-details" id="cardPayment" style="display: none;">
                        <div class="form-group">
                            <label class="form-label">Ø§Ø®ØªØ± Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©</label>
                            <select class="form-select" id="selectedCard" required>
                                <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©</option>
                            </select>
                        </div>
                    </div>

                    <div class="payment-details" id="cashPayment" style="display: none;">
                        <div class="cash-notice">
                            <i class="fas fa-info-circle"></i>
                            Ø³ÙŠØªÙ… Ø­Ø¬Ø² Ø§Ù„Ù…ÙˆØ¹Ø¯ ÙˆØ³ÙˆÙ ØªÙ‚ÙˆÙ… Ø¨Ø§Ù„Ø¯ÙØ¹ Ù†Ù‚Ø¯Ø§Ù‹ ÙÙŠ Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰ Ø¹Ù†Ø¯ ÙˆØµÙˆÙ„Ùƒ.
                        </div>
                    </div>
                </div>

                <div class="instructions-section">
                    <div class="instructions-card">
                        <div class="instructions-header">
                            <i class="fas fa-info-circle"></i>
                            ØªØ¹Ù„ÙŠÙ…Ø§Øª Ù…Ù‡Ù…Ø©
                        </div>
                        <ul class="instructions-list">
                            <li>ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø­Ø¶ÙˆØ± Ù‚Ø¨Ù„ Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø¨Ù€ 15 Ø¯Ù‚ÙŠÙ‚Ø©</li>
                            <li>Ø§Ø­Ø¶Ø± Ù…Ø¹Ùƒ Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ø´Ø®ØµÙŠØ© ÙˆÙ†ØªØ§Ø¦Ø¬ Ø§Ù„ÙØ­ÙˆØµØ§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ø¥Ù† ÙˆØ¬Ø¯Øª</li>
                            <li>Ø¨Ø¹Ø¶ Ø§Ù„ÙØ­ÙˆØµØ§Øª ØªØªØ·Ù„Ø¨ ØµÙŠØ§Ù…Ø§Ù‹ Ù…Ø³Ø¨Ù‚Ø§Ù‹</li>
                            <li>ÙŠØ¬Ø¨ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø­Ø¬Ø² Ù‚Ø¨Ù„ 24 Ø³Ø§Ø¹Ø© Ø¥Ø°Ø§ ØªØ¹Ø°Ø± Ø§Ù„Ø­Ø¶ÙˆØ±</li>
                        </ul>
                    </div>
                </div>

                <div class="step-actions">
                    <button class="btn btn-secondary prev-step" data-prev="3">
                        <i class="fas fa-arrow-right"></i> Ø§Ù„Ø³Ø§Ø¨Ù‚
                    </button>
                    <button class="btn btn-primary confirm-booking" id="confirmBooking">
                        <i class="fas fa-check-circle"></i>
                        ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø² ÙˆØ§Ù„Ø¯ÙØ¹
                    </button>
                </div>
            </div>
        </div>

        <!-- Ù†ÙˆØ§ÙØ° Ù…Ù†Ø¨Ø«Ù‚Ø© -->
        
        <!-- Ù†Ø§ÙØ°Ø© ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø² -->
        <div id="confirmationModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">ØªÙ… Ø§Ù„Ø­Ø¬Ø² Ø¨Ù†Ø¬Ø§Ø­</div>
                    <button class="close-modal" onclick="closeModal('confirmationModal')">Ã—</button>
                </div>
                
                <div class="confirmation-content">
                    <div class="success-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h3>ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯Ùƒ ÙÙŠ Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰</h3>
                    <p>Ø³Ù†Ø±Ø³Ù„ Ù„Ùƒ Ø±Ø³Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯ Ø¨Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø¹Ù„Ù‰ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆØ±Ù‚Ù… Ù‡Ø§ØªÙÙƒ</p>
                    
                    <div class="appointment-details">
                        <div class="detail-item">
                            <span class="detail-label">Ø±Ù‚Ù… Ø§Ù„Ø­Ø¬Ø²:</span>
                            <span class="detail-value" id="finalAppointmentNumber">HOS-2024-001</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰:</span>
                            <span class="detail-value" id="finalHospitalName">---</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª:</span>
                            <span class="detail-value" id="finalAppointmentTime">---</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Ø§Ù„Ø®Ø¯Ù…Ø§Øª:</span>
                            <span class="detail-value" id="finalServices">---</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Ø§Ù„Ù…Ø¨Ù„Øº:</span>
                            <span class="detail-value" id="finalAmount">--- Ø±.ÙŠ</span>
                        </div>
                    </div>

                    <div class="reminder-notice">
                        <i class="fas fa-bell"></i>
                        <span>Ø³ÙŠØªÙ… ØªØ°ÙƒÙŠØ±Ùƒ Ù‚Ø¨Ù„ Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø¨Ù€ 24 Ø³Ø§Ø¹Ø© Ùˆ 2 Ø³Ø§Ø¹Ø©</span>
                    </div>

                    <div class="preparation-notice">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span>ÙŠØ±Ø¬Ù‰ Ù‚Ø±Ø§Ø¡Ø© ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„ØªØ­Ø¶ÙŠØ± Ù„Ù„ÙØ­Øµ Ù‚Ø¨Ù„ Ø§Ù„Ù…ÙˆØ¹Ø¯</span>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button class="btn btn-primary" onclick="closeModal('confirmationModal'); window.location.href='index.html'">
                        <i class="fas fa-home"></i>
                        Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                    </button>
                    <button class="btn btn-secondary" onclick="closeModal('confirmationModal')">
                        <i class="fas fa-print"></i>
                        Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙØ§ØµÙŠÙ„
                    </button>
                </div>
            </div>
        </div>

        <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø³ÙÙ„ÙŠ -->
        <div class="bottom-nav-premium">
            <a href="index.html" class="nav-item-premium">
                <div class="nav-icon-premium">
                    <i class="fas fa-home"></i>
                </div>
                <div class="nav-label">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
            </a>
            <a href="consultation.html" class="nav-item-premium">
                <div class="nav-icon-premium">
                    <i class="fas fa-stethoscope"></i>
                </div>
                <div class="nav-label">Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø§Øª</div>
            </a>
            <a href="doctor-appointment.html" class="nav-item-premium">
                <div class="nav-icon-premium">
                    <i class="fas fa-user-md"></i>
                </div>
                <div class="nav-label">Ø­Ø¬Ø² Ø¯ÙƒØªÙˆØ±</div>
            </a>
            <a href="hospital-appointment.html" class="nav-item-premium active">
                <div class="nav-icon-premium">
                    <i class="fas fa-hospital"></i>
                </div>
                <div class="nav-label">Ø­Ø¬Ø² Ù…Ø³ØªØ´ÙÙ‰</div>
            </a>
            <a href="profile.html" class="nav-item-premium">
                <div class="nav-icon-premium">
                    <i class="fas fa-user"></i>
                </div>
                <div class="nav-label">Ø­Ø³Ø§Ø¨ÙŠ</div>
            </a>
        </div>
    </div>

    <script>
// Ù†Ø¸Ø§Ù… Ø­Ø¬Ø² Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„
class HospitalAppointmentSystem {
    constructor() {
        this.services = [];
        this.hospitals = [];
        this.radiologyServices = [];
        this.labServices = [];
        this.otherServices = [];
        this.userHospitalAppointments = JSON.parse(localStorage.getItem('userHospitalAppointments')) || [];
        this.currentAppointment = {
            hospital: null,
            date: null,
            time: null,
            serviceType: 'radiology',
            selectedServices: [],
            additionalDetails: '',
            specialAssistance: 'no',
            paymentMethod: 'wallet'
        };
        this.currentStep = 1;
        this.currentMonth = new Date();
        this.init();
    }

    init() {
        this.loadServices();
        this.loadHospitals();
        this.loadServiceOptions();
        this.setupEventListeners();
        this.updateTime();
        this.loadUserData();
        this.initializeCalendar();
        setInterval(() => this.updateTime(), 60000);
    }

    setupEventListeners() {
        // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
        const hospitalSearch = document.getElementById('hospitalSearch');
        if (hospitalSearch) {
            hospitalSearch.addEventListener('input', (e) => {
                this.handleSearch(e.target.value);
            });
        }

        // Ø§Ù„ÙÙ„Ø§ØªØ±
        const cityFilter = document.getElementById('cityFilter');
        if (cityFilter) {
            cityFilter.addEventListener('change', () => {
                this.applyFilters();
            });
        }

        const specialtyFilter = document.getElementById('specialtyFilter');
        if (specialtyFilter) {
            specialtyFilter.addEventListener('change', () => {
                this.applyFilters();
            });
        }

        // Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø®Ø·ÙˆØ§Øª
        document.querySelectorAll('.next-step').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const nextStep = parseInt(e.target.closest('.next-step').dataset.next);
                this.goToStep(nextStep);
            });
        });

        document.querySelectorAll('.prev-step').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const prevStep = parseInt(e.target.closest('.prev-step').dataset.prev);
                this.goToStep(prevStep);
            });
        });

        // Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø®Ø¯Ù…Ø§Øª
        document.querySelectorAll('.service-type-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                this.selectServiceType(e.currentTarget.dataset.type);
            });
        });

        // Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø®Ø¯Ù…Ø§Øª
        document.querySelectorAll('.service-checkbox input').forEach(checkbox => {
            checkbox.addEventListener('change', (e) => {
                this.toggleService(e.target);
            });
        });

        // Ø·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹
        document.querySelectorAll('.payment-method').forEach(method => {
            method.addEventListener('click', (e) => {
                this.selectPaymentMethod(e.currentTarget.dataset.method);
            });
        });

        // ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø²
        const confirmBooking = document.getElementById('confirmBooking');
        if (confirmBooking) {
            confirmBooking.addEventListener('click', () => {
                this.confirmBooking();
            });
        }

        // Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„Ø®Ø§ØµØ©
        document.querySelectorAll('input[name="specialAssistance"]').forEach(radio => {
            radio.addEventListener('change', (e) => {
                this.currentAppointment.specialAssistance = e.target.value;
            });
        });

        // Ø§Ù„ØªÙ†Ù‚Ù„ ÙÙŠ Ø§Ù„ØªÙ‚ÙˆÙŠÙ…
        const prevMonth = document.querySelector('.prev-month');
        const nextMonth = document.querySelector('.next-month');
        
        if (prevMonth) {
            prevMonth.addEventListener('click', () => {
                this.navigateMonth(-1);
            });
        }
        
        if (nextMonth) {
            nextMonth.addEventListener('click', () => {
                this.navigateMonth(1);
            });
        }

        // Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©
        const additionalDetails = document.getElementById('additionalDetails');
        if (additionalDetails) {
            additionalDetails.addEventListener('input', (e) => {
                this.currentAppointment.additionalDetails = e.target.value;
            });
        }
    }

    loadUserData() {
        this.userAccount = JSON.parse(localStorage.getItem('financialAccount'));
        this.userWallets = JSON.parse(localStorage.getItem('linkedWallets')) || [];
        this.userCards = JSON.parse(localStorage.getItem('linkedCards')) || [];
    }

    loadServices() {
        this.services = [
            {
                id: 1,
                name: 'Ø§Ù„Ø£Ø´Ø¹Ø©',
                icon: 'fa-x-ray',
                hospitalCount: 35,
                color: '#3b82f6',
                description: 'Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ÙØ­ÙˆØµØ§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø¹ÙŠØ©'
            },
            {
                id: 2,
                name: 'Ø§Ù„Ù…Ø®ØªØ¨Ø±',
                icon: 'fa-flask',
                hospitalCount: 42,
                color: '#10b981',
                description: 'Ø§Ù„ØªØ­Ø§Ù„ÙŠÙ„ ÙˆØ§Ù„ÙØ­ÙˆØµØ§Øª Ø§Ù„Ù…Ø®Ø¨Ø±ÙŠØ©'
            },
            {
                id: 3,
                name: 'Ø§Ù„Ø¬Ø±Ø§Ø­Ø©',
                icon: 'fa-syringe',
                hospitalCount: 28,
                color: '#ef4444',
                description: 'Ø¹Ù…Ù„ÙŠØ§Øª Ø¬Ø±Ø§Ø­ÙŠØ© ÙˆØªØ´Ø®ÙŠØµÙŠØ©'
            },
            {
                id: 4,
                name: 'Ø§Ù„Ø¨Ø§Ø·Ù†ÙŠØ©',
                icon: 'fa-stethoscope',
                hospitalCount: 38,
                color: '#8b5cf6',
                description: 'ÙØ­ÙˆØµØ§Øª Ø§Ù„Ø£Ù…Ø±Ø§Ø¶ Ø§Ù„Ø¨Ø§Ø·Ù†ÙŠØ©'
            },
            {
                id: 5,
                name: 'Ø§Ù„Ø¹ÙŠÙˆÙ†',
                icon: 'fa-eye',
                hospitalCount: 22,
                color: '#06b6d4',
                description: 'ÙØ­ÙˆØµØ§Øª Ø§Ù„Ø¹ÙŠÙˆÙ† ÙˆØ§Ù„Ù†Ø¸Ø±'
            },
            {
                id: 6,
                name: 'Ø§Ù„Ù‚Ù„Ø¨',
                icon: 'fa-heartbeat',
                hospitalCount: 25,
                color: '#ec4899',
                description: 'ÙØ­ÙˆØµØ§Øª Ø§Ù„Ù‚Ù„Ø¨ ÙˆØ§Ù„Ø´Ø±Ø§ÙŠÙŠÙ†'
            }
        ];
        this.renderServices();
    }

    loadHospitals() {
        this.hospitals = [
            {
                id: 1,
                name: 'Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ø«ÙˆØ±Ø©',
                city: 'sanaa',
                specialties: ['radiology', 'lab', 'surgery'],
                rating: 4.7,
                ratingCount: 245,
                address: 'Ø´Ø§Ø±Ø¹ Ø§Ù„Ø²Ø¨ÙŠØ±ÙŠØŒ ØµÙ†Ø¹Ø§Ø¡',
                phone: '017234567',
                image: 'ğŸ¥',
                features: ['Ø£Ø´Ø¹Ø© Ù…ØªÙ‚Ø¯Ù…Ø©', 'Ù…Ø®ØªØ¨Ø± Ù…Ø±ÙƒØ²ÙŠ', 'Ø·ÙˆØ§Ø±Ø¦ 24/7'],
                availableSlots: this.generateTimeSlots(true),
                services: {
                    radiology: ['xray-chest', 'xray-bones', 'ct-scan', 'mri', 'ultrasound'],
                    lab: ['blood-test', 'sugar-test', 'cholesterol', 'liver-test', 'kidney-test', 'urine-test'],
                    other: ['ecg', 'echo']
                }
            },
            {
                id: 2,
                name: 'Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ø³Ø¨Ø¹ÙŠÙ†',
                city: 'sanaa',
                specialties: ['radiology', 'lab', 'internal'],
                rating: 4.5,
                ratingCount: 189,
                address: 'Ø­ÙŠ Ø§Ù„Ø³Ø¨Ø¹ÙŠÙ†ØŒ ØµÙ†Ø¹Ø§Ø¡',
                phone: '017234568',
                image: 'ğŸ¥',
                features: ['Ø£Ø´Ø¹Ø© Ø±Ù‚Ù…ÙŠØ©', 'Ù…Ø®ØªØ¨Ø± Ø­Ø¯ÙŠØ«', 'Ø¹Ù†Ø§ÙŠØ© Ù…Ø±ÙƒØ²Ø©'],
                availableSlots: this.generateTimeSlots(false),
                services: {
                    radiology: ['xray-chest', 'xray-bones', 'ultrasound', 'mammogram'],
                    lab: ['blood-test', 'sugar-test', 'cholesterol', 'urine-test'],
                    other: ['ecg']
                }
            },
            {
                id: 3,
                name: 'Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ø¬Ù…Ù‡ÙˆØ±ÙŠØ©',
                city: 'aden',
                specialties: ['radiology', 'lab', 'surgery'],
                rating: 4.6,
                ratingCount: 176,
                address: 'ÙƒØ±ÙŠØªØ±ØŒ Ø¹Ø¯Ù†',
                phone: '027234569',
                image: 'ğŸ¥',
                features: ['Ø£Ø´Ø¹Ø© Ù…Ù‚Ø·Ø¹ÙŠØ©', 'Ø¬Ø±Ø§Ø­Ø© Ù…ØªÙ‚Ø¯Ù…Ø©', 'Ø·ÙˆØ§Ø±Ø¦'],
                availableSlots: this.generateTimeSlots(true),
                services: {
                    radiology: ['xray-chest', 'ct-scan', 'mri', 'ultrasound'],
                    lab: ['blood-test', 'liver-test', 'kidney-test'],
                    other: ['ecg', 'echo', 'endoscopy']
                }
            },
            {
                id: 4,
                name: 'Ù…Ø³ØªØ´ÙÙ‰ Ø§Ø¨Ù† Ø®Ù„Ø¯ÙˆÙ†',
                city: 'taiz',
                specialties: ['radiology', 'lab'],
                rating: 4.4,
                ratingCount: 132,
                address: 'Ø´Ø§Ø±Ø¹ 26 Ø³Ø¨ØªÙ…Ø¨Ø±ØŒ ØªØ¹Ø²',
                phone: '047234570',
                image: 'ğŸ¥',
                features: ['Ø£Ø´Ø¹Ø© Ø´Ø§Ù…Ù„Ø©', 'Ù…Ø®ØªØ¨Ø± Ù…ØªÙƒØ§Ù…Ù„', 'Ø®Ø¯Ù…Ø§Øª ØªØ´Ø®ÙŠØµÙŠØ©'],
                availableSlots: this.generateTimeSlots(false),
                services: {
                    radiology: ['xray-chest', 'xray-bones', 'ultrasound'],
                    lab: ['blood-test', 'sugar-test', 'cholesterol', 'urine-test'],
                    other: ['ecg']
                }
            },
            {
                id: 5,
                name: 'Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ø£Ø­Ù…Ø±',
                city: 'hodeidah',
                specialties: ['radiology', 'lab', 'internal'],
                rating: 4.3,
                ratingCount: 98,
                address: 'Ø§Ù„Ø´Ø§Ø±Ø¹ Ø§Ù„Ø¬Ø¯ÙŠØ¯ØŒ Ø§Ù„Ø­Ø¯ÙŠØ¯Ø©',
                phone: '037234571',
                image: 'ğŸ¥',
                features: ['Ø£Ø´Ø¹Ø© Ù…ØªÙ†Ù‚Ù„Ø©', 'Ù…Ø®ØªØ¨Ø± Ø³Ø±ÙŠØ¹', 'Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø·ÙˆØ§Ø±Ø¦'],
                availableSlots: this.generateTimeSlots(true),
                services: {
                    radiology: ['xray-chest', 'ultrasound'],
                    lab: ['blood-test', 'sugar-test', 'urine-test'],
                    other: []
                }
            },
            {
                id: 6,
                name: 'Ù…Ø³ØªØ´ÙÙ‰ Ø¥Ø¨ Ø§Ù„ØªØ®ØµØµÙŠ',
                city: 'ibb',
                specialties: ['radiology', 'lab'],
                rating: 4.5,
                ratingCount: 87,
                address: 'Ø­ÙŠ Ø§Ù„Ù…ØµÙŠÙ†Ø¹Ø©ØŒ Ø¥Ø¨',
                phone: '057234572',
                image: 'ğŸ¥',
                features: ['Ø£Ø´Ø¹Ø© Ø¯Ù‚ÙŠÙ‚Ø©', 'Ù…Ø®ØªØ¨Ø± Ù…ØªØ·ÙˆØ±', 'Ø®Ø¯Ù…Ø§Øª ÙˆÙ‚Ø§Ø¦ÙŠØ©'],
                availableSlots: this.generateTimeSlots(false),
                services: {
                    radiology: ['xray-chest', 'xray-bones', 'mammogram'],
                    lab: ['blood-test', 'sugar-test', 'cholesterol', 'liver-test'],
                    other: ['ecg']
                }
            }
        ];
        this.renderHospitals();
    }

    loadServiceOptions() {
        // Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø£Ø´Ø¹Ø©
        this.radiologyServices = [
            { id: 'xray-chest', name: 'Ø£Ø´Ø¹Ø© Ø§Ù„ØµØ¯Ø±', price: 80, duration: 30 },
            { id: 'xray-bones', name: 'Ø£Ø´Ø¹Ø© Ø§Ù„Ø¹Ø¸Ø§Ù…', price: 120, duration: 45 },
            { id: 'ct-scan', name: 'Ø§Ù„Ø£Ø´Ø¹Ø© Ø§Ù„Ù…Ù‚Ø·Ø¹ÙŠØ©', price: 350, duration: 60 },
            { id: 'mri', name: 'Ø§Ù„Ø±Ù†ÙŠÙ† Ø§Ù„Ù…ØºÙ†Ø§Ø·ÙŠØ³ÙŠ', price: 600, duration: 90 },
            { id: 'ultrasound', name: 'Ø§Ù„Ù…ÙˆØ¬Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ©', price: 150, duration: 40 },
            { id: 'mammogram', name: 'Ø£Ø´Ø¹Ø© Ø§Ù„Ø«Ø¯ÙŠ', price: 200, duration: 50 }
        ];

        // Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ø®ØªØ¨Ø±
        this.labServices = [
            { id: 'blood-test', name: 'ÙØ­Øµ Ø§Ù„Ø¯Ù… Ø§Ù„Ø´Ø§Ù…Ù„', price: 50, duration: 15 },
            { id: 'sugar-test', name: 'ÙØ­Øµ Ø§Ù„Ø³ÙƒØ±', price: 30, duration: 10 },
            { id: 'cholesterol', name: 'ÙØ­Øµ Ø§Ù„ÙƒÙˆÙ„ÙŠØ³ØªØ±ÙˆÙ„', price: 40, duration: 10 },
            { id: 'liver-test', name: 'ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ÙƒØ¨Ø¯', price: 70, duration: 20 },
            { id: 'kidney-test', name: 'ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ÙƒÙ„Ù‰', price: 60, duration: 20 },
            { id: 'urine-test', name: 'ÙØ­Øµ Ø§Ù„Ø¨ÙˆÙ„', price: 25, duration: 10 }
        ];

        // Ø®Ø¯Ù…Ø§Øª Ø£Ø®Ø±Ù‰
        this.otherServices = [
            { id: 'ecg', name: 'Ø±Ø³Ù… Ø§Ù„Ù‚Ù„Ø¨', price: 100, duration: 25 },
            { id: 'echo', name: 'Ø¥ÙŠÙƒÙˆ Ø§Ù„Ù‚Ù„Ø¨', price: 250, duration: 45 },
            { id: 'endoscopy', name: 'Ù…Ù†Ø¸Ø§Ø± Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ù‡Ø¶Ù…ÙŠ', price: 400, duration: 60 }
        ];
    }

    generateTimeSlots(isAvailableNow) {
        const slots = [];
        const now = new Date();
        
        if (isAvailableNow) {
            // Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„ÙŠÙˆÙ…
            for (let i = 1; i <= 6; i++) {
                const slotTime = new Date(now);
                slotTime.setHours(8 + i * 2); // Ù…Ù† 10 ØµØ¨Ø§Ø­Ø§Ù‹
                slotTime.setMinutes(0);
                
                if (slotTime > now) {
                    slots.push({
                        time: slotTime.toTimeString().slice(0, 5),
                        display: slotTime.toLocaleTimeString('ar-EG', { 
                            hour: '2-digit', 
                            minute: '2-digit',
                            hour12: true 
                        }),
                        available: true
                    });
                }
            }
        } else {
            // Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹
            const days = ['Ø§Ù„Ø£Ø­Ø¯', 'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø¬Ù…Ø¹Ø©'];
            for (let i = 1; i <= 3; i++) {
                const slotDate = new Date(now);
                slotDate.setDate(now.getDate() + i);
                
                for (let j = 0; j < 4; j++) {
                    const slotTime = new Date(slotDate);
                    slotTime.setHours(9 + j * 2);
                    slotTime.setMinutes(0);
                    
                    slots.push({
                        time: slotTime.toISOString(),
                        display: `${days[slotDate.getDay()]} - ${slotTime.toLocaleTimeString('ar-EG', { 
                            hour: '2-digit', 
                            minute: '2-digit',
                            hour12: true 
                        })}`,
                        available: true
                    });
                }
            }
        }

        return slots;
    }

    renderServices() {
        const container = document.getElementById('servicesGrid');
        if (!container) return;

        container.innerHTML = '';

        this.services.forEach(service => {
            const serviceElement = document.createElement('div');
            serviceElement.className = 'service-card';
            serviceElement.onclick = () => this.filterByService(service.id);
            serviceElement.title = service.description;
            
            serviceElement.innerHTML = `
                <div class="service-icon" style="background: ${service.color}">
                    <i class="fas ${service.icon}"></i>
                </div>
                <div class="service-name">${service.name}</div>
                <div class="service-count">${service.hospitalCount} Ù…Ø³ØªØ´ÙÙ‰</div>
            `;
            
            container.appendChild(serviceElement);
        });
    }

    renderHospitals(filteredHospitals = null) {
        const container = document.getElementById('hospitalsGrid');
        if (!container) return;

        const hospitalsToShow = filteredHospitals || this.hospitals;

        if (hospitalsToShow.length === 0) {
            container.innerHTML = `
                <div style="text-align: center; padding: 40px; color: var(--text-secondary);">
                    <i class="fas fa-hospital" style="font-size: 48px; margin-bottom: 16px;"></i>
                    <div>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</div>
                    <p style="font-size: 14px; margin-top: 8px;">Ø¬Ø±Ø¨ ØªØºÙŠÙŠØ± Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¨Ø­Ø«</p>
                </div>
            `;
            return;
        }

        container.innerHTML = '';

        hospitalsToShow.forEach(hospital => {
            const hospitalElement = document.createElement('div');
            hospitalElement.className = `hospital-card ${this.currentAppointment.hospital?.id === hospital.id ? 'selected' : ''}`;
            hospitalElement.onclick = () => this.selectHospital(hospital);
            
            const stars = this.generateStars(hospital.rating);
            const cityText = this.getCityText(hospital.city);
            
            hospitalElement.innerHTML = `
                <div class="hospital-avatar">
                    ${hospital.image}
                </div>
                <div class="hospital-info">
                    <div class="hospital-name">${hospital.name}</div>
                    <div class="hospital-address">${hospital.address}</div>
                    <div class="hospital-rating">
                        <div class="stars">${stars}</div>
                        <div class="rating-value">${hospital.rating}</div>
                        <div class="rating-count">(${hospital.ratingCount})</div>
                    </div>
                    <div class="hospital-features">
                        ${hospital.features.map(feature => `<span class="feature-tag">${feature}</span>`).join('')}
                    </div>
                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 8px;">
                        <i class="fas fa-map-marker-alt"></i>
                        ${cityText}
                    </div>
                </div>
                <div class="hospital-actions">
                    <button class="select-btn" onclick="event.stopPropagation(); hospitalSystem.selectHospital(${hospital.id})">
                        <i class="fas fa-calendar-check"></i>
                        Ø§Ø®ØªØ±
                    </button>
                </div>
            `;
            
            container.appendChild(hospitalElement);
        });
    }

    getCityText(city) {
        const cities = {
            'sanaa': 'ØµÙ†Ø¹Ø§Ø¡',
            'aden': 'Ø¹Ø¯Ù†',
            'taiz': 'ØªØ¹Ø²',
            'hodeidah': 'Ø§Ù„Ø­Ø¯ÙŠØ¯Ø©',
            'ibb': 'Ø¥Ø¨'
        };
        return cities[city] || city;
    }

    generateStars(rating) {
        const fullStars = Math.floor(rating);
        const halfStar = rating % 1 >= 0.5;
        const emptyStars = 5 - fullStars - (halfStar ? 1 : 0);
        
        let stars = '';
        
        for (let i = 0; i < fullStars; i++) {
            stars += '<i class="fas fa-star"></i>';
        }
        
        if (halfStar) {
            stars += '<i class="fas fa-star-half-alt"></i>';
        }
        
        for (let i = 0; i < emptyStars; i++) {
            stars += '<i class="far fa-star"></i>';
        }
        
        return stars;
    }

    selectHospital(hospital) {
        if (typeof hospital === 'number') {
            hospital = this.hospitals.find(h => h.id === hospital);
        }

        if (!hospital) {
            this.showNotification('Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯', 'error');
            return;
        }

        this.currentAppointment.hospital = hospital;
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
        document.querySelectorAll('.hospital-card').forEach(card => {
            card.classList.remove('selected');
        });
        
        event.target.closest('.hospital-card').classList.add('selected');
        
        // ØªÙØ¹ÙŠÙ„ Ø²Ø± Ø§Ù„ØªØ§Ù„ÙŠ
        document.querySelector('.next-step[data-next="2"]').disabled = false;
        
        this.showNotification(`ØªÙ… Ø§Ø®ØªÙŠØ§Ø± ${hospital.name}`, 'success');
    }

    handleSearch(query) {
        if (query.length >= 2) {
            const filteredHospitals = this.hospitals.filter(hospital => 
                hospital.name.includes(query) || 
                hospital.address.includes(query) ||
                hospital.features.some(feature => feature.includes(query))
            );
            this.renderHospitals(filteredHospitals);
        } else if (query.length === 0) {
            this.renderHospitals();
        }
    }

    applyFilters() {
        const city = document.getElementById('cityFilter').value;
        const specialty = document.getElementById('specialtyFilter').value;
        
        let filteredHospitals = this.hospitals;
        
        if (city) {
            filteredHospitals = filteredHospitals.filter(hospital => 
                hospital.city === city
            );
        }
        
        if (specialty) {
            filteredHospitals = filteredHospitals.filter(hospital => 
                hospital.specialties.includes(specialty)
            );
        }
        
        this.renderHospitals(filteredHospitals);
    }

    filterByService(serviceId) {
        const service = this.services.find(s => s.id === serviceId);
        if (!service) return;

        const filteredHospitals = this.hospitals.filter(hospital => 
            hospital.specialties.some(specialty => 
                specialty === service.name.toLowerCase()
            )
        );
        
        this.renderHospitals(filteredHospitals);
        
        // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù†Ø´Ø·Ø©
        document.querySelectorAll('.service-card').forEach(card => {
            card.classList.remove('active');
        });
        event.target.closest('.service-card').classList.add('active');
        
        this.showNotification(`ØªÙ… Ø¹Ø±Ø¶ Ù…Ø³ØªØ´ÙÙŠØ§Øª ${service.name}`, 'info');
    }

    goToStep(step) {
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‚Ø¨Ù„ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„
        if (step > this.currentStep) {
            if (!this.validateStep(this.currentStep)) {
                this.showNotification('ÙŠØ±Ø¬Ù‰ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©', 'error');
                return;
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ø·ÙˆØ§Øª
        document.querySelectorAll('.step').forEach(stepElement => {
            stepElement.classList.remove('active');
            if (parseInt(stepElement.dataset.step) <= step) {
                stepElement.classList.add('completed');
            }
        });
        
        document.querySelector(`.step[data-step="${step}"]`).classList.add('active');

        // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª
        document.querySelectorAll('.step-content').forEach(content => {
            content.classList.remove('active');
        });

        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
        document.getElementById(`step${step}`).classList.add('active');

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±
        if (step === 2) {
            this.updateSelectedHospitalInfo();
            this.generateTimeSlotsForHospital();
        } else if (step === 3) {
            this.updateAppointmentSummary();
            this.updateAvailableServices();
        } else if (step === 4) {
            this.updatePaymentSummary();
            this.loadPaymentMethods();
        }

        this.currentStep = step;
        
        // Scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    validateStep(step) {
        switch (step) {
            case 1:
                return !!this.currentAppointment.hospital;
            case 2:
                return !!this.currentAppointment.date && !!this.currentAppointment.time;
            case 3:
                return this.currentAppointment.selectedServices.length > 0;
            default:
                return true;
        }
    }

    updateSelectedHospitalInfo() {
        if (!this.currentAppointment.hospital) return;

        const hospital = this.currentAppointment.hospital;
        
        document.getElementById('selectedHospitalAvatar').textContent = hospital.image;
        document.getElementById('selectedHospitalName').textContent = hospital.name;
        document.getElementById('selectedHospitalAddress').textContent = hospital.address;
        document.getElementById('selectedHospitalStars').innerHTML = this.generateStars(hospital.rating);
        document.getElementById('selectedHospitalRating').textContent = hospital.rating;
    }

    initializeCalendar() {
        this.renderCalendar();
    }

    renderCalendar() {
        const calendarGrid = document.getElementById('calendarGrid');
        if (!calendarGrid) return;

        const monthNames = [
            'ÙŠÙ†Ø§ÙŠØ±', 'ÙØ¨Ø±Ø§ÙŠØ±', 'Ù…Ø§Ø±Ø³', 'Ø£Ø¨Ø±ÙŠÙ„', 'Ù…Ø§ÙŠÙˆ', 'ÙŠÙˆÙ†ÙŠÙˆ',
            'ÙŠÙˆÙ„ÙŠÙˆ', 'Ø£ØºØ³Ø·Ø³', 'Ø³Ø¨ØªÙ…Ø¨Ø±', 'Ø£ÙƒØªÙˆØ¨Ø±', 'Ù†ÙˆÙÙ…Ø¨Ø±', 'Ø¯ÙŠØ³Ù…Ø¨Ø±'
        ];

        const year = this.currentMonth.getFullYear();
        const month = this.currentMonth.getMonth();
        
        document.getElementById('currentMonth').textContent = `${monthNames[month]} ${year}`;

        // Ø±Ø¤ÙˆØ³ Ø§Ù„Ø£ÙŠØ§Ù…
        const dayHeaders = ['Ø£Ø­', 'Ø¥Ø«', 'Ø«', 'Ø£Ø±', 'Ø®', 'Ø¬', 'Ø³'];
        let calendarHTML = '';

        // Ø¥Ø¶Ø§ÙØ© Ø±Ø¤ÙˆØ³ Ø§Ù„Ø£ÙŠØ§Ù…
        dayHeaders.forEach(day => {
            calendarHTML += `<div class="calendar-day-header">${day}</div>`;
        });

        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£ÙˆÙ„ ÙŠÙˆÙ… ÙÙŠ Ø§Ù„Ø´Ù‡Ø±
        const firstDay = new Date(year, month, 1);
        const startingDay = firstDay.getDay(); // 0 = Ø§Ù„Ø£Ø­Ø¯, 1 = Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†, etc.

        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… ÙÙŠ Ø§Ù„Ø´Ù‡Ø±
        const daysInMonth = new Date(year, month + 1, 0).getDate();

        // Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„ÙØ§Ø±ØºØ© Ù‚Ø¨Ù„ Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø´Ù‡Ø±
        for (let i = 0; i < startingDay; i++) {
            calendarHTML += `<div class="calendar-day disabled"></div>`;
        }

        // Ø£ÙŠØ§Ù… Ø§Ù„Ø´Ù‡Ø±
        const today = new Date();
        today.setHours(0, 0, 0, 0);

        for (let day = 1; day <= daysInMonth; day++) {
            const currentDate = new Date(year, month, day);
            const isToday = currentDate.getTime() === today.getTime();
            const isSelected = this.currentAppointment.date && 
                              currentDate.toDateString() === new Date(this.currentAppointment.date).toDateString();
            const isPast = currentDate < today;
            const isAvailable = !isPast && currentDate.getDay() !== 5; // Ù„Ø§ ØªØ¸Ù‡Ø± Ø§Ù„Ø¬Ù…Ø¹Ø©

            let dayClass = 'calendar-day';
            if (isToday) dayClass += ' today';
            if (isSelected) dayClass += ' selected';
            if (!isAvailable) dayClass += ' disabled';

            calendarHTML += `
                <div class="${dayClass}" data-date="${currentDate.toISOString()}" 
                     onclick="${isAvailable ? 'hospitalSystem.selectDate(this.dataset.date)' : ''}">
                    ${day}
                </div>
            `;
        }

        calendarGrid.innerHTML = calendarHTML;
    }

    navigateMonth(direction) {
        this.currentMonth.setMonth(this.currentMonth.getMonth() + direction);
        this.renderCalendar();
    }

    selectDate(dateString) {
        this.currentAppointment.date = dateString;
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
        document.querySelectorAll('.calendar-day').forEach(day => {
            day.classList.remove('selected');
        });
        
        event.target.classList.add('selected');
        
        // ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø­Ø©
        this.generateTimeSlotsForHospital();
        
        this.showNotification('ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªØ§Ø±ÙŠØ®', 'success');
    }

    generateTimeSlotsForHospital() {
        if (!this.currentAppointment.hospital || !this.currentAppointment.date) return;

        const timeSlotsGrid = document.getElementById('timeSlotsGrid');
        if (!timeSlotsGrid) return;

        const hospital = this.currentAppointment.hospital;
        let timeSlotsHTML = '';

        hospital.availableSlots.forEach(slot => {
            const isSelected = this.currentAppointment.time === slot.time;
            const slotClass = `time-slot ${isSelected ? 'selected' : ''}`;
            
            timeSlotsHTML += `
                <div class="${slotClass}" data-time="${slot.time}" 
                     onclick="hospitalSystem.selectTime('${slot.time}')">
                    ${slot.display}
                </div>
            `;
        });

        timeSlotsGrid.innerHTML = timeSlotsHTML;
        
        // ØªÙØ¹ÙŠÙ„ Ø²Ø± Ø§Ù„ØªØ§Ù„ÙŠ
        document.querySelector('.next-step[data-next="3"]').disabled = false;
    }

    selectTime(time) {
        this.currentAppointment.time = time;
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
        document.querySelectorAll('.time-slot').forEach(slot => {
            slot.classList.remove('selected');
        });
        
        event.target.classList.add('selected');
        
        this.showNotification('ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙˆÙ‚Øª', 'success');
    }

    selectServiceType(serviceType) {
        this.currentAppointment.serviceType = serviceType;
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
        document.querySelectorAll('.service-type-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        
        event.target.classList.add('active');
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©
        document.querySelectorAll('.service-options-section').forEach(section => {
            section.classList.remove('active');
        });
        
        document.getElementById(`${serviceType}Options`).classList.add('active');
        
        this.showNotification(`ØªÙ… Ø§Ø®ØªÙŠØ§Ø± ${this.getServiceTypeName(serviceType)}`, 'success');
    }

    getServiceTypeName(serviceType) {
        const names = {
            'radiology': 'Ø§Ù„Ø£Ø´Ø¹Ø©',
            'lab': 'Ø§Ù„ÙØ­ÙˆØµØ§Øª',
            'other': 'Ø®Ø¯Ù…Ø§Øª Ø£Ø®Ø±Ù‰'
        };
        return names[serviceType] || serviceType;
    }

    updateAvailableServices() {
        if (!this.currentAppointment.hospital) return;

        const hospital = this.currentAppointment.hospital;
        
        // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø§Øª ØºÙŠØ± Ø§Ù„Ù…ØªØ§Ø­Ø© ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰
        document.querySelectorAll('.service-checkbox input').forEach(checkbox => {
            const serviceId = checkbox.id;
            const isAvailable = hospital.services[this.currentAppointment.serviceType]?.includes(serviceId);
            
            checkbox.disabled = !isAvailable;
            checkbox.checked = false;
            
            const label = checkbox.nextElementSibling;
            if (!isAvailable) {
                label.style.opacity = '0.5';
                label.style.cursor = 'not-allowed';
            } else {
                label.style.opacity = '1';
                label.style.cursor = 'pointer';
            }
        });

        // Ù…Ø³Ø­ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ø³Ø§Ø¨Ù‚Ø§Ù‹
        this.currentAppointment.selectedServices = [];
        this.updateSelectedServicesSummary();
    }

    toggleService(checkbox) {
        const serviceId = checkbox.id;
        const service = this.getServiceById(serviceId);
        
        if (!service) return;

        if (checkbox.checked) {
            this.currentAppointment.selectedServices.push(service);
        } else {
            this.currentAppointment.selectedServices = this.currentAppointment.selectedServices.filter(
                s => s.id !== serviceId
            );
        }

        this.updateSelectedServicesSummary();
    }

    getServiceById(serviceId) {
        const allServices = [...this.radiologyServices, ...this.labServices, ...this.otherServices];
        return allServices.find(service => service.id === serviceId);
    }

    updateSelectedServicesSummary() {
        const container = document.getElementById('selectedServicesList');
        const totalCostElement = document.getElementById('totalCost');
        const totalDurationElement = document.getElementById('totalDuration');

        if (this.currentAppointment.selectedServices.length === 0) {
            container.innerHTML = '<div class="no-services">Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø£ÙŠ Ø®Ø¯Ù…Ø§Øª</div>';
            totalCostElement.textContent = '0 Ø±.ÙŠ';
            totalDurationElement.textContent = '0 Ø¯Ù‚ÙŠÙ‚Ø©';
            return;
        }

        let totalCost = 0;
        let totalDuration = 0;
        let servicesHTML = '';

        this.currentAppointment.selectedServices.forEach(service => {
            totalCost += service.price;
            totalDuration += service.duration;
            
            servicesHTML += `
                <div class="service-item">
                    <span class="service-item-name">${service.name}</span>
                    <span class="service-item-price">${service.price} Ø±.ÙŠ</span>
                </div>
            `;
        });

        container.innerHTML = servicesHTML;
        totalCostElement.textContent = `${totalCost} Ø±.ÙŠ`;
        totalDurationElement.textContent = `${totalDuration} Ø¯Ù‚ÙŠÙ‚Ø©`;
    }

    updateAppointmentSummary() {
        if (!this.currentAppointment.hospital || !this.currentAppointment.date || !this.currentAppointment.time) return;

        const hospital = this.currentAppointment.hospital;
        const date = new Date(this.currentAppointment.date);
        const time = this.currentAppointment.time;

        const formattedDate = date.toLocaleDateString('ar-EG', {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });

        const formattedTime = new Date(`2000-01-01T${time}`).toLocaleTimeString('ar-EG', {
            hour: '2-digit',
            minute: '2-digit',
            hour12: true
        });

        document.getElementById('summaryHospital').textContent = hospital.name;
        document.getElementById('summaryDate').textContent = formattedDate;
        document.getElementById('summaryTime').textContent = formattedTime;
    }

    updatePaymentSummary() {
        if (!this.currentAppointment.hospital || !this.currentAppointment.date || !this.currentAppointment.time) return;

        const hospital = this.currentAppointment.hospital;
        const date = new Date(this.currentAppointment.date);
        const time = this.currentAppointment.time;

        const formattedDateTime = date.toLocaleDateString('ar-EG', {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit',
            hour12: true
        });

        const totalCost = this.currentAppointment.selectedServices.reduce((sum, service) => sum + service.price, 0);

        document.getElementById('paymentHospital').textContent = hospital.name;
        document.getElementById('paymentDateTime').textContent = formattedDateTime;
        document.getElementById('paymentServiceType').textContent = this.getServiceTypeName(this.currentAppointment.serviceType);
        document.getElementById('paymentAmount').textContent = totalCost + ' Ø±.ÙŠ';

        // ØªØ­Ø¯ÙŠØ« ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø§Øª
        const servicesList = document.getElementById('paymentServicesList');
        servicesList.innerHTML = '';

        this.currentAppointment.selectedServices.forEach(service => {
            servicesList.innerHTML += `
                <div class="service-breakdown-item">
                    <span>${service.name}</span>
                    <span>${service.price} Ø±.ÙŠ</span>
                </div>
            `;
        });

        // ØªØ­Ø¯ÙŠØ« Ø±Ù‚Ù… Ø§Ù„Ø­Ø¬Ø²
        const appointmentNumber = 'HOS-' + new Date().getFullYear() + '-' + String(this.userHospitalAppointments.length + 1).padStart(3, '0');
        document.getElementById('appointmentNumber').textContent = appointmentNumber;
    }

    selectPaymentMethod(method) {
        this.currentAppointment.paymentMethod = method;
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
        document.querySelectorAll('.payment-method').forEach(m => {
            m.classList.remove('active');
        });
        
        event.target.closest('.payment-method').classList.add('active');
        
        // Ø¥Ø¸Ù‡Ø§Ø± ØªÙØ§ØµÙŠÙ„ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©
        document.querySelectorAll('.payment-details').forEach(details => {
            details.style.display = 'none';
        });
        
        document.getElementById(`${method}Payment`).style.display = 'block';
    }

    loadPaymentMethods() {
        this.loadUserData();
        
        const walletSelect = document.getElementById('selectedWallet');
        const cardSelect = document.getElementById('selectedCard');
        
        walletSelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­ÙØ¸Ø©</option>';
        cardSelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©</option>';
        
        this.userWallets.forEach(wallet => {
            walletSelect.innerHTML += `<option value="${wallet.id}">${wallet.name} - ${wallet.balance} Ø±.ÙŠ</option>`;
        });
        
        this.userCards.forEach(card => {
            cardSelect.innerHTML += `<option value="${card.id}">${card.processor} - ${card.lastFour}</option>`;
        });

        // ØªØ­Ø¯ÙŠØ« Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø­ÙØ¸Ø©
        const walletBalance = document.getElementById('walletBalance');
        if (walletBalance && this.userAccount) {
            walletBalance.textContent = this.userAccount.balance + ' Ø±.ÙŠ';
        }

        // Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù‡Ù†Ø§Ùƒ Ù…Ø­Ø§ÙØ¸ Ø£Ùˆ Ø¨Ø·Ø§Ù‚Ø§ØªØŒ Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø©
        if (this.userWallets.length === 0 && this.userCards.length === 0) {
            document.getElementById('selectedWallet').innerHTML = '<option value="">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø­Ø§ÙØ¸ Ù…Ø±ØªØ¨Ø·Ø©</option>';
        }
    }

    async confirmBooking() {
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        if (!this.validateStep(4)) {
            this.showNotification('ÙŠØ±Ø¬Ù‰ Ø¥ÙƒÙ…Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©', 'error');
            return;
        }

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹
        if (this.currentAppointment.paymentMethod === 'wallet') {
            const selectedWallet = document.getElementById('selectedWallet').value;
            if (!selectedWallet) {
                this.showNotification('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø­ÙØ¸Ø©', 'error');
                return;
            }

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±ØµÙŠØ¯
            const totalCost = this.currentAppointment.selectedServices.reduce((sum, service) => sum + service.price, 0);
            if (this.userAccount.balance < totalCost) {
                this.showNotification('Ø±ØµÙŠØ¯Ùƒ ØºÙŠØ± ÙƒØ§ÙÙŠØŒ ÙŠØ±Ø¬Ù‰ Ø´Ø­Ù† Ø§Ù„Ø­Ø³Ø§Ø¨', 'error');
                setTimeout(() => {
                    window.location.href = 'financial.html';
                }, 2000);
                return;
            }
        } else if (this.currentAppointment.paymentMethod === 'card') {
            const selectedCard = document.getElementById('selectedCard').value;
            if (!selectedCard) {
                this.showNotification('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©', 'error');
                return;
            }
        }

        this.showNotification('Ø¬Ø§Ø±ÙŠ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø²...', 'info');

        try {
            const paymentResult = await this.processPayment();
            
            if (paymentResult.success) {
                this.finalizeAppointment(paymentResult);
            } else {
                this.showNotification(paymentResult.message, 'error');
            }
        } catch (error) {
            this.showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©', 'error');
        }
    }

    async processPayment() {
        const totalCost = this.currentAppointment.selectedServices.reduce((sum, service) => sum + service.price, 0);
        
        return new Promise((resolve) => {
            setTimeout(() => {
                const success = Math.random() > 0.1; // 90% success rate
                
                if (success) {
                    resolve({
                        success: true,
                        transactionId: 'TXN' + Date.now(),
                        amount: totalCost,
                        method: this.currentAppointment.paymentMethod
                    });
                } else {
                    resolve({
                        success: false,
                        message: 'ÙØ´Ù„ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¯ÙØ¹. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰'
                    });
                }
            }, 2000);
        });
    }

    finalizeAppointment(paymentResult) {
        const totalCost = this.currentAppointment.selectedServices.reduce((sum, service) => sum + service.price, 0);
        const totalDuration = this.currentAppointment.selectedServices.reduce((sum, service) => sum + service.duration, 0);

        const appointment = {
            id: Date.now(),
            number: document.getElementById('appointmentNumber').textContent,
            hospital: this.currentAppointment.hospital,
            date: this.currentAppointment.date,
            time: this.currentAppointment.time,
            serviceType: this.currentAppointment.serviceType,
            selectedServices: this.currentAppointment.selectedServices,
            additionalDetails: this.currentAppointment.additionalDetails,
            specialAssistance: this.currentAppointment.specialAssistance,
            status: 'confirmed',
            createdAt: new Date().toISOString(),
            totalCost: totalCost,
            totalDuration: totalDuration,
            payment: paymentResult,
            reminderSent: false
        };
        
        // ØªØ­Ø¯ÙŠØ« Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¯ÙØ¹ Ù…Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©
        if (this.currentAppointment.paymentMethod === 'wallet' && this.userAccount) {
            this.userAccount.balance -= totalCost;
            localStorage.setItem('financialAccount', JSON.stringify(this.userAccount));
        }
        
        // Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø³Ø¬Ù„ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯
        this.userHospitalAppointments.unshift(appointment);
        localStorage.setItem('userHospitalAppointments', JSON.stringify(this.userHospitalAppointments));
        
        // Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¯ÙØ¹ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
        if (this.currentAppointment.paymentMethod !== 'cash') {
            this.addToTransactionHistory(appointment, paymentResult);
        }
        
        this.showNotification(`ØªÙ… Ø§Ù„Ø­Ø¬Ø² Ø¨Ù†Ø¬Ø§Ø­: ${totalCost} Ø±.ÙŠ`, 'success');
        
        // Ø¹Ø±Ø¶ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø²
        this.showConfirmationModal(appointment);
    }

    addToTransactionHistory(appointment, paymentResult) {
        const transactions = JSON.parse(localStorage.getItem('financialTransactions')) || [];
        
        const transaction = {
            id: paymentResult.transactionId,
            type: 'hospital',
            title: `Ù…ÙˆØ¹Ø¯ Ù…Ø³ØªØ´ÙÙ‰ - ${appointment.hospital.name}`,
            description: `${this.getServiceTypeName(appointment.serviceType)} - ${appointment.selectedServices.length} Ø®Ø¯Ù…Ø©`,
            amount: -appointment.totalCost,
            ref: appointment.number,
            date: new Date().toLocaleDateString('ar-EG'),
            time: new Date().toLocaleTimeString('ar-EG'),
            status: 'completed',
            icon: 'icon-hospital',
            method: paymentResult.method,
            hospital: appointment.hospital.name
        };
        
        transactions.unshift(transaction);
        localStorage.setItem('financialTransactions', JSON.stringify(transactions));
    }

    showConfirmationModal(appointment) {
        document.getElementById('finalAppointmentNumber').textContent = appointment.number;
        document.getElementById('finalHospitalName').textContent = appointment.hospital.name;
        
        const dateTime = new Date(appointment.date + 'T' + appointment.time);
        const formattedDateTime = dateTime.toLocaleDateString('ar-EG', { 
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit',
            hour12: true
        });
        
        document.getElementById('finalAppointmentTime').textContent = formattedDateTime;
        document.getElementById('finalAmount').textContent = appointment.totalCost + ' Ø±.ÙŠ';
        
        const servicesText = appointment.selectedServices.map(service => service.name).join('ØŒ ');
        document.getElementById('finalServices').textContent = servicesText;
        
        openModal('confirmationModal');
    }

    showNotification(message, type = 'info') {
        // Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø³Ø§Ø¨Ù‚Ø©
        const existingNotifications = document.querySelectorAll('.notification');
        existingNotifications.forEach(notification => {
            if (notification.parentNode) {
                notification.parentNode.removeChild(notification);
            }
        });

        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        notification.innerHTML = `
            <i class="fas ${type === 'success' ? 'fa-check-circle' : type === 'error' ? 'fa-exclamation-circle' : 'fa-info-circle'}"></i>
            ${message}
        `;
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
            if (notification.parentNode) {
                notification.parentNode.removeChild(notification);
            }
        }, 4000);
    }

    updateTime() {
        const now = new Date();
        const timeString = now.toLocaleTimeString('ar-EG', { 
            hour: '2-digit', 
            minute: '2-digit',
            hour12: true 
        });
        
        const timeElement = document.getElementById('currentTime');
        if (timeElement) {
            timeElement.textContent = timeString;
        }
    }
}

// ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¹Ø§Ù…Ø©
function openModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
        modal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
    }
}

function closeModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
        modal.style.display = 'none';
        document.body.style.overflow = 'auto';
    }
}

// Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø¨Ø§Ù„Ø¶ØºØ· Ø®Ø§Ø±Ø¬Ù‡Ø§
document.addEventListener('click', function(event) {
    if (event.target.classList.contains('modal')) {
        event.target.style.display = 'none';
        document.body.style.overflow = 'auto';
    }
});

// Ù…Ù†Ø¹ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬
document.addEventListener('DOMContentLoaded', function() {
    const forms = document.querySelectorAll('form');
    forms.forEach(form => {
        form.addEventListener('submit', function(e) {
            e.preventDefault();
        });
    });
});

// ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
document.addEventListener('DOMContentLoaded', function() {
    window.hospitalSystem = new HospitalAppointmentSystem();
    
    // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ±Ø§Øª ØªØ­Ù…ÙŠÙ„ Ø£ÙˆÙ„ÙŠØ©
    setTimeout(() => {
        if (window.hospitalSystem) {
            window.hospitalSystem.showNotification('Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù†Ø¸Ø§Ù… Ø­Ø¬Ø² Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰!', 'success');
        }
    }, 1000);
});

// Ø¬Ø¹Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… Ù…ØªØ§Ø­Ø§Ù‹ globally
window.HospitalAppointmentSystem = HospitalAppointmentSystem;
</script>
</body>
</html>
