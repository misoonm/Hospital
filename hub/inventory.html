<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PharmaHub - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Almarai:wght@400;700;800&family=Tajawal:wght@300;400;500;700;800;900&display=swap" rel="stylesheet">
    <style>
:root {
    /* Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© */
    --primary: #00897B;
    --primary-dark: #00695C;
    --primary-light: #B2DFDB;
    --secondary: #FFB300;
    --accent: #FF5252;
    --success: #4CAF50;
    --warning: #FF9800;
    --info: #2196F3;
    --danger: #F44336;

    /* Ø®Ù„ÙÙŠØ© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ */
    --bg-light: #E0F2F1;
    --bg-surface: #ffffff;
    --shadow-light: -6px -6px 12px rgba(255, 255, 255, 0.9), 6px 6px 12px rgba(0, 0, 0, 0.1);
    --shadow-inset: inset 3px 3px 6px rgba(0, 0, 0, 0.1), inset -3px -3px 6px rgba(255, 255, 255, 0.9);
    --shadow-card: 0 10px 30px rgba(0, 0, 0, 0.15);
    --text-primary: #1E293B;
    --text-secondary: #475569;

    /* Ø§Ù„Ø²ÙˆØ§ÙŠØ§ ÙˆØ§Ù„Ø§Ù†ØªÙ‚Ø§Ù„Ø§Øª */
    --radius-xl: 30px;
    --radius-lg: 20px;
    --radius-md: 16px;
    --radius-sm: 12px;
    --transition-liquid: all 0.35s cubic-bezier(0.25, 0.8, 0.25, 1);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Tajawal', sans-serif;
    -webkit-tap-highlight-color: transparent;
}

body {
    background: var(--bg-light);
    color: var(--text-primary);
    direction: rtl;
    overflow-x: hidden;
    min-height: 100vh;
}

/* Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
.ultra-app {
    max-width: 450px;
    min-height: 100vh;
    margin: 0 auto;
    background: var(--bg-light);
    position: relative;
    box-shadow: 0 0 40px rgba(0, 0, 0, 0.05);
    overflow-x: hidden;
    padding-bottom: 100px;
}

/* Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© */
.status-bar {
    background: transparent;
    color: var(--text-primary);
    padding: 10px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 14px;
    font-weight: 500;
    z-index: 1000;
}

/* Ø§Ù„Ù‡ÙŠØ¯Ø± */
.app-header {
    padding: 24px 20px 0;
}

.header-top {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
}

.title-section h1 {
    font-family: 'Almarai', sans-serif;
    font-size: 26px;
    font-weight: 800;
    color: var(--primary-dark);
    margin-bottom: 4px;
}

.title-section p {
    font-size: 14px;
    color: var(--text-secondary);
}

.product-actions {
    display: flex;
    gap: 10px;
}

.action-icon {
    background: var(--bg-light);
    box-shadow: var(--shadow-light);
    border: none;
    width: 48px;
    height: 48px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary);
    cursor: pointer;
    transition: var(--transition-liquid);
    position: relative;
    font-size: 18px;
}

.action-icon:active {
    box-shadow: var(--shadow-inset);
    color: var(--primary-dark);
}

/* Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« */
.search-bar {
    background: var(--bg-light);
    box-shadow: var(--shadow-inset);
    padding: 12px 20px;
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 16px;
}

.search-input {
    flex: 1;
    border: none;
    background: transparent;
    font-size: 16px;
    color: var(--text-primary);
    outline: none;
    padding: 0;
}

.search-icon {
    color: var(--text-secondary);
}

/* Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø© */
.stats-bar {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
    margin-bottom: 20px;
}

.stat-item {
    text-align: center;
    padding: 16px 8px;
    background: var(--bg-light);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-light);
    transition: var(--transition-liquid);
    cursor: pointer;
}

.stat-item:hover {
    box-shadow: var(--shadow-inset);
    transform: scale(0.98);
}

.stat-item.active {
    background: var(--primary);
    color: white;
}

.stat-item.active .stat-value,
.stat-item.active .stat-label {
    color: white;
}

.stat-value {
    font-family: 'Almarai', sans-serif;
    font-size: 18px;
    font-weight: 800;
    color: var(--primary-dark);
    margin-bottom: 4px;
}

.stat-label {
    font-size: 11px;
    opacity: 0.8;
}

/* Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª */
.categories-section {
    padding: 0 20px;
    margin-bottom: 20px;
}

.categories-scroll {
    display: flex;
    gap: 10px;
    overflow-x: auto;
    scrollbar-width: none;
}

.categories-scroll::-webkit-scrollbar {
    display: none;
}

.category-chip {
    padding: 12px 20px;
    background: var(--bg-light);
    box-shadow: var(--shadow-light);
    border-radius: var(--radius-lg);
    font-weight: 600;
    color: var(--text-secondary);
    cursor: pointer;
    transition: var(--transition-liquid);
    white-space: nowrap;
    display: flex;
    align-items: center;
    gap: 8px;
    border: 1px solid transparent;
}

.category-chip.active {
    background: var(--primary);
    color: white;
    box-shadow: var(--shadow-inset);
    transform: scale(0.95);
    border-color: var(--primary-dark);
}

.category-chip:hover {
    box-shadow: var(--shadow-inset);
}

/* Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø®Ø²ÙˆÙ† */
.inventory-dashboard {
    padding: 0 20px;
}

/* Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„ØªØ­Ù„ÙŠÙ„ */
.analytics-cards {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
    margin-bottom: 20px;
}

.analytics-card {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
    padding: 20px;
    display: flex;
    align-items: center;
    gap: 16px;
    transition: var(--transition-liquid);
}

.analytics-card:hover {
    box-shadow: var(--shadow-inset);
    transform: translateY(-2px);
}

.analytics-icon {
    width: 50px;
    height: 50px;
    background: var(--primary);
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 20px;
    box-shadow: var(--shadow-card);
}

.analytics-content {
    flex: 1;
}

.analytics-value {
    font-family: 'Almarai', sans-serif;
    font-size: 18px;
    font-weight: 800;
    color: var(--primary-dark);
    margin-bottom: 4px;
}

.analytics-label {
    font-size: 12px;
    color: var(--text-secondary);
}

/* Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª */
.toolbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding: 16px;
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
}

.view-options {
    display: flex;
    gap: 8px;
}

.view-option {
    background: var(--bg-light);
    box-shadow: var(--shadow-light);
    border: none;
    width: 40px;
    height: 40px;
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
    cursor: pointer;
    transition: var(--transition-liquid);
}

.view-option.active {
    background: var(--primary);
    color: white;
    box-shadow: var(--shadow-inset);
}

.view-option:hover {
    box-shadow: var(--shadow-inset);
}

.sort-options select {
    background: var(--bg-light);
    box-shadow: var(--shadow-light);
    border: none;
    padding: 10px 16px;
    border-radius: var(--radius-md);
    color: var(--text-primary);
    font-size: 14px;
    cursor: pointer;
    outline: none;
    transition: var(--transition-liquid);
}

.sort-options select:focus {
    box-shadow: var(--shadow-inset);
}

/* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† */
.inventory-container {
    margin-bottom: 20px;
}

/* Ø´Ø¨ÙƒØ© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† */
.inventory-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
}

.inventory-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

/* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† (Ø´Ø¨ÙƒØ©) */
.inventory-card-grid {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
    transition: var(--transition-liquid);
    cursor: pointer;
    overflow: hidden;
    position: relative;
}

.inventory-card-grid:hover {
    box-shadow: var(--shadow-inset);
    transform: translateY(-2px);
}

.inventory-image {
    width: 100%;
    height: 120px;
    background: var(--primary-light);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 32px;
    color: var(--primary-dark);
    position: relative;
}

.inventory-badge {
    position: absolute;
    top: 10px;
    left: 10px;
    background: var(--accent);
    color: white;
    padding: 4px 8px;
    border-radius: var(--radius-sm);
    font-size: 10px;
    font-weight: 700;
}

.inventory-badge.stock {
    background: var(--success);
}

.inventory-badge.low-stock {
    background: var(--warning);
}

.inventory-badge.out-of-stock {
    background: var(--danger);
}

.inventory-badge.expiring {
    background: var(--danger);
}

.inventory-content {
    padding: 16px;
}

.inventory-name {
    font-family: 'Almarai', sans-serif;
    font-size: 14px;
    font-weight: 700;
    margin-bottom: 8px;
    height: 40px;
    overflow: hidden;
    line-height: 1.4;
}

.inventory-meta {
    font-size: 11px;
    color: var(--text-secondary);
    margin-bottom: 8px;
}

.inventory-stock {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
}

.current-stock {
    font-weight: 800;
    font-size: 16px;
    color: var(--primary-dark);
}

.stock-indicator {
    width: 8px;
    height: 8px;
    border-radius: 50%;
}

.stock-indicator.high {
    background: var(--success);
}

.stock-indicator.low {
    background: var(--warning);
}

.stock-indicator.out {
    background: var(--danger);
}

.inventory-actions-grid {
    display: flex;
    gap: 8px;
    margin-top: 12px;
}

/* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† (Ù‚Ø§Ø¦Ù…Ø©) */
.inventory-card-list {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
    transition: var(--transition-liquid);
    cursor: pointer;
    padding: 16px;
    display: flex;
    align-items: center;
    gap: 16px;
}

.inventory-card-list:hover {
    box-shadow: var(--shadow-inset);
}

.inventory-image-list {
    width: 60px;
    height: 60px;
    background: var(--primary-light);
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    color: var(--primary-dark);
    flex-shrink: 0;
}

.inventory-details-list {
    flex: 1;
}

.inventory-name-list {
    font-family: 'Almarai', sans-serif;
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 4px;
}

.inventory-meta-list {
    font-size: 12px;
    color: var(--text-secondary);
    margin-bottom: 4px;
}

.inventory-stock-list {
    font-weight: 700;
    color: var(--primary-dark);
    font-size: 14px;
}

.inventory-status-list {
    font-size: 11px;
    color: var(--text-secondary);
}

/* Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ø§Ø¦Ù… */
.floating-action-btn {
    position: fixed;
    bottom: 100px;
    left: 30px;
    background: var(--primary);
    color: white;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    border: none;
    box-shadow: var(--shadow-card);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    cursor: pointer;
    transition: var(--transition-liquid);
    z-index: 1000;
}

.floating-action-btn:hover {
    transform: scale(1.1);
    box-shadow: 0 8px 25px rgba(0, 137, 123, 0.4);
}

.floating-action-btn:active {
    transform: scale(0.95);
}

/* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø³ÙÙ„ÙŠ */
.bottom-nav-dock {
    position: fixed;
    bottom: 25px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--bg-light);
    box-shadow: var(--shadow-light);
    display: flex;
    padding: 8px 10px;
    border-radius: var(--radius-xl);
    z-index: 1000;
    max-width: 360px;
    width: calc(100% - 40px);
    border: 1px solid rgba(255, 255, 255, 0.5);
}

.nav-item-dock {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 8px 0;
    border-radius: var(--radius-md);
    transition: var(--transition-liquid);
    flex: 1;
    position: relative;
    text-decoration: none;
    color: var(--text-secondary);
}

.nav-item-dock.active {
    color: var(--primary-dark);
}

.nav-item-dock.active .nav-icon-dock {
    background: var(--primary);
    color: white;
    box-shadow: 0 4px 15px rgba(0, 137, 123, 0.5);
    width: 44px;
    height: 44px;
    border-radius: 50%;
    transform: translateY(-10px);
    transition: var(--transition-liquid);
}

.nav-icon-dock {
    font-size: 20px;
    margin-bottom: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 44px;
    height: 44px;
    transition: var(--transition-liquid);
}

.nav-label {
    font-size: 10px;
    font-weight: 600;
    margin-top: 4px;
    transition: var(--transition-liquid);
}

.nav-item-dock.active .nav-label {
    font-weight: 800;
    color: var(--primary-dark);
}

/* Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.2);
    backdrop-filter: blur(10px);
    transition: opacity 0.3s ease-out;
    z-index: 2000;
}

.modal-content {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.4);
    box-shadow: var(--shadow-card);
    animation: modalSlideUp 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    border-radius: var(--radius-xl) var(--radius-xl) 0 0;
    max-height: 85vh;
    overflow-y: auto;
}

.modal-content.large-modal {
    max-height: 90vh;
}

.modal-content.small-modal {
    max-width: 300px;
    margin: 0 auto;
    top: 50%;
    bottom: auto;
    transform: translateY(-50%);
    border-radius: var(--radius-xl);
}

@keyframes modalSlideUp {
    from {opacity: 0; transform: translateY(100%);}
    to {opacity: 1; transform: translateY(0);}
}

.modal-header {
    background: var(--primary);
    color: white;
    padding: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-radius: var(--radius-xl) var(--radius-xl) 0 0;
    position: sticky;
    top: 0;
    z-index: 10;
}

.modal-header h2 {
    margin: 0;
    font-size: 20px;
}

.close {
    font-size: 24px;
    cursor: pointer;
}

.modal-body {
    padding: 20px;
}

/* Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† */
.inventory-form {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.form-section {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    padding: 20px;
    box-shadow: var(--shadow-light);
}

.form-section h3 {
    margin-bottom: 16px;
    color: var(--primary-dark);
    font-size: 18px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.form-section h3::before {
    content: '';
    width: 4px;
    height: 20px;
    background: var(--primary);
    border-radius: 2px;
}

.form-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.form-group label {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 14px;
}

.form-group input,
.form-group select,
.form-group textarea {
    background: var(--bg-surface);
    border: 1px solid var(--primary-light);
    border-radius: var(--radius-md);
    padding: 12px 16px;
    font-size: 14px;
    color: var(--text-primary);
    transition: var(--transition-liquid);
    outline: none;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(0, 137, 123, 0.1);
}

.form-group textarea {
    resize: vertical;
    min-height: 80px;
}

.form-actions {
    display: flex;
    gap: 12px;
    justify-content: flex-end;
    padding-top: 20px;
    border-top: 1px solid var(--primary-light);
}

/* Ø£Ø²Ø±Ø§Ø± */
.btn-neumorphism {
    padding: 12px 24px;
    border: none;
    border-radius: var(--radius-md);
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-liquid);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-size: 14px;
    background: var(--bg-light);
    box-shadow: var(--shadow-light);
    color: var(--primary);
}

.btn-neumorphism:active {
    box-shadow: var(--shadow-inset);
    transform: scale(0.95);
}

.btn-primary-neumorphism {
    background: var(--primary);
    box-shadow: 0 4px 15px rgba(0, 137, 123, 0.4);
    color: white;
}

.btn-primary-neumorphism:active {
    box-shadow: var(--shadow-inset);
    background: var(--primary-dark);
}

.btn-secondary-neumorphism {
    background: var(--secondary);
    box-shadow: 0 4px 15px rgba(255, 179, 0, 0.4);
    color: white;
}

.btn-secondary-neumorphism:active {
    box-shadow: var(--shadow-inset);
    background: #E6A200;
}

.btn-danger-neumorphism {
    background: var(--danger);
    box-shadow: 0 4px 15px rgba(244, 67, 54, 0.4);
    color: white;
}

.btn-danger-neumorphism:active {
    box-shadow: var(--shadow-inset);
    background: #D32F2F;
}

/* ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† */
.inventory-details-tabs {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.tabs-header {
    display: flex;
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    padding: 8px;
    box-shadow: var(--shadow-light);
}

.tab-btn {
    flex: 1;
    background: none;
    border: none;
    padding: 12px 16px;
    border-radius: var(--radius-md);
    font-weight: 600;
    color: var(--text-secondary);
    cursor: pointer;
    transition: var(--transition-liquid);
}

.tab-btn.active {
    background: var(--primary);
    color: white;
    box-shadow: var(--shadow-inset);
}

.tab-btn:hover {
    background: var(--primary-light);
    color: var(--primary-dark);
}

.tabs-content {
    min-height: 400px;
}

.tab-pane {
    display: none;
}

.tab-pane.active {
    display: block;
}

/* Ø§Ù„Ù†Ø¸Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„Ù…Ø®Ø²ÙˆÙ† */
.inventory-overview {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.inventory-header {
    display: flex;
    align-items: center;
    gap: 20px;
    padding: 20px;
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
}

.inventory-image-large {
    width: 80px;
    height: 80px;
    background: var(--primary);
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 32px;
    color: white;
    box-shadow: var(--shadow-card);
}

.inventory-info {
    flex: 1;
}

.inventory-info h3 {
    font-size: 22px;
    margin-bottom: 8px;
    color: var(--text-primary);
}

.inventory-meta {
    display: flex;
    gap: 16px;
    margin-bottom: 12px;
    flex-wrap: wrap;
}

.inventory-meta span {
    background: var(--primary-light);
    color: var(--primary-dark);
    padding: 4px 12px;
    border-radius: var(--radius-sm);
    font-size: 12px;
    font-weight: 600;
}

.inventory-status {
    display: flex;
    gap: 8px;
}

.status-badge,
.stock-badge {
    padding: 6px 12px;
    border-radius: var(--radius-sm);
    font-size: 12px;
    font-weight: 700;
}

.status-badge.active {
    background: var(--success);
    color: white;
}

.status-badge.inactive {
    background: var(--danger);
    color: white;
}

.stock-badge.high {
    background: var(--success);
    color: white;
}

.stock-badge.low {
    background: var(--warning);
    color: white;
}

.stock-badge.out {
    background: var(--danger);
    color: white;
}

.inventory-specs-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
}

.spec-card {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
    padding: 20px;
    display: flex;
    align-items: center;
    gap: 12px;
    transition: var(--transition-liquid);
}

.spec-card:hover {
    box-shadow: var(--shadow-inset);
}

.spec-icon {
    width: 40px;
    height: 40px;
    background: var(--primary-light);
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary-dark);
    font-size: 16px;
}

.spec-info {
    flex: 1;
}

.spec-value {
    font-family: 'Almarai', sans-serif;
    font-size: 18px;
    font-weight: 800;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.spec-label {
    font-size: 12px;
    color: var(--text-secondary);
}

.inventory-details-section {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    padding: 20px;
    box-shadow: var(--shadow-light);
}

.inventory-details-section h4 {
    margin-bottom: 12px;
    color: var(--primary-dark);
    font-size: 16px;
}

.technical-specs {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
}

.technical-spec {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.spec-name {
    font-size: 12px;
    color: var(--text-secondary);
}

.spec-value {
    font-weight: 600;
    color: var(--text-primary);
}

.quick-actions {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
}

/* Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† */
.inventory-movement {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.movement-filters {
    display: flex;
    gap: 16px;
    background: var(--bg-light);
    padding: 16px;
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
}

.movement-filters .filter-group {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.movement-filters label {
    font-weight: 600;
    font-size: 14px;
}

.movement-list {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
    overflow: hidden;
}

.movement-header {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr 1.5fr 1fr;
    gap: 12px;
    padding: 16px;
    background: var(--primary);
    color: white;
    font-weight: 600;
    font-size: 12px;
}

.movement-items {
    max-height: 300px;
    overflow-y: auto;
}

.movement-item {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr 1.5fr 1fr;
    gap: 12px;
    padding: 12px 16px;
    border-bottom: 1px solid var(--primary-light);
    font-size: 12px;
}

.movement-item:last-child {
    border-bottom: none;
}

.movement-type.in {
    color: var(--success);
    font-weight: 600;
}

.movement-type.out {
    color: var(--danger);
    font-weight: 600;
}

/* ØªØ­Ù„ÙŠÙ„Ø§Øª Ø§Ù„Ù…Ø®Ø²ÙˆÙ† */
.inventory-analytics {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.analytics-stats {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
}

.analytics-stat {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
    padding: 20px;
    text-align: center;
    transition: var(--transition-liquid);
}

.analytics-stat:hover {
    box-shadow: var(--shadow-inset);
}

.analytics-stat .stat-value {
    font-size: 20px;
    margin-bottom: 8px;
}

.analytics-stat .stat-label {
    font-size: 12px;
}

.analytics-charts {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
}

.chart-container {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    padding: 20px;
    box-shadow: var(--shadow-light);
}

.chart-container h4 {
    margin-bottom: 16px;
    color: var(--primary-dark);
}

.chart-placeholder {
    height: 150px;
    background: var(--bg-surface);
    border-radius: var(--radius-md);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
    gap: 12px;
}

.chart-placeholder i {
    font-size: 48px;
    color: var(--primary-light);
}

/* ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù…Ø®Ø²ÙˆÙ† */
.inventory-alerts {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.alert-cards {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.alert-card {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
    padding: 20px;
    display: flex;
    align-items: flex-start;
    gap: 16px;
    transition: var(--transition-liquid);
    border-right: 4px solid transparent;
}

.alert-card.warning {
    border-right-color: var(--warning);
}

.alert-card.danger {
    border-right-color: var(--danger);
}

.alert-card.info {
    border-right-color: var(--info);
}

.alert-card:hover {
    box-shadow: var(--shadow-inset);
}

.alert-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    color: white;
    flex-shrink: 0;
}

.alert-card.warning .alert-icon {
    background: var(--warning);
}

.alert-card.danger .alert-icon {
    background: var(--danger);
}

.alert-card.info .alert-icon {
    background: var(--info);
}

.alert-content {
    flex: 1;
}

.alert-content h4 {
    margin-bottom: 8px;
    color: var(--text-primary);
}

.alert-content p {
    font-size: 14px;
    color: var(--text-secondary);
    margin-bottom: 12px;
}

.alert-actions {
    display: flex;
    gap: 8px;
}

/* Ø£Ù‚Ø¯Ø§Ù… Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª */
.inventory-actions-footer {
    display: flex;
    gap: 12px;
    padding-top: 20px;
    border-top: 1px solid var(--primary-light);
    flex-wrap: wrap;
}

.inventory-actions-footer .btn-neumorphism {
    flex: 1;
    min-width: 120px;
}

/* Ø§Ù„ÙÙ„ØªØ±Ø© */
.filter-section {
    padding: 20px;
}

.filter-group {
    margin-bottom: 24px;
}

.filter-title {
    font-weight: 700;
    margin-bottom: 12px;
    color: var(--text-primary);
    font-size: 16px;
}

.filter-options {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.filter-option {
    display: flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
}

.filter-option input {
    margin: 0;
}

.stock-range {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.stock-inputs {
    display: flex;
    gap: 12px;
}

.stock-input {
    flex: 1;
    padding: 12px 16px;
    border: 1px solid var(--primary-light);
    border-radius: var(--radius-md);
    background: var(--bg-light);
    font-size: 14px;
}

.filter-actions {
    display: flex;
    gap: 12px;
    margin-top: 24px;
}

/* Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
.loading-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
    padding: 40px 20px;
}

.loading-spinner {
    width: 40px;
    height: 40px;
    border: 4px solid var(--primary-light);
    border-top: 4px solid var(--primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø²ÙŠØ¯ */
.load-more-section {
    display: flex;
    justify-content: center;
    padding: 20px;
}

/* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø³ÙˆØ§Ø¦Ù„ */
.liquid-transition {
    transition: var(--transition-liquid);
}

/* Ø§Ù„ØªØ¬Ø§ÙˆØ¨ */
@media (max-width: 480px) {
    .stats-bar {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .analytics-cards {
        grid-template-columns: 1fr;
    }
    
    .inventory-grid {
        grid-template-columns: 1fr;
    }
    
    .form-grid {
        grid-template-columns: 1fr;
    }
    
    .analytics-stats,
    .analytics-charts {
        grid-template-columns: 1fr;
    }
    
    .movement-filters {
        flex-direction: column;
    }
    
    .movement-header,
    .movement-item {
        grid-template-columns: 1fr 1fr;
        gap: 8px;
    }
    
    .inventory-actions-footer {
        flex-direction: column;
    }
    
    .inventory-actions-footer .btn-neumorphism {
        min-width: auto;
    }
    
    .quick-actions {
        flex-direction: column;
    }
}
</style>
</head>
<body>
    <div class="ultra-app">
        <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© -->
        <div class="status-bar">
            <div class="status-left">
                <span id="currentTime">--:--</span>
            </div>
            <div class="status-right">
                <i class="fas fa-signal"></i>
                <i class="fas fa-wifi"></i>
                <i class="fas fa-battery-full"></i>
            </div>
        </div>

        <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
        <div class="app-header">
            <div class="header-top">
                <div class="title-section">
                    <h1>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† ğŸ“¦</h1>
                    <p>Ù…Ø±Ø§Ù‚Ø¨Ø© ÙˆØ¥Ø¯Ø§Ø±Ø© Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø£Ø¯ÙˆÙŠØ© ÙˆØ§Ù„Ù…Ø³ØªØ­Ø¶Ø±Ø§Øª</p>
                </div>
                <div class="product-actions">
                    <button class="action-icon liquid-transition" id="searchToggleBtn">
                        <i class="fas fa-search"></i>
                    </button>
                    <button class="action-icon liquid-transition" id="filterBtn">
                        <i class="fas fa-filter"></i>
                    </button>
                    <button class="action-icon liquid-transition" id="addInventoryBtn">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </div>

            <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« -->
            <div class="search-bar" id="searchBar" style="display: none;">
                <i class="fas fa-search search-icon"></i>
                <input type="text" class="search-input" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬ØŒ ÙƒÙˆØ¯ØŒ Ø£Ùˆ ØªØµÙ†ÙŠÙ..." id="searchInput">
                <button class="action-icon liquid-transition" onclick="inventory.toggleSearch()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø© -->
            <div class="stats-bar">
                <div class="stat-item liquid-transition" onclick="inventory.filterByStatus('all')">
                    <div class="stat-value" id="totalItems">0</div>
                    <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</div>
                </div>
                <div class="stat-item liquid-transition" onclick="inventory.filterByStatus('low_stock')">
                    <div class="stat-value" id="lowStockItems">0</div>
                    <div class="stat-label">Ù…Ù†Ø®ÙØ¶ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</div>
                </div>
                <div class="stat-item liquid-transition" onclick="inventory.filterByStatus('out_of_stock')">
                    <div class="stat-value" id="outOfStockItems">0</div>
                    <div class="stat-label">ØºÙŠØ± Ù…ØªÙˆÙØ±</div>
                </div>
                <div class="stat-item liquid-transition" onclick="inventory.filterByStatus('expiring')">
                    <div class="stat-value" id="expiringItems">0</div>
                    <div class="stat-label">Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©</div>
                </div>
            </div>
        </div>

        <!-- Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª -->
        <div class="categories-section">
            <div class="categories-scroll" id="categoriesScroll">
                <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
            </div>
        </div>

        <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù…Ø®Ø²ÙˆÙ† -->
        <div class="inventory-dashboard">
            <!-- Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„ØªØ­Ù„ÙŠÙ„ -->
            <div class="analytics-cards">
                <div class="analytics-card">
                    <div class="analytics-icon">
                        <i class="fas fa-boxes"></i>
                    </div>
                    <div class="analytics-content">
                        <div class="analytics-value" id="totalInventoryValue">0 Ø±.Ø³</div>
                        <div class="analytics-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</div>
                    </div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-icon">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <div class="analytics-content">
                        <div class="analytics-value" id="monthlySales">0</div>
                        <div class="analytics-label">Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø´Ù‡Ø±</div>
                    </div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-icon">
                        <i class="fas fa-exchange-alt"></i>
                    </div>
                    <div class="analytics-content">
                        <div class="analytics-value" id="turnoverRate">0%</div>
                        <div class="analytics-label">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø§Ù†</div>
                    </div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="analytics-content">
                        <div class="analytics-value" id="alertItems">0</div>
                        <div class="analytics-label">Ø¹Ù†Ø§ØµØ± ØªØ­ØªØ§Ø¬ Ø§Ù†ØªØ¨Ø§Ù‡</div>
                    </div>
                </div>
            </div>

            <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª -->
            <div class="toolbar">
                <div class="view-options">
                    <button class="view-option active" data-view="grid" onclick="inventory.changeView('grid')">
                        <i class="fas fa-th-large"></i>
                    </button>
                    <button class="view-option" data-view="list" onclick="inventory.changeView('list')">
                        <i class="fas fa-list"></i>
                    </button>
                </div>
                <div class="sort-options">
                    <select id="sortSelect" onchange="inventory.sortInventory()">
                        <option value="name_asc">Ø§Ù„Ø§Ø³Ù… (Ø£-ÙŠ)</option>
                        <option value="name_desc">Ø§Ù„Ø§Ø³Ù… (ÙŠ-Ø£)</option>
                        <option value="stock_asc">Ø§Ù„Ù…Ø®Ø²ÙˆÙ† (Ù…Ù†Ø®ÙØ¶-Ø¹Ø§Ù„ÙŠ)</option>
                        <option value="stock_desc">Ø§Ù„Ù…Ø®Ø²ÙˆÙ† (Ø¹Ø§Ù„ÙŠ-Ù…Ù†Ø®ÙØ¶)</option>
                        <option value="expiry_asc">Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© (Ù‚Ø±ÙŠØ¨-Ø¨Ø¹ÙŠØ¯)</option>
                        <option value="updated_desc">Ø§Ù„Ø£Ø­Ø¯Ø«</option>
                    </select>
                </div>
            </div>

            <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† -->
            <div class="inventory-container">
                <div class="inventory-grid" id="inventoryGrid">
                    <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                </div>

                <div class="inventory-list" id="inventoryList" style="display: none;">
                    <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                </div>
            </div>

            <!-- ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø²ÙŠØ¯ -->
            <div class="load-more-section">
                <button class="btn-neumorphism btn-primary-neumorphism" id="loadMoreBtn" onclick="inventory.loadMore()">
                    <i class="fas fa-sync-alt"></i>
                    ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø²ÙŠØ¯
                </button>
            </div>
        </div>

        <!-- Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ø§Ø¦Ù… -->
        <button class="floating-action-btn liquid-transition" onclick="inventory.showAddInventoryModal()">
            <i class="fas fa-plus"></i>
        </button>

        <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø³ÙÙ„ÙŠ -->
        <div class="bottom-nav-dock">
            <a href="index.html" class="nav-item-dock">
                <div class="nav-icon-dock">
                    <i class="fas fa-home"></i>
                </div>
                <div class="nav-label">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
            </a>
            <a href="products.html" class="nav-item-dock">
                <div class="nav-icon-dock">
                    <i class="fas fa-pills"></i>
                </div>
                <div class="nav-label">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</div>
            </a>
            <a href="inventory.html" class="nav-item-dock active">
                <div class="nav-icon-dock">
                    <i class="fas fa-boxes"></i>
                </div>
                <div class="nav-label">Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</div>
            </a>
            <a href="orders.html" class="nav-item-dock">
                <div class="nav-icon-dock">
                    <i class="fas fa-shopping-cart"></i>
                </div>
                <div class="nav-label">Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
            </a>
            <a href="reports.html" class="nav-item-dock">
                <div class="nav-icon-dock">
                    <i class="fas fa-chart-bar"></i>
                </div>
                <div class="nav-label">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div>
            </a>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† -->
    <div id="inventoryFormModal" class="modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h2 id="inventoryFormTitle">ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</h2>
                <span class="close" onclick="inventory.closeInventoryForm()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="inventoryForm" class="inventory-form">
                    <div class="form-section">
                        <h3>Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="inventoryProduct">Ø§Ù„Ù…Ù†ØªØ¬ *</label>
                                <select id="inventoryProduct" name="product" required>
                                    <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†ØªØ¬</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="inventoryAction">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© *</label>
                                <select id="inventoryAction" name="action" required>
                                    <option value="add">Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</option>
                                    <option value="remove">Ø®ØµÙ… Ù…Ù† Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</option>
                                    <option value="adjust">ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙƒÙ…ÙŠØ©</option>
                                    <option value="transfer">Ù†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ù…Ø®Ø§Ø²Ù†</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="inventoryQuantity">Ø§Ù„ÙƒÙ…ÙŠØ© *</label>
                                <input type="number" id="inventoryQuantity" name="quantity" required>
                            </div>
                            <div class="form-group">
                                <label for="inventoryDate">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</label>
                                <input type="date" id="inventoryDate" name="date">
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="inventoryReason">Ø§Ù„Ø³Ø¨Ø¨ *</label>
                                <select id="inventoryReason" name="reason" required>
                                    <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø³Ø¨Ø¨</option>
                                    <option value="purchase">Ø´Ø±Ø§Ø¡ Ù…Ù† Ù…ÙˆØ±Ø¯</option>
                                    <option value="sale">Ø¨ÙŠØ¹ Ù„Ù„Ø¹Ù…ÙŠÙ„</option>
                                    <option value="return">Ø¥Ø±Ø¬Ø§Ø¹ Ù…Ù† Ø¹Ù…ÙŠÙ„</option>
                                    <option value="damage">ØªÙ„Ù Ø£Ùˆ ÙƒØ³Ø±</option>
                                    <option value="expired">Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©</option>
                                    <option value="adjustment">ØªØ¹Ø¯ÙŠÙ„ ÙŠØ¯ÙˆÙŠ</option>
                                    <option value="transfer">Ù†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ù…Ø®Ø§Ø²Ù†</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="inventoryReference">Ø±Ù‚Ù… Ø§Ù„Ù…Ø±Ø¬Ø¹</label>
                                <input type="text" id="inventoryReference" name="reference" placeholder="Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø£Ùˆ Ø§Ù„Ø·Ù„Ø¨">
                            </div>
                            <div class="form-group">
                                <label for="inventoryCost">Ø³Ø¹Ø± Ø§Ù„ØªÙƒÙ„ÙØ© (Ø±.Ø³)</label>
                                <input type="number" id="inventoryCost" name="cost" step="0.01">
                            </div>
                            <div class="form-group">
                                <label for="inventoryLocation">Ø§Ù„Ù…ÙˆÙ‚Ø¹/Ø§Ù„Ù…Ø®Ø²Ù†</label>
                                <select id="inventoryLocation" name="location">
                                    <option value="main">Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</option>
                                    <option value="branch1">ÙØ±Ø¹ Ø§Ù„Ø±ÙŠØ§Ø¶</option>
                                    <option value="branch2">ÙØ±Ø¹ Ø¬Ø¯Ø©</option>
                                    <option value="branch3">ÙØ±Ø¹ Ø§Ù„Ø¯Ù…Ø§Ù…</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</h3>
                        <div class="form-group">
                            <label for="inventoryNotes">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</label>
                            <textarea id="inventoryNotes" name="notes" rows="3" placeholder="Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ø­ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©..."></textarea>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-neumorphism" onclick="inventory.closeInventoryForm()">
                            Ø¥Ù„ØºØ§Ø¡
                        </button>
                        <button type="submit" class="btn-neumorphism btn-primary-neumorphism">
                            <i class="fas fa-save"></i>
                            Ø­ÙØ¸ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† -->
    <div id="inventoryDetailsModal" class="modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h2 id="inventoryDetailsTitle">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</h2>
                <span class="close" onclick="inventory.closeInventoryDetails()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="inventory-details-tabs">
                    <div class="tabs-header">
                        <button class="tab-btn active" data-tab="overview">Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©</button>
                        <button class="tab-btn" data-tab="movement">Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</button>
                        <button class="tab-btn" data-tab="analytics">Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª</button>
                        <button class="tab-btn" data-tab="alerts">Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</button>
                    </div>

                    <div class="tabs-content">
                        <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù†Ø¸Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø© -->
                        <div class="tab-pane active" id="overviewTab">
                            <div class="inventory-overview">
                                <div class="inventory-header">
                                    <div class="inventory-image-large">
                                        <i class="fas fa-pills" id="detailInventoryIcon"></i>
                                    </div>
                                    <div class="inventory-info">
                                        <h3 id="detailInventoryName"></h3>
                                        <div class="inventory-meta">
                                            <span id="detailInventoryCode"></span>
                                            <span id="detailInventoryCategory"></span>
                                            <span id="detailInventoryCompany"></span>
                                        </div>
                                        <div class="inventory-status">
                                            <span class="status-badge" id="detailInventoryStatus"></span>
                                            <span class="stock-badge" id="detailInventoryStockBadge"></span>
                                        </div>
                                    </div>
                                </div>

                                <div class="inventory-specs-grid">
                                    <div class="spec-card">
                                        <div class="spec-icon">
                                            <i class="fas fa-box"></i>
                                        </div>
                                        <div class="spec-info">
                                            <div class="spec-value" id="detailInventoryStock"></div>
                                            <div class="spec-label">Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ</div>
                                        </div>
                                    </div>
                                    <div class="spec-card">
                                        <div class="spec-icon">
                                            <i class="fas fa-shopping-cart"></i>
                                        </div>
                                        <div class="spec-info">
                                            <div class="spec-value" id="detailInventorySold"></div>
                                            <div class="spec-label">Ù…Ø¨Ø§Ø¹ Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±</div>
                                        </div>
                                    </div>
                                    <div class="spec-card">
                                        <div class="spec-icon">
                                            <i class="fas fa-arrow-down"></i>
                                        </div>
                                        <div class="spec-info">
                                            <div class="spec-value" id="detailInventoryMinStock"></div>
                                            <div class="spec-label">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰</div>
                                        </div>
                                    </div>
                                    <div class="spec-card">
                                        <div class="spec-icon">
                                            <i class="fas fa-calendar-alt"></i>
                                        </div>
                                        <div class="spec-info">
                                            <div class="spec-value" id="detailInventoryExpiry"></div>
                                            <div class="spec-label">Ø£ÙŠØ§Ù… Ù„Ù„ØµÙ„Ø§Ø­ÙŠØ©</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="inventory-details-section">
                                    <h4>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</h4>
                                    <div class="technical-specs" id="inventorySpecs">
                                        <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                                    </div>
                                </div>

                                <div class="inventory-details-section">
                                    <h4>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø©</h4>
                                    <div class="quick-actions">
                                        <button class="btn-neumorphism btn-primary-neumorphism" onclick="inventory.quickAddStock()">
                                            <i class="fas fa-plus"></i>
                                            Ø¥Ø¶Ø§ÙØ© Ù…Ø®Ø²ÙˆÙ†
                                        </button>
                                        <button class="btn-neumorphism btn-secondary-neumorphism" onclick="inventory.quickAdjustStock()">
                                            <i class="fas fa-edit"></i>
                                            ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙƒÙ…ÙŠØ©
                                        </button>
                                        <button class="btn-neumorphism btn-danger-neumorphism" onclick="inventory.quickRemoveStock()">
                                            <i class="fas fa-minus"></i>
                                            Ø®ØµÙ… Ù…Ø®Ø²ÙˆÙ†
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ØªØ¨ÙˆÙŠØ¨ Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† -->
                        <div class="tab-pane" id="movementTab">
                            <div class="inventory-movement">
                                <div class="movement-filters">
                                    <div class="filter-group">
                                        <label>Ø§Ù„ÙØªØ±Ø©:</label>
                                        <select id="movementPeriod">
                                            <option value="7">Ø¢Ø®Ø± 7 Ø£ÙŠØ§Ù…</option>
                                            <option value="30">Ø¢Ø®Ø± 30 ÙŠÙˆÙ…</option>
                                            <option value="90">Ø¢Ø®Ø± 90 ÙŠÙˆÙ…</option>
                                            <option value="365">Ø¢Ø®Ø± Ø³Ù†Ø©</option>
                                        </select>
                                    </div>
                                    <div class="filter-group">
                                        <label>Ù†ÙˆØ¹ Ø§Ù„Ø­Ø±ÙƒØ©:</label>
                                        <select id="movementType">
                                            <option value="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø±ÙƒØ§Øª</option>
                                            <option value="in">Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„</option>
                                            <option value="out">Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø®Ø±ÙˆØ¬</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="movement-list">
                                    <div class="movement-header">
                                        <div>Ø§Ù„ØªØ§Ø±ÙŠØ®</div>
                                        <div>Ù†ÙˆØ¹ Ø§Ù„Ø­Ø±ÙƒØ©</div>
                                        <div>Ø§Ù„ÙƒÙ…ÙŠØ©</div>
                                        <div>Ø§Ù„Ø³Ø¨Ø¨</div>
                                        <div>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</div>
                                    </div>
                                    <div class="movement-items" id="movementItems">
                                        <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª -->
                        <div class="tab-pane" id="analyticsTab">
                            <div class="inventory-analytics">
                                <div class="analytics-stats">
                                    <div class="analytics-stat">
                                        <div class="stat-value" id="analyticsTurnover">0%</div>
                                        <div class="stat-label">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø§Ù†</div>
                                    </div>
                                    <div class="analytics-stat">
                                        <div class="stat-value" id="analyticsAvgStock">0</div>
                                        <div class="stat-label">Ù…ØªÙˆØ³Ø· Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</div>
                                    </div>
                                    <div class="analytics-stat">
                                        <div class="stat-value" id="analyticsStockDays">0</div>
                                        <div class="stat-label">Ø£ÙŠØ§Ù… Ø§Ù„ØªØºØ·ÙŠØ©</div>
                                    </div>
                                    <div class="analytics-stat">
                                        <div class="stat-value" id="analyticsReorderPoint">0</div>
                                        <div class="stat-label">Ù†Ù‚Ø·Ø© Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø·Ù„Ø¨</div>
                                    </div>
                                </div>

                                <div class="analytics-charts">
                                    <div class="chart-container">
                                        <h4>Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</h4>
                                        <div class="chart-placeholder">
                                            <i class="fas fa-chart-line"></i>
                                            <p>Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ù„Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</p>
                                        </div>
                                    </div>
                                    <div class="chart-container">
                                        <h4>Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</h4>
                                        <div class="chart-placeholder">
                                            <i class="fas fa-chart-bar"></i>
                                            <p>Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª -->
                        <div class="tab-pane" id="alertsTab">
                            <div class="inventory-alerts">
                                <div class="alert-cards">
                                    <div class="alert-card warning">
                                        <div class="alert-icon">
                                            <i class="fas fa-exclamation-triangle"></i>
                                        </div>
                                        <div class="alert-content">
                                            <h4>Ù…Ø®Ø²ÙˆÙ† Ù…Ù†Ø®ÙØ¶</h4>
                                            <p>Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨</p>
                                            <div class="alert-actions">
                                                <button class="btn-neumorphism btn-primary-neumorphism" onclick="inventory.reorderProduct()">
                                                    Ø·Ù„Ø¨ Ù…Ù† Ø§Ù„Ù…ÙˆØ±Ø¯
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="alert-card danger">
                                        <div class="alert-icon">
                                            <i class="fas fa-skull-crossbones"></i>
                                        </div>
                                        <div class="alert-content">
                                            <h4>Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ù‚Ø±ÙŠØ¨Ø§Ù‹</h4>
                                            <p>Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ø³ÙŠÙ†ØªÙ‡ÙŠ ØµÙ„Ø§Ø­ÙŠØªÙ‡ Ø®Ù„Ø§Ù„ 30 ÙŠÙˆÙ…</p>
                                            <div class="alert-actions">
                                                <button class="btn-neumorphism btn-secondary-neumorphism" onclick="inventory.applyDiscount()">
                                                    ØªØ·Ø¨ÙŠÙ‚ Ø®ØµÙ…
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="alert-card info">
                                        <div class="alert-icon">
                                            <i class="fas fa-info-circle"></i>
                                        </div>
                                        <div class="alert-content">
                                            <h4>Ù…Ø®Ø²ÙˆÙ† Ø±Ø§ÙƒØ¯</h4>
                                            <p>Ù„Ù… ÙŠØªÙ… Ø¨ÙŠØ¹ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ø®Ù„Ø§Ù„ 60 ÙŠÙˆÙ…</p>
                                            <div class="alert-actions">
                                                <button class="btn-neumorphism" onclick="inventory.promoteProduct()">
                                                    Ø§Ù„ØªØ±ÙˆÙŠØ¬ Ù„Ù„Ù…Ù†ØªØ¬
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="inventory-actions-footer">
                    <button class="btn-neumorphism" onclick="inventory.editInventory()">
                        <i class="fas fa-edit"></i>
                        ØªØ¹Ø¯ÙŠÙ„
                    </button>
                    <button class="btn-neumorphism btn-secondary-neumorphism" onclick="inventory.transferInventory()">
                        <i class="fas fa-exchange-alt"></i>
                        Ù†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ù…Ø®Ø§Ø²Ù†
                    </button>
                    <button class="btn-neumorphism btn-danger-neumorphism" onclick="inventory.adjustInventory()">
                        <i class="fas fa-adjust"></i>
                        ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
                    </button>
                    <button class="btn-neumorphism btn-primary-neumorphism" onclick="inventory.generateReport()">
                        <i class="fas fa-file-pdf"></i>
                        ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„ÙÙ„ØªØ±Ø© -->
    <div id="filterModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ØªØµÙÙŠØ© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</h2>
                <span class="close" onclick="inventory.closeFilter()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="filter-section">
                    <div class="filter-group">
                        <div class="filter-title">Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</div>
                        <div class="filter-options">
                            <label class="filter-option">
                                <input type="checkbox" name="stock_status" value="in_stock" checked>
                                <span>Ù…ØªÙˆÙØ± ÙÙŠ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</span>
                            </label>
                            <label class="filter-option">
                                <input type="checkbox" name="stock_status" value="low_stock">
                                <span>Ù…Ù†Ø®ÙØ¶ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</span>
                            </label>
                            <label class="filter-option">
                                <input type="checkbox" name="stock_status" value="out_of_stock">
                                <span>ØºÙŠØ± Ù…ØªÙˆÙØ±</span>
                            </label>
                            <label class="filter-option">
                                <input type="checkbox" name="stock_status" value="expiring">
                                <span>Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ù‚Ø±ÙŠØ¨Ø§Ù‹</span>
                            </label>
                        </div>
                    </div>

                    <div class="filter-group">
                        <div class="filter-title">Ø§Ù„ØªØµÙ†ÙŠÙ</div>
                        <div class="filter-options" id="filterCategories">
                            <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                        </div>
                    </div>

                    <div class="filter-group">
                        <div class="filter-title">Ù†Ø·Ø§Ù‚ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</div>
                        <div class="stock-range">
                            <div class="stock-inputs">
                                <input type="number" class="stock-input" id="filterMinStock" placeholder="Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰" value="0">
                                <input type="number" class="stock-input" id="filterMaxStock" placeholder="Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰" value="1000">
                            </div>
                        </div>
                    </div>

                    <div class="filter-group">
                        <div class="filter-title">Ø®ÙŠØ§Ø±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</div>
                        <div class="filter-options">
                            <label class="filter-option">
                                <input type="checkbox" id="filterRequiresPrescription">
                                <span>ÙŠØªØ·Ù„Ø¨ ÙˆØµÙØ© Ø·Ø¨ÙŠØ©</span>
                            </label>
                            <label class="filter-option">
                                <input type="checkbox" id="filterTrackInventory">
                                <span>ÙŠØªÙ… ØªØªØ¨Ø¹ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</span>
                            </label>
                            <label class="filter-option">
                                <input type="checkbox" id="filterActiveOnly" checked>
                                <span>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø© ÙÙ‚Ø·</span>
                            </label>
                        </div>
                    </div>

                    <div class="filter-actions">
                        <button class="btn-neumorphism" onclick="inventory.resetFilters()">
                            Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†
                        </button>
                        <button class="btn-neumorphism btn-primary-neumorphism" onclick="inventory.applyFilters()">
                            ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„ØªØ±Ø©
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
    <div id="loadingModal" class="modal">
        <div class="modal-content small-modal">
            <div class="loading-content">
                <div class="loading-spinner"></div>
                <p>Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...</p>
            </div>
        </div>
    </div>

    <script>
// Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„
class InventoryManagement {
    constructor() {
        this.products = [];
        this.categories = [];
        this.inventory = [];
        this.filteredInventory = [];
        this.currentItem = null;
        this.currentView = 'grid';
        this.visibleItems = 12;
        this.currentFilters = {
            stockStatus: ['in_stock'],
            categories: [],
            minStock: 0,
            maxStock: 1000,
            requiresPrescription: false,
            trackInventory: true,
            activeOnly: true
        };
        this.sortBy = 'name_asc';
        this.init();
    }

    init() {
        this.loadData();
        this.setupEventListeners();
        this.renderCategories();
        this.renderInventory();
        this.updateStats();
        this.setupRealTimeUpdates();
        this.updateTime();
    }

    loadData() {
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† localStorage Ø£Ùˆ API
        const savedProducts = localStorage.getItem('pharma_products_management');
        const savedCategories = localStorage.getItem('pharma_categories');
        const savedInventory = localStorage.getItem('pharma_inventory');

        if (savedProducts) {
            this.products = JSON.parse(savedProducts);
        } else {
            // Ø¥Ø°Ø§ Ù„Ù… ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§ØªØŒ Ù†Ø³ØªØ®Ø¯Ù… Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
            this.products = this.getDefaultProducts();
        }

        if (savedCategories) {
            this.categories = JSON.parse(savedCategories);
        } else {
            this.categories = this.getDefaultCategories();
        }

        if (savedInventory) {
            this.inventory = JSON.parse(savedInventory);
        } else {
            // Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ù…Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
            this.inventory = this.generateInventoryFromProducts();
        }

        this.filteredInventory = [...this.inventory];
        this.saveData();
    }

    getDefaultProducts() {
        return [
            {
                id: 1,
                code: 'PARA-500',
                name: 'Ø¨Ø§Ø±Ø§Ø³ÙŠØªØ§Ù…ÙˆÙ„ 500 Ù…Ø¬Ù…',
                category: 'Ù…Ø³ÙƒÙ†Ø§Øª',
                company: 'Ø´Ø±ÙƒØ© Ø§Ù„Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ù…ØªØ­Ø¯Ø©',
                description: 'Ù…Ø³ÙƒÙ† Ù„Ù„Ø£Ù„Ù… ÙˆØ®Ø§ÙØ¶ Ù„Ù„Ø­Ø±Ø§Ø±Ø©ØŒ ÙŠØ³ØªØ®Ø¯Ù… Ù„ØªØ³ÙƒÙŠÙ† Ø§Ù„Ø¢Ù„Ø§Ù… Ø§Ù„Ø®ÙÙŠÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ù…ØªÙˆØ³Ø·Ø© ÙˆØ®ÙØ¶ Ø§Ù„Ø­Ø±Ø§Ø±Ø©.',
                price: 15.00,
                cost: 8.50,
                stock: 150,
                minStock: 25,
                form: 'tablet',
                dosage: '500 Ù…Ø¬Ù…',
                size: '20 Ù‚Ø±Øµ',
                expiry: 36,
                ingredients: 'Ø¨Ø§Ø±Ø§Ø³ÙŠØªØ§Ù…ÙˆÙ„',
                usage: 'Ù‚Ø±Øµ ÙƒÙ„ 6-8 Ø³Ø§Ø¹Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø©',
                requiresPrescription: false,
                isActive: true,
                isFeatured: true,
                trackInventory: true,
                icon: 'fa-pills',
                createdAt: '2024-01-01',
                updatedAt: '2024-01-15'
            },
            {
                id: 2,
                code: 'VITC-1000',
                name: 'ÙÙŠØªØ§Ù…ÙŠÙ† Ø³ÙŠ 1000 Ù…Ø¬Ù…',
                category: 'ÙÙŠØªØ§Ù…ÙŠÙ†Ø§Øª',
                company: 'Ù…ØµÙ†Ø¹ Ø§Ù„ÙÙŠØªØ§Ù…ÙŠÙ†Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…',
                description: 'Ù…ÙƒÙ…Ù„ ØºØ°Ø§Ø¦ÙŠ Ù…Ù† ÙÙŠØªØ§Ù…ÙŠÙ† Ø³ÙŠØŒ ÙŠØ¯Ø¹Ù… Ø¬Ù‡Ø§Ø² Ø§Ù„Ù…Ù†Ø§Ø¹Ø© ÙˆÙŠØ¹Ø²Ø² ØµØ­Ø© Ø§Ù„Ø¬Ù„Ø¯ ÙˆØ§Ù„Ø¹Ø¸Ø§Ù….',
                price: 45.00,
                cost: 25.00,
                stock: 75,
                minStock: 20,
                form: 'tablet',
                dosage: '1000 Ù…Ø¬Ù…',
                size: '30 Ù‚Ø±Øµ ÙÙˆØ§Ø±',
                expiry: 24,
                ingredients: 'ÙÙŠØªØ§Ù…ÙŠÙ† Ø³ÙŠ',
                usage: 'Ù‚Ø±Øµ ÙÙˆØ§Ø± ÙŠÙˆÙ…ÙŠØ§Ù‹ ÙÙŠ ÙƒÙˆØ¨ Ù…Ù† Ø§Ù„Ù…Ø§Ø¡',
                requiresPrescription: false,
                isActive: true,
                isFeatured: true,
                trackInventory: true,
                icon: 'fa-apple-alt',
                createdAt: '2024-01-01',
                updatedAt: '2024-01-15'
            },
            {
                id: 3,
                code: 'OMEGA-1000',
                name: 'Ø£ÙˆÙ…ÙŠØºØ§ 3 ÙƒØ¨Ø³ÙˆÙ„Ø§Øª',
                category: 'Ù…ÙƒÙ…Ù„Ø§Øª ØºØ°Ø§Ø¦ÙŠØ©',
                company: 'Ù…ØµÙ†Ø¹ Ø§Ù„ÙÙŠØªØ§Ù…ÙŠÙ†Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…',
                description: 'Ù…ÙƒÙ…Ù„ ØºØ°Ø§Ø¦ÙŠ Ù…Ù† Ø£Ø­Ù…Ø§Ø¶ Ø£ÙˆÙ…ÙŠØºØ§ 3 Ø§Ù„Ø¯Ù‡Ù†ÙŠØ©ØŒ ÙŠØ¯Ø¹Ù… ØµØ­Ø© Ø§Ù„Ù‚Ù„Ø¨ ÙˆØ§Ù„Ø¯Ù…Ø§Øº ÙˆØ§Ù„Ù…ÙØ§ØµÙ„.',
                price: 75.00,
                cost: 45.00,
                stock: 30,
                minStock: 15,
                form: 'capsule',
                dosage: '1000 Ù…Ø¬Ù…',
                size: '60 ÙƒØ¨Ø³ÙˆÙ„Ø©',
                expiry: 24,
                ingredients: 'Ø²ÙŠØª Ø§Ù„Ø³Ù…ÙƒØŒ Ø£ÙˆÙ…ÙŠØºØ§ 3',
                usage: 'ÙƒØ¨Ø³ÙˆÙ„Ø© Ù…Ø±ØªÙŠÙ† ÙŠÙˆÙ…ÙŠØ§Ù‹',
                requiresPrescription: false,
                isActive: true,
                isFeatured: false,
                trackInventory: true,
                icon: 'fa-capsules',
                createdAt: '2024-01-01',
                updatedAt: '2024-01-15'
            },
            {
                id: 4,
                code: 'HYDRO-1',
                name: 'ÙƒØ±ÙŠÙ… Ù‡ÙŠØ¯Ø±ÙˆÙƒÙˆØ±ØªÙŠØ²ÙˆÙ† 1%',
                category: 'Ø¬Ù„Ø¯ÙŠØ©',
                company: 'Ù…Ø®ØªØ¨Ø±Ø§Øª Ø§Ù„Ø¬Ù„Ø¯ÙŠØ©',
                description: 'ÙƒØ±ÙŠÙ… Ù…ÙˆØ¶Ø¹ÙŠ Ù„Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø§Ù„ØªÙ‡Ø§Ø¨Ø§Øª Ø§Ù„Ø¬Ù„Ø¯ÙŠØ© ÙˆØ§Ù„Ø­ÙƒØ© ÙˆØ§Ù„Ø·ÙØ­ Ø§Ù„Ø¬Ù„Ø¯ÙŠ.',
                price: 22.00,
                cost: 12.00,
                stock: 8,
                minStock: 10,
                form: 'cream',
                dosage: '1%',
                size: '30 Ø¬Ù…',
                expiry: 24,
                ingredients: 'Ù‡ÙŠØ¯Ø±ÙˆÙƒÙˆØ±ØªÙŠØ²ÙˆÙ†',
                usage: 'ÙŠÙˆØ¶Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…ØµØ§Ø¨Ø© 2-3 Ù…Ø±Ø§Øª ÙŠÙˆÙ…ÙŠØ§Ù‹',
                requiresPrescription: true,
                isActive: true,
                isFeatured: false,
                trackInventory: true,
                icon: 'fa-allergies',
                createdAt: '2024-01-01',
                updatedAt: '2024-01-15'
            },
            {
                id: 5,
                code: 'AMOX-500',
                name: 'Ø£Ù…ÙˆÙƒØ³ÙŠØ³ÙŠÙ„ÙŠÙ† 500 Ù…Ø¬Ù…',
                category: 'Ù…Ø¶Ø§Ø¯Ø§Øª Ø­ÙŠÙˆÙŠØ©',
                company: 'Ø´Ø±ÙƒØ© Ø§Ù„Ù…Ø¶Ø§Ø¯Ø§Øª Ø§Ù„Ø­ÙŠÙˆÙŠØ©',
                description: 'Ù…Ø¶Ø§Ø¯ Ø­ÙŠÙˆÙŠ ÙˆØ§Ø³Ø¹ Ø§Ù„Ù…Ø¯Ù‰ Ù„Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø§Ù„ØªÙ‡Ø§Ø¨Ø§Øª Ø§Ù„Ø¨ÙƒØªÙŠØ±ÙŠØ© Ø§Ù„Ù…Ø®ØªÙ„ÙØ©.',
                price: 35.00,
                cost: 18.00,
                stock: 0,
                minStock: 20,
                form: 'capsule',
                dosage: '500 Ù…Ø¬Ù…',
                size: '12 ÙƒØ¨Ø³ÙˆÙ„Ø©',
                expiry: 36,
                ingredients: 'Ø£Ù…ÙˆÙƒØ³ÙŠØ³ÙŠÙ„ÙŠÙ†',
                usage: 'ÙƒØ¨Ø³ÙˆÙ„Ø© ÙƒÙ„ 8 Ø³Ø§Ø¹Ø§Øª',
                requiresPrescription: true,
                isActive: true,
                isFeatured: false,
                trackInventory: true,
                icon: 'fa-prescription-bottle',
                createdAt: '2024-01-01',
                updatedAt: '2024-01-15'
            },
            {
                id: 6,
                code: 'EYE-DROP',
                name: 'Ù‚Ø·Ø±Ø© Ø§Ù„Ø¹ÙŠÙ† Ø§Ù„Ù…Ø±Ø·Ø¨Ø©',
                category: 'Ø¹ÙŠÙˆÙ†',
                company: 'Ù…Ø®ØªØ¨Ø±Ø§Øª Ø§Ù„Ø¹ÙŠÙˆÙ†',
                description: 'Ù‚Ø·Ø±Ø© Ø¹ÙŠÙ† Ù„ØªØ±Ø·ÙŠØ¨ ÙˆØªØ®ÙÙŠÙ Ø¬ÙØ§Ù ÙˆØªÙ‡ÙŠØ¬ Ø§Ù„Ø¹ÙŠÙ†ÙŠÙ†.',
                price: 28.00,
                cost: 15.00,
                stock: 45,
                minStock: 15,
                form: 'drops',
                dosage: '',
                size: '15 Ù…Ù„',
                expiry: 12,
                ingredients: 'Ù‡ÙŠØ§Ù„ÙˆØ±ÙˆÙ†ÙŠÙƒ Ø£Ø³ÙŠØ¯',
                usage: 'Ù‚Ø·Ø±Ø© ÙÙŠ ÙƒÙ„ Ø¹ÙŠÙ† Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø©',
                requiresPrescription: false,
                isActive: true,
                isFeatured: false,
                trackInventory: true,
                icon: 'fa-eye',
                createdAt: '2024-01-01',
                updatedAt: '2024-01-15'
            },
            {
                id: 7,
                code: 'COUGH-SYRUP',
                name: 'Ø´Ø±Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø§Ù„ Ù„Ù„Ø£Ø·ÙØ§Ù„',
                category: 'Ø£Ø·ÙØ§Ù„',
                company: 'Ø´Ø±ÙƒØ© Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø£Ø·ÙØ§Ù„',
                description: 'Ø´Ø±Ø§Ø¨ Ù„Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø³Ø¹Ø§Ù„ ÙˆÙ†Ø²Ù„Ø§Øª Ø§Ù„Ø¨Ø±Ø¯ Ù„Ø¯Ù‰ Ø§Ù„Ø£Ø·ÙØ§Ù„ØŒ Ø¨Ù†ÙƒÙ‡Ø© Ø§Ù„ÙØ±Ø§ÙˆÙ„Ø© Ø§Ù„Ù…Ø­Ø¨Ø¨Ø©.',
                price: 18.00,
                cost: 9.50,
                stock: 60,
                minStock: 20,
                form: 'syrup',
                dosage: '',
                size: '120 Ù…Ù„',
                expiry: 12,
                ingredients: 'Ø¯ÙŠÙƒØ³ØªØ±ÙˆÙ…ÙŠØ«ÙˆØ±ÙØ§Ù†',
                usage: 'Ù…Ù„Ø¹Ù‚Ø© ØµØºÙŠØ±Ø© ÙƒÙ„ 6-8 Ø³Ø§Ø¹Ø§Øª',
                requiresPrescription: false,
                isActive: true,
                isFeatured: true,
                trackInventory: true,
                icon: 'fa-baby',
                createdAt: '2024-01-01',
                updatedAt: '2024-01-15'
            },
            {
                id: 8,
                code: 'BP-MED',
                name: 'Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø¶ØºØ·',
                category: 'Ù‚Ù„Ø¨ ÙˆØ£ÙˆØ¹ÙŠØ© Ø¯Ù…ÙˆÙŠØ©',
                company: 'Ù…Ø®ØªØ¨Ø±Ø§Øª Ø§Ù„Ù‚Ù„Ø¨',
                description: 'Ø¯ÙˆØ§Ø¡ Ù„Ø¹Ù„Ø§Ø¬ Ø§Ø±ØªÙØ§Ø¹ Ø¶ØºØ· Ø§Ù„Ø¯Ù…ØŒ ÙŠØ³Ø§Ø¹Ø¯ ÙÙŠ Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙŠØ§Øª Ø¶ØºØ· Ø§Ù„Ø¯Ù… Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ©.',
                price: 42.00,
                cost: 22.00,
                stock: 25,
                minStock: 15,
                form: 'tablet',
                dosage: '50 Ù…Ø¬Ù…',
                size: '30 Ù‚Ø±Øµ',
                expiry: 36,
                ingredients: 'Ù„ÙˆØ³Ø§Ø±ØªØ§Ù†',
                usage: 'Ù‚Ø±Øµ ÙŠÙˆÙ…ÙŠØ§Ù‹',
                requiresPrescription: true,
                isActive: false,
                isFeatured: false,
                trackInventory: true,
                icon: 'fa-heartbeat',
                createdAt: '2024-01-01',
                updatedAt: '2024-01-15'
            }
        ];
    }

    getDefaultCategories() {
        return [
            'Ù…Ø³ÙƒÙ†Ø§Øª',
            'ÙÙŠØªØ§Ù…ÙŠÙ†Ø§Øª',
            'Ù…ÙƒÙ…Ù„Ø§Øª ØºØ°Ø§Ø¦ÙŠØ©',
            'Ø¬Ù„Ø¯ÙŠØ©',
            'Ù…Ø¶Ø§Ø¯Ø§Øª Ø­ÙŠÙˆÙŠØ©',
            'Ø¹ÙŠÙˆÙ†',
            'Ø£Ø·ÙØ§Ù„',
            'Ù‚Ù„Ø¨ ÙˆØ£ÙˆØ¹ÙŠØ© Ø¯Ù…ÙˆÙŠØ©',
            'Ù…Ø¹Ø¯Ø© ÙˆÙ‡Ø¶Ù…',
            'Ø£Ø¹ØµØ§Ø¨',
            'ØºØ¯Ø¯ ØµÙ…Ø§Ø¡',
            'Ù…Ø³Ø§Ù„Ùƒ Ø¨ÙˆÙ„ÙŠØ©'
        ];
    }

    generateInventoryFromProducts() {
        return this.products.map(product => {
            const daysToExpiry = this.calculateDaysToExpiry(product.expiry);
            const monthlySales = Math.floor(Math.random() * 50) + 10;
            const turnoverRate = ((monthlySales / product.stock) * 100).toFixed(1);
            
            return {
                ...product,
                daysToExpiry: daysToExpiry,
                monthlySales: monthlySales,
                turnoverRate: turnoverRate,
                inventoryValue: product.stock * product.cost,
                lastMovement: this.generateRandomMovement(),
                movementHistory: this.generateMovementHistory(product.id)
            };
        });
    }

    calculateDaysToExpiry(expiryMonths) {
        const createdDate = new Date('2024-01-01');
        const expiryDate = new Date(createdDate);
        expiryDate.setMonth(expiryDate.getMonth() + expiryMonths);
        const today = new Date();
        const diffTime = expiryDate - today;
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        return diffDays;
    }

    generateRandomMovement() {
        const types = ['purchase', 'sale', 'adjustment', 'transfer'];
        const reasons = ['Ø´Ø±Ø§Ø¡ Ù…Ù† Ù…ÙˆØ±Ø¯', 'Ø¨ÙŠØ¹ Ù„Ù„Ø¹Ù…ÙŠÙ„', 'ØªØ¹Ø¯ÙŠÙ„ ÙŠØ¯ÙˆÙŠ', 'Ù†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ù…Ø®Ø§Ø²Ù†'];
        return {
            date: new Date(Date.now() - Math.random() * 7 * 24 * 60 * 60 * 1000).toISOString(),
            type: types[Math.floor(Math.random() * types.length)],
            quantity: Math.floor(Math.random() * 20) - 10,
            reason: reasons[Math.floor(Math.random() * reasons.length)]
        };
    }

    generateMovementHistory(productId) {
        const movements = [];
        const movementCount = Math.floor(Math.random() * 10) + 5;
        
        for (let i = 0; i < movementCount; i++) {
            movements.push(this.generateRandomMovement());
        }
        
        return movements.sort((a, b) => new Date(b.date) - new Date(a.date));
    }

    saveData() {
        localStorage.setItem('pharma_inventory', JSON.stringify(this.inventory));
    }

    setupEventListeners() {
        // Ø²Ø± Ø§Ù„Ø¨Ø­Ø«
        const searchToggleBtn = document.getElementById('searchToggleBtn');
        if (searchToggleBtn) {
            searchToggleBtn.addEventListener('click', () => {
                this.toggleSearch();
            });
        }

        // Ø²Ø± Ø§Ù„ÙÙ„ØªØ±Ø©
        const filterBtn = document.getElementById('filterBtn');
        if (filterBtn) {
            filterBtn.addEventListener('click', () => {
                this.showFilter();
            });
        }

        // Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ©
        const addInventoryBtn = document.getElementById('addInventoryBtn');
        if (addInventoryBtn) {
            addInventoryBtn.addEventListener('click', () => {
                this.showAddInventoryModal();
            });
        }

        // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
        const searchInput = document.getElementById('searchInput');
        if (searchInput) {
            searchInput.addEventListener('input', (e) => {
                this.searchInventory(e.target.value);
            });
        }

        // Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
        const inventoryForm = document.getElementById('inventoryForm');
        if (inventoryForm) {
            inventoryForm.addEventListener('submit', (e) => {
                e.preventDefault();
                this.saveInventoryMovement();
            });
        }

        // ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„ØªÙØ§ØµÙŠÙ„
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                this.switchTab(e.target.dataset.tab);
            });
        });

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª
        setInterval(() => {
            this.updateTime();
        }, 60000);

        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
        window.addEventListener('click', (e) => {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            });
        });
    }

    updateTime() {
        const now = new Date();
        const timeString = now.toLocaleTimeString('ar-EG', { 
            hour: '2-digit', 
            minute: '2-digit',
            hour12: true 
        });
        const timeElement = document.getElementById('currentTime');
        if (timeElement) {
            timeElement.textContent = timeString;
        }
    }

    toggleSearch() {
        const searchBar = document.getElementById('searchBar');
        if (searchBar.style.display === 'none') {
            searchBar.style.display = 'flex';
            document.getElementById('searchInput').focus();
        } else {
            searchBar.style.display = 'none';
            document.getElementById('searchInput').value = '';
            this.searchInventory('');
        }
    }

    searchInventory(query) {
        if (query.trim() === '') {
            this.filteredInventory = [...this.inventory];
        } else {
            const searchTerm = query.toLowerCase();
            this.filteredInventory = this.inventory.filter(item => 
                item.name.toLowerCase().includes(searchTerm) ||
                item.code.toLowerCase().includes(searchTerm) ||
                item.company.toLowerCase().includes(searchTerm) ||
                item.category.toLowerCase().includes(searchTerm)
            );
        }
        
        this.applySorting();
        this.renderInventory();
        this.updateStats();
    }

    renderCategories() {
        const categoriesScroll = document.getElementById('categoriesScroll');
        if (!categoriesScroll) return;

        let categoriesHTML = `
            <div class="category-chip active liquid-transition" data-category="all">
                <i class="fas fa-th-large"></i>
                Ø§Ù„ÙƒÙ„
            </div>
        `;

        this.categories.forEach(category => {
            const itemCount = this.inventory.filter(p => p.category === category).length;
            categoriesHTML += `
                <div class="category-chip liquid-transition" data-category="${category}">
                    <i class="fas ${this.getCategoryIcon(category)}"></i>
                    ${category} (${itemCount})
                </div>
            `;
        });

        categoriesScroll.innerHTML = categoriesHTML;

        // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„Ù„ØªØµÙ†ÙŠÙØ§Øª
        document.querySelectorAll('.category-chip').forEach(chip => {
            chip.addEventListener('click', () => {
                document.querySelectorAll('.category-chip').forEach(c => c.classList.remove('active'));
                chip.classList.add('active');
                const category = chip.dataset.category;
                this.filterByCategory(category);
            });
        });

        // ØªØ­Ø¯ÙŠØ« Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ÙÙ„ØªØ±Ø©
        this.renderFilterCategories();
    }

    getCategoryIcon(category) {
        const icons = {
            'Ù…Ø³ÙƒÙ†Ø§Øª': 'fa-pills',
            'ÙÙŠØªØ§Ù…ÙŠÙ†Ø§Øª': 'fa-apple-alt',
            'Ù…ÙƒÙ…Ù„Ø§Øª ØºØ°Ø§Ø¦ÙŠØ©': 'fa-capsules',
            'Ø¬Ù„Ø¯ÙŠØ©': 'fa-allergies',
            'Ù…Ø¶Ø§Ø¯Ø§Øª Ø­ÙŠÙˆÙŠØ©': 'fa-prescription-bottle',
            'Ø¹ÙŠÙˆÙ†': 'fa-eye',
            'Ø£Ø·ÙØ§Ù„': 'fa-baby',
            'Ù‚Ù„Ø¨ ÙˆØ£ÙˆØ¹ÙŠØ© Ø¯Ù…ÙˆÙŠØ©': 'fa-heartbeat',
            'Ù…Ø¹Ø¯Ø© ÙˆÙ‡Ø¶Ù…': 'fa-stomach',
            'Ø£Ø¹ØµØ§Ø¨': 'fa-brain',
            'ØºØ¯Ø¯ ØµÙ…Ø§Ø¡': 'fa-vial',
            'Ù…Ø³Ø§Ù„Ùƒ Ø¨ÙˆÙ„ÙŠØ©': 'fa-tint'
        };
        return icons[category] || 'fa-pills';
    }

    filterByCategory(category) {
        if (category === 'all') {
            this.filteredInventory = [...this.inventory];
        } else {
            this.filteredInventory = this.inventory.filter(item => item.category === category);
        }
        
        this.applySorting();
        this.renderInventory();
        this.updateStats();
    }

    filterByStatus(status) {
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ø´Ø·Ø©
        document.querySelectorAll('.stat-item').forEach(item => item.classList.remove('active'));
        event.target.closest('.stat-item').classList.add('active');

        this.applyFilters();
    }

    applyFilters() {
        this.filteredInventory = this.inventory.filter(item => {
            // ÙÙ„ØªØ±Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
            const stockStatusMatch = 
                (this.currentFilters.stockStatus.includes('in_stock') && item.stock > item.minStock) ||
                (this.currentFilters.stockStatus.includes('low_stock') && item.stock > 0 && item.stock <= item.minStock) ||
                (this.currentFilters.stockStatus.includes('out_of_stock') && item.stock === 0) ||
                (this.currentFilters.stockStatus.includes('expiring') && item.daysToExpiry <= 30);

            // ÙÙ„ØªØ±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
            const stockMatch = item.stock >= this.currentFilters.minStock && 
                             item.stock <= this.currentFilters.maxStock;

            // ÙÙ„ØªØ±Ø© Ø§Ù„ÙˆØµÙØ© Ø§Ù„Ø·Ø¨ÙŠØ©
            const prescriptionMatch = !this.currentFilters.requiresPrescription || item.requiresPrescription;

            // ÙÙ„ØªØ±Ø© ØªØªØ¨Ø¹ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
            const trackMatch = !this.currentFilters.trackInventory || item.trackInventory;

            // ÙÙ„ØªØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©
            const activeMatch = !this.currentFilters.activeOnly || item.isActive;

            return stockStatusMatch && stockMatch && prescriptionMatch && trackMatch && activeMatch;
        });

        this.applySorting();
        this.renderInventory();
        this.updateStats();
    }

    applySorting() {
        switch (this.sortBy) {
            case 'name_asc':
                this.filteredInventory.sort((a, b) => a.name.localeCompare(b.name));
                break;
            case 'name_desc':
                this.filteredInventory.sort((a, b) => b.name.localeCompare(a.name));
                break;
            case 'stock_asc':
                this.filteredInventory.sort((a, b) => a.stock - b.stock);
                break;
            case 'stock_desc':
                this.filteredInventory.sort((a, b) => b.stock - a.stock);
                break;
            case 'expiry_asc':
                this.filteredInventory.sort((a, b) => a.daysToExpiry - b.daysToExpiry);
                break;
            case 'updated_desc':
                this.filteredInventory.sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt));
                break;
        }
    }

    sortInventory() {
        const sortSelect = document.getElementById('sortSelect');
        this.sortBy = sortSelect.value;
        this.applySorting();
        this.renderInventory();
    }

    changeView(view) {
        this.currentView = view;
        
        // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¹Ø±Ø¶
        document.querySelectorAll('.view-option').forEach(btn => {
            btn.classList.remove('active');
            if (btn.dataset.view === view) {
                btn.classList.add('active');
            }
        });

        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶
        const gridView = document.getElementById('inventoryGrid');
        const listView = document.getElementById('inventoryList');
        
        if (view === 'grid') {
            gridView.style.display = 'grid';
            listView.style.display = 'none';
        } else {
            gridView.style.display = 'none';
            listView.style.display = 'flex';
        }
    }

    renderInventory() {
        this.renderInventoryGrid();
        this.renderInventoryList();
        this.updateLoadMoreButton();
    }

    renderInventoryGrid() {
        const inventoryGrid = document.getElementById('inventoryGrid');
        if (!inventoryGrid) return;

        const itemsToShow = this.filteredInventory.slice(0, this.visibleItems);
        
        let gridHTML = '';
        itemsToShow.forEach(item => {
            const stockStatus = this.getStockStatus(item);
            const expiryStatus = this.getExpiryStatus(item);
            
            gridHTML += `
                <div class="inventory-card-grid liquid-transition" onclick="inventory.showInventoryDetails(${item.id})">
                    <div class="inventory-image">
                        <i class="fas ${item.icon}"></i>
                        <div class="inventory-badge ${stockStatus.class}">${stockStatus.text}</div>
                        ${expiryStatus.isExpiring ? `<div class="inventory-badge expiring">${expiryStatus.text}</div>` : ''}
                        ${item.requiresPrescription ? `<div class="inventory-badge" style="background: var(--info); top: 80px;">ÙˆØµÙØ©</div>` : ''}
                    </div>
                    <div class="inventory-content">
                        <div class="inventory-name">${item.name}</div>
                        <div class="inventory-meta">
                            <div>${item.code}</div>
                            <div>${item.company}</div>
                        </div>
                        <div class="inventory-stock">
                            <span class="current-stock">${item.stock} ÙˆØ­Ø¯Ø©</span>
                            <div class="stock-indicator ${stockStatus.class}"></div>
                        </div>
                        <div class="inventory-meta">
                            <div>Ø§Ù„Ù‚ÙŠÙ…Ø©: ${(item.stock * item.cost).toFixed(2)} Ø±.Ø³</div>
                            <div>Ø§Ù„Ø¯ÙˆØ±Ø§Ù†: ${item.turnoverRate}%</div>
                        </div>
                        <div class="inventory-actions-grid">
                            <button class="btn-neumorphism" onclick="event.stopPropagation(); inventory.quickAddStock(${item.id})">
                                <i class="fas fa-plus"></i>
                            </button>
                            <button class="btn-neumorphism" onclick="event.stopPropagation(); inventory.quickAdjustStock(${item.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn-neumorphism" onclick="event.stopPropagation(); inventory.showInventoryDetails(${item.id})">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        });

        inventoryGrid.innerHTML = gridHTML;
    }

    renderInventoryList() {
        const inventoryList = document.getElementById('inventoryList');
        if (!inventoryList) return;

        const itemsToShow = this.filteredInventory.slice(0, this.visibleItems);
        
        let listHTML = '';
        itemsToShow.forEach(item => {
            const stockStatus = this.getStockStatus(item);
            
            listHTML += `
                <div class="inventory-card-list liquid-transition" onclick="inventory.showInventoryDetails(${item.id})">
                    <div class="inventory-image-list">
                        <i class="fas ${item.icon}"></i>
                    </div>
                    <div class="inventory-details-list">
                        <div class="inventory-name-list">${item.name}</div>
                        <div class="inventory-meta-list">
                            <span>${item.code}</span> â€¢ 
                            <span>${item.company}</span>
                        </div>
                        <div class="inventory-stock-list">${item.stock} ÙˆØ­Ø¯Ø©</div>
                        <div class="inventory-status-list">
                            <span class="stock-indicator ${stockStatus.class}"></span>
                            ${stockStatus.text} â€¢ Ø§Ù„Ù‚ÙŠÙ…Ø©: ${(item.stock * item.cost).toFixed(2)} Ø±.Ø³
                        </div>
                    </div>
                    <div class="inventory-actions-list">
                        <button class="btn-neumorphism" onclick="event.stopPropagation(); inventory.quickAddStock(${item.id})">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                </div>
            `;
        });

        inventoryList.innerHTML = listHTML;
    }

    getStockStatus(item) {
        if (item.stock === 0) {
            return { class: 'out-of-stock', text: 'ØºÙŠØ± Ù…ØªÙˆÙØ±' };
        } else if (item.stock <= item.minStock) {
            return { class: 'low-stock', text: 'Ù…Ù†Ø®ÙØ¶' };
        } else {
            return { class: 'stock', text: 'Ù…ØªÙˆÙØ±' };
        }
    }

    getExpiryStatus(item) {
        if (item.daysToExpiry <= 0) {
            return { isExpiring: true, text: 'Ù…Ù†ØªÙ‡ÙŠ' };
        } else if (item.daysToExpiry <= 30) {
            return { isExpiring: true, text: `${item.daysToExpiry} ÙŠÙˆÙ…` };
        } else {
            return { isExpiring: false, text: '' };
        }
    }

    updateStats() {
        const totalItems = this.inventory.length;
        const lowStockItems = this.inventory.filter(p => p.stock > 0 && p.stock <= p.minStock).length;
        const outOfStockItems = this.inventory.filter(p => p.stock === 0).length;
        const expiringItems = this.inventory.filter(p => p.daysToExpiry <= 30 && p.daysToExpiry > 0).length;

        document.getElementById('totalItems').textContent = totalItems;
        document.getElementById('lowStockItems').textContent = lowStockItems;
        document.getElementById('outOfStockItems').textContent = outOfStockItems;
        document.getElementById('expiringItems').textContent = expiringItems;

        // ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØªØ­Ù„ÙŠÙ„
        this.updateAnalyticsStats();
    }

    updateAnalyticsStats() {
        const totalInventoryValue = this.inventory.reduce((sum, item) => sum + (item.stock * item.cost), 0);
        const totalMonthlySales = this.inventory.reduce((sum, item) => sum + item.monthlySales, 0);
        const averageTurnover = this.inventory.reduce((sum, item) => sum + parseFloat(item.turnoverRate), 0) / this.inventory.length;
        const alertItems = this.inventory.filter(item => 
            item.stock <= item.minStock || item.daysToExpiry <= 30
        ).length;

        document.getElementById('totalInventoryValue').textContent = `${totalInventoryValue.toFixed(2)} Ø±.Ø³`;
        document.getElementById('monthlySales').textContent = totalMonthlySales;
        document.getElementById('turnoverRate').textContent = `${averageTurnover.toFixed(1)}%`;
        document.getElementById('alertItems').textContent = alertItems;
    }

    updateLoadMoreButton() {
        const loadMoreBtn = document.getElementById('loadMoreBtn');
        if (loadMoreBtn) {
            if (this.visibleItems >= this.filteredInventory.length) {
                loadMoreBtn.style.display = 'none';
            } else {
                loadMoreBtn.style.display = 'flex';
            }
        }
    }

    loadMore() {
        this.visibleItems += 8;
        this.renderInventory();
    }

    showAddInventoryModal() {
        document.getElementById('inventoryFormTitle').textContent = 'ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†';
        document.getElementById('inventoryForm').reset();
        
        // ØªØ¹Ø¨Ø¦Ø© Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
        this.populateProductOptions();
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†Ø§ÙØ°Ø©
        document.getElementById('inventoryFormModal').style.display = 'block';
    }

    populateProductOptions() {
        const productSelect = document.getElementById('inventoryProduct');
        productSelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†ØªØ¬</option>';
        
        this.products.forEach(product => {
            const option = document.createElement('option');
            option.value = product.id;
            option.textContent = `${product.name} (${product.code}) - ${product.stock} ÙˆØ­Ø¯Ø©`;
            productSelect.appendChild(option);
        });
    }

    closeInventoryForm() {
        document.getElementById('inventoryFormModal').style.display = 'none';
    }

    saveInventoryMovement() {
        const formData = new FormData(document.getElementById('inventoryForm'));
        const movementData = Object.fromEntries(formData);
        
        // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø±Ù‚Ù…ÙŠØ©
        movementData.productId = parseInt(movementData.product);
        movementData.quantity = parseInt(movementData.quantity);
        movementData.cost = parseFloat(movementData.cost) || 0;
        
        // Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬
        const product = this.products.find(p => p.id === movementData.productId);
        if (!product) {
            alert('Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
            return;
        }

        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØºÙŠÙŠØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
        let newStock = product.stock;
        switch (movementData.action) {
            case 'add':
                newStock += movementData.quantity;
                break;
            case 'remove':
                if (movementData.quantity > product.stock) {
                    alert('Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø±Ø§Ø¯ Ø®ØµÙ…Ù‡Ø§ Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù…ØªØ§Ø­');
                    return;
                }
                newStock -= movementData.quantity;
                break;
            case 'adjust':
                newStock = movementData.quantity;
                break;
            case 'transfer':
                // ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ù‚Ù„ØŒ Ù†Ø­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø®Ø§ØµØ©
                break;
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬
        product.stock = newStock;
        product.updatedAt = new Date().toISOString();

        // Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø³Ø¬Ù„ Ø§Ù„Ø­Ø±ÙƒØ§Øª
        if (!product.movementHistory) {
            product.movementHistory = [];
        }
        
        product.movementHistory.unshift({
            date: movementData.date || new Date().toISOString(),
            type: movementData.action,
            quantity: movementData.action === 'adjust' ? (movementData.quantity - product.stock) : 
                     movementData.action === 'add' ? movementData.quantity : -movementData.quantity,
            reason: movementData.reason,
            reference: movementData.reference,
            cost: movementData.cost,
            location: movementData.location,
            notes: movementData.notes
        });

        this.saveData();
        this.inventory = this.generateInventoryFromProducts();
        this.filteredInventory = [...this.inventory];
        this.applySorting();
        this.renderInventory();
        this.updateStats();
        this.closeInventoryForm();
        
        this.showToast('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø¨Ù†Ø¬Ø§Ø­');
    }

    showInventoryDetails(itemId) {
        const item = this.inventory.find(p => p.id === itemId);
        if (!item) return;

        this.currentItem = item;
        
        // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
        document.getElementById('detailInventoryName').textContent = item.name;
        document.getElementById('detailInventoryCode').textContent = item.code;
        document.getElementById('detailInventoryCategory').textContent = item.category;
        document.getElementById('detailInventoryCompany').textContent = item.company;
        document.getElementById('detailInventoryIcon').className = `fas ${item.icon}`;
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© ÙˆØ§Ù„Ù…Ø®Ø²ÙˆÙ†
        const statusBadge = document.getElementById('detailInventoryStatus');
        statusBadge.textContent = item.isActive ? 'Ù†Ø´Ø·' : 'ØºÙŠØ± Ù†Ø´Ø·';
        statusBadge.className = `status-badge ${item.isActive ? 'active' : 'inactive'}`;
        
        const stockStatus = this.getStockStatus(item);
        const stockBadge = document.getElementById('detailInventoryStockBadge');
        stockBadge.textContent = stockStatus.text;
        stockBadge.className = `stock-badge ${stockStatus.class}`;
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        document.getElementById('detailInventoryStock').textContent = `${item.stock} ÙˆØ­Ø¯Ø©`;
        document.getElementById('detailInventorySold').textContent = `${item.monthlySales} ÙˆØ­Ø¯Ø©`;
        document.getElementById('detailInventoryMinStock').textContent = `${item.minStock} ÙˆØ­Ø¯Ø©`;
        document.getElementById('detailInventoryExpiry').textContent = item.daysToExpiry > 0 ? `${item.daysToExpiry} ÙŠÙˆÙ…` : 'Ù…Ù†ØªÙ‡ÙŠ';
        
        // ØªØ¹Ø¨Ø¦Ø© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
        this.populateInventorySpecs(item);
        
        // ØªØ¹Ø¨Ø¦Ø© Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
        this.populateMovementTab(item);
        
        // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª
        this.populateAnalyticsTab(item);
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†Ø§ÙØ°Ø©
        document.getElementById('inventoryDetailsModal').style.display = 'block';
    }

    populateInventorySpecs(item) {
        const inventorySpecs = document.getElementById('inventorySpecs');
        const specs = [
            { name: 'Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©', value: `${(item.stock * item.cost).toFixed(2)} Ø±.Ø³` },
            { name: 'Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø§Ù†', value: `${item.turnoverRate}%` },
            { name: 'Ø¢Ø®Ø± Ø­Ø±ÙƒØ©', value: this.formatDate(item.lastMovement.date) },
            { name: 'Ù†ÙˆØ¹ Ø¢Ø®Ø± Ø­Ø±ÙƒØ©', value: this.getMovementTypeText(item.lastMovement.type) },
            { name: 'Ù…ÙˆÙ‚Ø¹ Ø§Ù„ØªØ®Ø²ÙŠÙ†', value: 'Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ' },
            { name: 'Ø­Ø§Ù„Ø© Ø§Ù„ØªØªØ¨Ø¹', value: item.trackInventory ? 'Ù…ÙØ¹Ù„' : 'Ù…Ø¹Ø·Ù„' }
        ];
        
        let specsHTML = '';
        specs.forEach(spec => {
            specsHTML += `
                <div class="technical-spec">
                    <div class="spec-name">${spec.name}</div>
                    <div class="spec-value">${spec.value}</div>
                </div>
            `;
        });
        
        inventorySpecs.innerHTML = specsHTML;
    }

    getMovementTypeText(type) {
        const types = {
            'purchase': 'Ø´Ø±Ø§Ø¡',
            'sale': 'Ø¨ÙŠØ¹',
            'adjustment': 'ØªØ¹Ø¯ÙŠÙ„',
            'transfer': 'Ù†Ù‚Ù„'
        };
        return types[type] || type;
    }

    populateMovementTab(item) {
        const movementItems = document.getElementById('movementItems');
        let movementHTML = '';
        
        const movements = item.movementHistory || [];
        movements.slice(0, 10).forEach(movement => {
            const typeClass = movement.type === 'purchase' || movement.type === 'add' ? 'in' : 'out';
            const typeText = this.getMovementTypeText(movement.type);
            const quantitySign = movement.quantity > 0 ? '+' : '';
            
            movementHTML += `
                <div class="movement-item">
                    <div>${this.formatDate(movement.date)}</div>
                    <div class="movement-type ${typeClass}">${typeText}</div>
                    <div>${quantitySign}${movement.quantity}</div>
                    <div>${movement.reason}</div>
                    <div>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</div>
                </div>
            `;
        });
        
        movementItems.innerHTML = movementHTML || '<div style="text-align: center; padding: 20px; color: var(--text-secondary);">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø±ÙƒØ§Øª</div>';
    }

    populateAnalyticsTab(item) {
        // ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØªØ­Ù„ÙŠÙ„
        document.getElementById('analyticsTurnover').textContent = `${item.turnoverRate}%`;
        document.getElementById('analyticsAvgStock').textContent = Math.round(item.stock * 0.8);
        document.getElementById('analyticsStockDays').textContent = Math.round(item.stock / (item.monthlySales / 30));
        document.getElementById('analyticsReorderPoint').textContent = Math.round(item.minStock * 1.2);
    }

    closeInventoryDetails() {
        document.getElementById('inventoryDetailsModal').style.display = 'none';
    }

    quickAddStock(itemId = null) {
        const item = itemId ? this.inventory.find(p => p.id === itemId) : this.currentItem;
        if (!item) return;

        const quantity = prompt(`Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø±Ø§Ø¯ Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ù„Ù„Ù…Ù†ØªØ¬ ${item.name}:`, '10');
        if (quantity !== null && !isNaN(quantity) && quantity > 0) {
            item.stock += parseInt(quantity);
            item.updatedAt = new Date().toISOString();
            
            // Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø³Ø¬Ù„ Ø§Ù„Ø­Ø±ÙƒØ§Øª
            if (!item.movementHistory) {
                item.movementHistory = [];
            }
            item.movementHistory.unshift({
                date: new Date().toISOString(),
                type: 'purchase',
                quantity: parseInt(quantity),
                reason: 'Ø¥Ø¶Ø§ÙØ© ÙŠØ¯ÙˆÙŠØ©',
                reference: '',
                cost: item.cost,
                location: 'main',
                notes: 'Ø¥Ø¶Ø§ÙØ© Ø³Ø±ÙŠØ¹Ø© Ù„Ù„Ù…Ø®Ø²ÙˆÙ†'
            });

            this.saveData();
            this.renderInventory();
            this.updateStats();
            
            if (this.currentItem && this.currentItem.id === item.id) {
                this.showInventoryDetails(item.id);
            }
            
            this.showToast('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø¨Ù†Ø¬Ø§Ø­');
        }
    }

    quickAdjustStock(itemId = null) {
        const item = itemId ? this.inventory.find(p => p.id === itemId) : this.currentItem;
        if (!item) return;

        const newStock = prompt(`Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ù…Ø®Ø²ÙˆÙ† Ù„Ù„Ù…Ù†ØªØ¬ ${item.name}:`, item.stock);
        if (newStock !== null && !isNaN(newStock)) {
            const quantityChange = parseInt(newStock) - item.stock;
            item.stock = parseInt(newStock);
            item.updatedAt = new Date().toISOString();
            
            // Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø³Ø¬Ù„ Ø§Ù„Ø­Ø±ÙƒØ§Øª
            if (!item.movementHistory) {
                item.movementHistory = [];
            }
            item.movementHistory.unshift({
                date: new Date().toISOString(),
                type: 'adjustment',
                quantity: quantityChange,
                reason: 'ØªØ¹Ø¯ÙŠÙ„ ÙŠØ¯ÙˆÙŠ',
                reference: '',
                cost: item.cost,
                location: 'main',
                notes: 'ØªØ¹Ø¯ÙŠÙ„ Ø³Ø±ÙŠØ¹ Ù„Ù„Ù…Ø®Ø²ÙˆÙ†'
            });

            this.saveData();
            this.renderInventory();
            this.updateStats();
            
            if (this.currentItem && this.currentItem.id === item.id) {
                this.showInventoryDetails(item.id);
            }
            
            this.showToast('ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø¨Ù†Ø¬Ø§Ø­');
        }
    }

    quickRemoveStock() {
        if (!this.currentItem) return;

        const quantity = prompt(`Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø±Ø§Ø¯ Ø®ØµÙ…Ù‡Ø§ Ù…Ù† Ø§Ù„Ù…Ù†ØªØ¬ ${this.currentItem.name}:`, '1');
        if (quantity !== null && !isNaN(quantity) && quantity > 0) {
            if (parseInt(quantity) > this.currentItem.stock) {
                alert('Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø±Ø§Ø¯ Ø®ØµÙ…Ù‡Ø§ Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù…ØªØ§Ø­');
                return;
            }

            this.currentItem.stock -= parseInt(quantity);
            this.currentItem.updatedAt = new Date().toISOString();
            
            // Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø³Ø¬Ù„ Ø§Ù„Ø­Ø±ÙƒØ§Øª
            if (!this.currentItem.movementHistory) {
                this.currentItem.movementHistory = [];
            }
            this.currentItem.movementHistory.unshift({
                date: new Date().toISOString(),
                type: 'sale',
                quantity: -parseInt(quantity),
                reason: 'Ø®ØµÙ… ÙŠØ¯ÙˆÙŠ',
                reference: '',
                cost: this.currentItem.cost,
                location: 'main',
                notes: 'Ø®ØµÙ… Ø³Ø±ÙŠØ¹ Ù…Ù† Ø§Ù„Ù…Ø®Ø²ÙˆÙ†'
            });

            this.saveData();
            this.renderInventory();
            this.updateStats();
            this.showInventoryDetails(this.currentItem.id);
            
            this.showToast('ØªÙ… Ø®ØµÙ… Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø¨Ù†Ø¬Ø§Ø­');
        }
    }

    showFilter() {
        this.renderFilterCategories();
        document.getElementById('filterModal').style.display = 'block';
    }

    renderFilterCategories() {
        const filterCategories = document.getElementById('filterCategories');
        let categoriesHTML = '';
        
        this.categories.forEach(category => {
            categoriesHTML += `
                <label class="filter-option">
                    <input type="checkbox" name="category" value="${category}">
                    <span>${category}</span>
                </label>
            `;
        });
        
        filterCategories.innerHTML = categoriesHTML;
    }

    closeFilter() {
        document.getElementById('filterModal').style.display = 'none';
    }

    applyFilters() {
        // Ø¬Ù…Ø¹ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙÙ„ØªØ±Ø© Ù…Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
        const statusCheckboxes = document.querySelectorAll('input[name="stock_status"]:checked');
        this.currentFilters.stockStatus = Array.from(statusCheckboxes).map(cb => cb.value);
        
        const categoryCheckboxes = document.querySelectorAll('input[name="category"]:checked');
        this.currentFilters.categories = Array.from(categoryCheckboxes).map(cb => cb.value);
        
        this.currentFilters.minStock = parseInt(document.getElementById('filterMinStock').value) || 0;
        this.currentFilters.maxStock = parseInt(document.getElementById('filterMaxStock').value) || 1000;
        this.currentFilters.requiresPrescription = document.getElementById('filterRequiresPrescription').checked;
        this.currentFilters.trackInventory = document.getElementById('filterTrackInventory').checked;
        this.currentFilters.activeOnly = document.getElementById('filterActiveOnly').checked;

        this.applyFilters();
        this.closeFilter();
    }

    resetFilters() {
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„ Ø§Ù„ÙÙ„ØªØ±Ø©
        document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
            if (cb.name === 'stock_status' && (cb.value === 'in_stock' || cb.value === 'all')) {
                cb.checked = true;
            } else {
                cb.checked = false;
            }
        });
        
        document.getElementById('filterMinStock').value = 0;
        document.getElementById('filterMaxStock').value = 1000;
        document.getElementById('filterActiveOnly').checked = true;
        
        this.currentFilters = {
            stockStatus: ['in_stock'],
            categories: [],
            minStock: 0,
            maxStock: 1000,
            requiresPrescription: false,
            trackInventory: true,
            activeOnly: true
        };
        
        this.applyFilters();
    }

    switchTab(tabName) {
        // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ¨ÙˆÙŠØ¨
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.classList.remove('active');
            if (btn.dataset.tab === tabName) {
                btn.classList.add('active');
            }
        });

        // ØªØ­Ø¯ÙŠØ« Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ¨ÙˆÙŠØ¨
        document.querySelectorAll('.tab-pane').forEach(pane => {
            pane.classList.remove('active');
            if (pane.id === `${tabName}Tab`) {
                pane.classList.add('active');
            }
        });
    }

    formatDate(dateString) {
        const date = new Date(dateString);
        return date.toLocaleDateString('ar-EG', {
            day: 'numeric',
            month: 'short'
        });
    }

    showToast(message) {
        // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± Toast
        const toast = document.createElement('div');
        toast.textContent = message;
        toast.style.cssText = `
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--primary);
            color: white;
            padding: 12px 24px;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-card);
            z-index: 3000;
            font-weight: 600;
            transition: var(--transition-liquid);
            max-width: 300px;
            text-align: center;
        `;
        
        document.body.appendChild(toast);
        
        // Ø¥Ø²Ø§Ù„Ø© Toast Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†
        setTimeout(() => {
            toast.style.opacity = '0';
            setTimeout(() => {
                if (document.body.contains(toast)) {
                    document.body.removeChild(toast);
                }
            }, 300);
        }, 3000);
    }

    setupRealTimeUpdates() {
        // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ­Ø¯ÙŠØ«Ø§Øª ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
        setInterval(() => {
            this.simulateRealTimeUpdate();
        }, 60000); // ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©
    }

    simulateRealTimeUpdate() {
        // Ù…Ø­Ø§ÙƒØ§Ø© ØªØºÙŠÙŠØ±Ø§Øª ÙÙŠ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† ÙˆØ§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª
        if (Math.random() > 0.7) {
            const randomItem = this.inventory[Math.floor(Math.random() * this.inventory.length)];
            if (randomItem && randomItem.stock > 0) {
                const saleQuantity = Math.floor(Math.random() * 3) + 1;
                randomItem.stock = Math.max(0, randomItem.stock - saleQuantity);
                randomItem.updatedAt = new Date().toISOString();
                
                // Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø³Ø¬Ù„ Ø§Ù„Ø­Ø±ÙƒØ§Øª
                if (!randomItem.movementHistory) {
                    randomItem.movementHistory = [];
                }
                randomItem.movementHistory.unshift({
                    date: new Date().toISOString(),
                    type: 'sale',
                    quantity: -saleQuantity,
                    reason: 'Ø¨ÙŠØ¹ ØªÙ„Ù‚Ø§Ø¦ÙŠ',
                    reference: `AUTO-${Date.now()}`,
                    cost: randomItem.cost,
                    location: 'main',
                    notes: 'Ø¨ÙŠØ¹ Ù…Ø­Ø§ÙƒØ§Ø©'
                });
                
                this.saveData();
                
                if (this.currentItem && this.currentItem.id === randomItem.id) {
                    this.showInventoryDetails(randomItem.id);
                }
                
                this.renderInventory();
                this.updateStats();
            }
        }
    }

    // ÙˆØ¸Ø§Ø¦Ù Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„ÙˆØ§Ø¬Ù‡Ø©
    editInventory() {
        if (!this.currentItem) return;
        this.showAddInventoryModal();
        // ÙŠÙ…ÙƒÙ† ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¨Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ø­Ø§Ù„ÙŠ Ù‡Ù†Ø§
    }

    transferInventory() {
        if (!this.currentItem) return;
        alert(`Ø³ÙŠØªÙ… ÙØªØ­ Ù†Ø§ÙØ°Ø© Ù†Ù‚Ù„ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ù„Ù„Ù…Ù†ØªØ¬: ${this.currentItem.name}`);
        // ØªÙ†ÙÙŠØ° Ù…Ù†Ø·Ù‚ Ù†Ù‚Ù„ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø¨ÙŠÙ† Ø§Ù„Ù…Ø®Ø§Ø²Ù†
    }

    adjustInventory() {
        if (!this.currentItem) return;
        this.quickAdjustStock(this.currentItem.id);
    }

    generateReport() {
        if (!this.currentItem) return;
        alert(`Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ù„Ù„Ù…Ù†ØªØ¬: ${this.currentItem.name}`);
        // ØªÙ†ÙÙŠØ° Ù…Ù†Ø·Ù‚ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
    }

    reorderProduct() {
        if (!this.currentItem) return;
        const quantity = prompt(`ÙƒÙ…ÙŠØ© Ø§Ù„Ø·Ù„Ø¨ Ù…Ù† Ø§Ù„Ù…ÙˆØ±Ø¯ Ù„Ù„Ù…Ù†ØªØ¬ ${this.currentItem.name}:`, this.currentItem.minStock * 2);
        if (quantity !== null && !isNaN(quantity) && quantity > 0) {
            this.showToast(`ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ Ø´Ø±Ø§Ø¡ Ù„Ù€ ${quantity} ÙˆØ­Ø¯Ø© Ù…Ù† ${this.currentItem.name}`);
        }
    }

    applyDiscount() {
        if (!this.currentItem) return;
        const discount = prompt(`Ù†Ø³Ø¨Ø© Ø§Ù„Ø®ØµÙ… Ù„Ù„Ù…Ù†ØªØ¬ ${this.currentItem.name} (%):`, '10');
        if (discount !== null && !isNaN(discount)) {
            this.showToast(`ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø®ØµÙ… ${discount}% Ø¹Ù„Ù‰ ${this.currentItem.name}`);
        }
    }

    promoteProduct() {
        if (!this.currentItem) return;
        this.showToast(`ØªÙ… Ø¨Ø¯Ø¡ Ø­Ù…Ù„Ø© ØªØ±ÙˆÙŠØ¬ÙŠØ© Ù„Ù„Ù…Ù†ØªØ¬ ${this.currentItem.name}`);
    }
}

// ØªÙ‡ÙŠØ¦Ø© Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
document.addEventListener('DOMContentLoaded', function() {
    window.inventory = new InventoryManagement();
});
</script>
</body>
</html>