<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PharmaHub - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Almarai:wght@400;700;800&family=Tajawal:wght@300;400;500;700;800;900&display=swap" rel="stylesheet">
    <style>
:root {
    /* Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© */
    --primary: #00897B;
    --primary-dark: #00695C;
    --primary-light: #B2DFDB;
    --secondary: #FFB300;
    --accent: #FF5252;
    --success: #4CAF50;
    --warning: #FF9800;
    --info: #2196F3;
    --danger: #F44336;

    /* Ø®Ù„ÙÙŠØ© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ */
    --bg-light: #E0F2F1;
    --bg-surface: #ffffff;
    --shadow-light: -6px -6px 12px rgba(255, 255, 255, 0.9), 6px 6px 12px rgba(0, 0, 0, 0.1);
    --shadow-inset: inset 3px 3px 6px rgba(0, 0, 0, 0.1), inset -3px -3px 6px rgba(255, 255, 255, 0.9);
    --shadow-card: 0 10px 30px rgba(0, 0, 0, 0.15);
    --text-primary: #1E293B;
    --text-secondary: #475569;

    /* Ø§Ù„Ø²ÙˆØ§ÙŠØ§ ÙˆØ§Ù„Ø§Ù†ØªÙ‚Ø§Ù„Ø§Øª */
    --radius-xl: 30px;
    --radius-lg: 20px;
    --radius-md: 16px;
    --radius-sm: 12px;
    --transition-liquid: all 0.35s cubic-bezier(0.25, 0.8, 0.25, 1);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Tajawal', sans-serif;
    -webkit-tap-highlight-color: transparent;
}

body {
    background: var(--bg-light);
    color: var(--text-primary);
    direction: rtl;
    overflow-x: hidden;
    min-height: 100vh;
}

/* Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
.ultra-app {
    max-width: 450px;
    min-height: 100vh;
    margin: 0 auto;
    background: var(--bg-light);
    position: relative;
    box-shadow: 0 0 40px rgba(0, 0, 0, 0.05);
    overflow-x: hidden;
    padding-bottom: 100px;
}

/* Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© */
.status-bar {
    background: transparent;
    color: var(--text-primary);
    padding: 10px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 14px;
    font-weight: 500;
    z-index: 1000;
}

/* Ø§Ù„Ù‡ÙŠØ¯Ø± */
.app-header {
    padding: 24px 20px 0;
}

.header-top {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
}

.title-section h1 {
    font-family: 'Almarai', sans-serif;
    font-size: 26px;
    font-weight: 800;
    color: var(--primary-dark);
    margin-bottom: 4px;
}

.title-section p {
    font-size: 14px;
    color: var(--text-secondary);
}

.order-actions {
    display: flex;
    gap: 10px;
}

.action-icon {
    background: var(--bg-light);
    box-shadow: var(--shadow-light);
    border: none;
    width: 48px;
    height: 48px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary);
    cursor: pointer;
    transition: var(--transition-liquid);
    position: relative;
    font-size: 18px;
}

.action-icon:active {
    box-shadow: var(--shadow-inset);
    color: var(--primary-dark);
}

/* Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« */
.search-bar {
    background: var(--bg-light);
    box-shadow: var(--shadow-inset);
    padding: 12px 20px;
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 16px;
}

.search-input {
    flex: 1;
    border: none;
    background: transparent;
    font-size: 16px;
    color: var(--text-primary);
    outline: none;
    padding: 0;
}

.search-icon {
    color: var(--text-secondary);
}

/* Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø© */
.stats-bar {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
    margin-bottom: 16px;
}

.stat-item {
    text-align: center;
    padding: 12px 8px;
    background: var(--bg-light);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-light);
    transition: var(--transition-liquid);
    cursor: pointer;
}

.stat-item:hover {
    box-shadow: var(--shadow-inset);
    transform: scale(0.98);
}

.stat-item.active {
    background: var(--primary);
    color: white;
}

.stat-item.active .stat-value,
.stat-item.active .stat-label {
    color: white;
}

.stat-value {
    font-family: 'Almarai', sans-serif;
    font-size: 16px;
    font-weight: 800;
    color: var(--primary-dark);
    margin-bottom: 4px;
}

.stat-label {
    font-size: 10px;
    opacity: 0.8;
}

/* Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª */
.tabs-section {
    padding: 0 20px;
    margin-bottom: 16px;
}

.tabs-header {
    display: flex;
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    padding: 8px;
    box-shadow: var(--shadow-light);
    overflow-x: auto;
    scrollbar-width: none;
}

.tabs-header::-webkit-scrollbar {
    display: none;
}

.tab-btn {
    flex: 1;
    background: none;
    border: none;
    padding: 12px 8px;
    border-radius: var(--radius-md);
    font-weight: 600;
    color: var(--text-secondary);
    cursor: pointer;
    transition: var(--transition-liquid);
    white-space: nowrap;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    font-size: 12px;
    min-width: 80px;
}

.tab-btn.active {
    background: var(--primary);
    color: white;
    box-shadow: var(--shadow-inset);
}

.tab-btn:hover {
    background: var(--primary-light);
    color: var(--primary-dark);
}

/* Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª */
.orders-management {
    padding: 0 20px;
}

/* Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª */
.toolbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding: 16px;
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
}

.view-options {
    display: flex;
    gap: 8px;
}

.view-option {
    background: var(--bg-light);
    box-shadow: var(--shadow-light);
    border: none;
    width: 40px;
    height: 40px;
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
    cursor: pointer;
    transition: var(--transition-liquid);
}

.view-option.active {
    background: var(--primary);
    color: white;
    box-shadow: var(--shadow-inset);
}

.view-option:hover {
    box-shadow: var(--shadow-inset);
}

.sort-options select {
    background: var(--bg-light);
    box-shadow: var(--shadow-light);
    border: none;
    padding: 10px 16px;
    border-radius: var(--radius-md);
    color: var(--text-primary);
    font-size: 14px;
    cursor: pointer;
    outline: none;
    transition: var(--transition-liquid);
}

.sort-options select:focus {
    box-shadow: var(--shadow-inset);
}

/* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø·Ù„Ø¨Ø§Øª */
.orders-container {
    margin-bottom: 20px;
}

/* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª */
.orders-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.order-card-list {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
    transition: var(--transition-liquid);
    cursor: pointer;
    padding: 16px;
    border-right: 4px solid var(--primary);
}

.order-card-list:hover {
    box-shadow: var(--shadow-inset);
    transform: translateX(-4px);
}

.order-header-list {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 12px;
}

.order-id-list {
    font-family: 'Almarai', sans-serif;
    font-size: 16px;
    font-weight: 800;
    color: var(--text-primary);
}

.order-date-list {
    font-size: 12px;
    color: var(--text-secondary);
}

.order-customer-list {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 8px;
}

.order-products-list {
    font-size: 12px;
    color: var(--text-secondary);
    margin-bottom: 8px;
    line-height: 1.4;
}

.order-footer-list {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 12px;
}

.order-amount-list {
    font-family: 'Almarai', sans-serif;
    font-size: 18px;
    font-weight: 800;
    color: var(--primary-dark);
}

.order-status-list {
    display: flex;
    gap: 8px;
    align-items: center;
}

.status-badge-list {
    padding: 6px 12px;
    border-radius: var(--radius-sm);
    font-size: 11px;
    font-weight: 700;
    color: white;
}

.status-badge-list.pending {
    background: var(--warning);
}

.status-badge-list.confirmed {
    background: var(--info);
}

.status-badge-list.processing {
    background: var(--primary);
}

.status-badge-list.shipped {
    background: var(--secondary);
}

.status-badge-list.delivered {
    background: var(--success);
}

.status-badge-list.cancelled {
    background: var(--danger);
}

.priority-badge-list {
    padding: 4px 8px;
    border-radius: var(--radius-sm);
    font-size: 10px;
    font-weight: 700;
    color: white;
}

.priority-badge-list.normal {
    background: var(--info);
}

.priority-badge-list.high {
    background: var(--warning);
}

.priority-badge-list.urgent {
    background: var(--danger);
}

/* Ø´Ø¨ÙƒØ© Ø§Ù„Ø·Ù„Ø¨Ø§Øª */
.orders-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
}

.order-card-grid {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
    transition: var(--transition-liquid);
    cursor: pointer;
    padding: 16px;
    position: relative;
    border-top: 4px solid var(--primary);
}

.order-card-grid:hover {
    box-shadow: var(--shadow-inset);
    transform: translateY(-2px);
}

.order-header-grid {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 12px;
}

.order-id-grid {
    font-family: 'Almarai', sans-serif;
    font-size: 14px;
    font-weight: 800;
    color: var(--text-primary);
}

.order-date-grid {
    font-size: 10px;
    color: var(--text-secondary);
}

.order-customer-grid {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 8px;
    height: 36px;
    overflow: hidden;
    line-height: 1.3;
}

.order-products-grid {
    font-size: 11px;
    color: var(--text-secondary);
    margin-bottom: 8px;
    line-height: 1.3;
    height: 32px;
    overflow: hidden;
}

.order-footer-grid {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 12px;
}

.order-amount-grid {
    font-family: 'Almarai', sans-serif;
    font-size: 16px;
    font-weight: 800;
    color: var(--primary-dark);
}

.order-status-grid {
    display: flex;
    flex-direction: column;
    gap: 4px;
    align-items: flex-end;
}

.status-badge-grid {
    padding: 4px 8px;
    border-radius: var(--radius-sm);
    font-size: 10px;
    font-weight: 700;
    color: white;
    text-align: center;
    min-width: 60px;
}

.status-badge-grid.pending {
    background: var(--warning);
}

.status-badge-grid.confirmed {
    background: var(--info);
}

.status-badge-grid.processing {
    background: var(--primary);
}

.status-badge-grid.shipped {
    background: var(--secondary);
}

.status-badge-grid.delivered {
    background: var(--success);
}

.status-badge-grid.cancelled {
    background: var(--danger);
}

.priority-badge-grid {
    padding: 2px 6px;
    border-radius: var(--radius-sm);
    font-size: 9px;
    font-weight: 700;
    color: white;
}

.priority-badge-grid.normal {
    background: var(--info);
}

.priority-badge-grid.high {
    background: var(--warning);
}

.priority-badge-grid.urgent {
    background: var(--danger);
}

/* Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ø§Ø¦Ù… */
.floating-action-btn {
    position: fixed;
    bottom: 100px;
    left: 30px;
    background: var(--primary);
    color: white;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    border: none;
    box-shadow: var(--shadow-card);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    cursor: pointer;
    transition: var(--transition-liquid);
    z-index: 1000;
}

.floating-action-btn:hover {
    transform: scale(1.1);
    box-shadow: 0 8px 25px rgba(0, 137, 123, 0.4);
}

.floating-action-btn:active {
    transform: scale(0.95);
}

/* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø³ÙÙ„ÙŠ */
.bottom-nav-dock {
    position: fixed;
    bottom: 25px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--bg-light);
    box-shadow: var(--shadow-light);
    display: flex;
    padding: 8px 10px;
    border-radius: var(--radius-xl);
    z-index: 1000;
    max-width: 360px;
    width: calc(100% - 40px);
    border: 1px solid rgba(255, 255, 255, 0.5);
}

.nav-item-dock {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 8px 0;
    border-radius: var(--radius-md);
    transition: var(--transition-liquid);
    flex: 1;
    position: relative;
    text-decoration: none;
    color: var(--text-secondary);
}

.nav-item-dock.active {
    color: var(--primary-dark);
}

.nav-item-dock.active .nav-icon-dock {
    background: var(--primary);
    color: white;
    box-shadow: 0 4px 15px rgba(0, 137, 123, 0.5);
    width: 44px;
    height: 44px;
    border-radius: 50%;
    transform: translateY(-10px);
    transition: var(--transition-liquid);
}

.nav-icon-dock {
    font-size: 20px;
    margin-bottom: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 44px;
    height: 44px;
    transition: var(--transition-liquid);
}

.nav-label {
    font-size: 10px;
    font-weight: 600;
    margin-top: 4px;
    transition: var(--transition-liquid);
}

.nav-item-dock.active .nav-label {
    font-weight: 800;
    color: var(--primary-dark);
}

/* Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.2);
    backdrop-filter: blur(10px);
    transition: opacity 0.3s ease-out;
    z-index: 2000;
}

.modal-content {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.4);
    box-shadow: var(--shadow-card);
    animation: modalSlideUp 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    border-radius: var(--radius-xl) var(--radius-xl) 0 0;
    max-height: 85vh;
    overflow-y: auto;
}

.modal-content.large-modal {
    max-height: 90vh;
}

.modal-content.small-modal {
    max-width: 400px;
    margin: 0 auto;
    top: 50%;
    bottom: auto;
    transform: translateY(-50%);
    border-radius: var(--radius-xl);
}

@keyframes modalSlideUp {
    from {opacity: 0; transform: translateY(100%);}
    to {opacity: 1; transform: translateY(0);}
}

.modal-header {
    background: var(--primary);
    color: white;
    padding: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-radius: var(--radius-xl) var(--radius-xl) 0 0;
    position: sticky;
    top: 0;
    z-index: 10;
}

.modal-header h2 {
    margin: 0;
    font-size: 20px;
}

.close {
    font-size: 24px;
    cursor: pointer;
}

.modal-body {
    padding: 20px;
}

/* Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø·Ù„Ø¨ */
.order-form {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.form-section {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    padding: 20px;
    box-shadow: var(--shadow-light);
}

.form-section h3 {
    margin-bottom: 16px;
    color: var(--primary-dark);
    font-size: 18px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.form-section h3::before {
    content: '';
    width: 4px;
    height: 20px;
    background: var(--primary);
    border-radius: 2px;
}

.form-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.form-group label {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 14px;
}

.form-group input,
.form-group select,
.form-group textarea {
    background: var(--bg-surface);
    border: 1px solid var(--primary-light);
    border-radius: var(--radius-md);
    padding: 12px 16px;
    font-size: 14px;
    color: var(--text-primary);
    transition: var(--transition-liquid);
    outline: none;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(0, 137, 123, 0.1);
}

.form-group textarea {
    resize: vertical;
    min-height: 60px;
}

/* Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª */
.products-selection {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.search-products {
    display: flex;
    gap: 12px;
    align-items: center;
}

.search-products .search-input {
    flex: 1;
    background: var(--bg-surface);
    border: 1px solid var(--primary-light);
    border-radius: var(--radius-md);
    padding: 12px 16px;
}

.products-list-selection {
    max-height: 200px;
    overflow-y: auto;
    background: var(--bg-surface);
    border-radius: var(--radius-md);
    border: 1px solid var(--primary-light);
    padding: 12px;
}

.product-item-selection {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px;
    border-bottom: 1px solid var(--primary-light);
    cursor: pointer;
    transition: var(--transition-liquid);
}

.product-item-selection:last-child {
    border-bottom: none;
}

.product-item-selection:hover {
    background: var(--primary-light);
    border-radius: var(--radius-sm);
}

.product-info-selection {
    flex: 1;
}

.product-name-selection {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.product-price-selection {
    font-size: 14px;
    color: var(--primary-dark);
    font-weight: 700;
}

.product-stock-selection {
    font-size: 12px;
    color: var(--text-secondary);
}

.add-product-btn {
    background: var(--primary);
    color: white;
    border: none;
    width: 32px;
    height: 32px;
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: var(--transition-liquid);
}

.add-product-btn:hover {
    background: var(--primary-dark);
    transform: scale(1.1);
}

.selected-products {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    padding: 16px;
    box-shadow: var(--shadow-light);
}

.selected-products h4 {
    margin-bottom: 12px;
    color: var(--primary-dark);
}

.selected-items {
    max-height: 200px;
    overflow-y: auto;
    margin-bottom: 16px;
}

.selected-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px;
    background: var(--bg-surface);
    border-radius: var(--radius-md);
    margin-bottom: 8px;
    border: 1px solid var(--primary-light);
}

.selected-item:last-child {
    margin-bottom: 0;
}

.item-info {
    flex: 1;
}

.item-name {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.item-details {
    display: flex;
    gap: 12px;
    font-size: 12px;
    color: var(--text-secondary);
}

.item-quantity {
    display: flex;
    align-items: center;
    gap: 8px;
}

.quantity-btn {
    background: var(--primary-light);
    border: none;
    width: 24px;
    height: 24px;
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: var(--transition-liquid);
}

.quantity-btn:hover {
    background: var(--primary);
    color: white;
}

.quantity-input {
    width: 40px;
    text-align: center;
    border: 1px solid var(--primary-light);
    border-radius: var(--radius-sm);
    padding: 4px;
}

.item-total {
    font-weight: 700;
    color: var(--primary-dark);
    min-width: 80px;
    text-align: left;
}

.remove-item-btn {
    background: var(--danger);
    color: white;
    border: none;
    width: 28px;
    height: 28px;
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: var(--transition-liquid);
}

.remove-item-btn:hover {
    background: #D32F2F;
    transform: scale(1.1);
}

.order-summary {
    background: var(--bg-surface);
    border-radius: var(--radius-md);
    padding: 16px;
    border: 1px solid var(--primary-light);
}

.summary-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid var(--primary-light);
}

.summary-row:last-child {
    border-bottom: none;
}

.summary-row.total {
    font-weight: 800;
    font-size: 16px;
    color: var(--primary-dark);
    border-top: 2px solid var(--primary);
    margin-top: 8px;
    padding-top: 12px;
}

/* Ø£Ø²Ø±Ø§Ø± */
.btn-neumorphism {
    padding: 12px 24px;
    border: none;
    border-radius: var(--radius-md);
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-liquid);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-size: 14px;
    background: var(--bg-light);
    box-shadow: var(--shadow-light);
    color: var(--primary);
}

.btn-neumorphism:active {
    box-shadow: var(--shadow-inset);
    transform: scale(0.95);
}

.btn-primary-neumorphism {
    background: var(--primary);
    box-shadow: 0 4px 15px rgba(0, 137, 123, 0.4);
    color: white;
}

.btn-primary-neumorphism:active {
    box-shadow: var(--shadow-inset);
    background: var(--primary-dark);
}

.btn-secondary-neumorphism {
    background: var(--secondary);
    box-shadow: 0 4px 15px rgba(255, 179, 0, 0.4);
    color: white;
}

.btn-secondary-neumorphism:active {
    box-shadow: var(--shadow-inset);
    background: #E6A200;
}

.btn-danger-neumorphism {
    background: var(--danger);
    box-shadow: 0 4px 15px rgba(244, 67, 54, 0.4);
    color: white;
}

.btn-danger-neumorphism:active {
    box-shadow: var(--shadow-inset);
    background: #D32F2F;
}

.form-actions {
    display: flex;
    gap: 12px;
    justify-content: flex-end;
    padding-top: 20px;
    border-top: 1px solid var(--primary-light);
}

/* ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ */
.order-details-tabs {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.tabs-header {
    display: flex;
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    padding: 8px;
    box-shadow: var(--shadow-light);
}

.tab-btn {
    flex: 1;
    background: none;
    border: none;
    padding: 12px 16px;
    border-radius: var(--radius-md);
    font-weight: 600;
    color: var(--text-secondary);
    cursor: pointer;
    transition: var(--transition-liquid);
}

.tab-btn.active {
    background: var(--primary);
    color: white;
    box-shadow: var(--shadow-inset);
}

.tab-btn:hover {
    background: var(--primary-light);
    color: var(--primary-dark);
}

.tabs-content {
    min-height: 400px;
}

.tab-pane {
    display: none;
}

.tab-pane.active {
    display: block;
}

/* Ø§Ù„Ù†Ø¸Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø© */
.order-overview {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.order-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    padding: 20px;
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
}

.order-info {
    flex: 1;
}

.order-info h3 {
    font-size: 22px;
    margin-bottom: 8px;
    color: var(--text-primary);
}

.order-meta {
    display: flex;
    gap: 16px;
    margin-bottom: 12px;
    flex-wrap: wrap;
}

.order-meta span {
    background: var(--primary-light);
    color: var(--primary-dark);
    padding: 4px 12px;
    border-radius: var(--radius-sm);
    font-size: 12px;
    font-weight: 600;
}

.order-status {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}

.status-badge,
.priority-badge,
.payment-badge {
    padding: 6px 12px;
    border-radius: var(--radius-sm);
    font-size: 12px;
    font-weight: 700;
    color: white;
}

.status-badge.pending {
    background: var(--warning);
}

.status-badge.confirmed {
    background: var(--info);
}

.status-badge.processing {
    background: var(--primary);
}

.status-badge.shipped {
    background: var(--secondary);
}

.status-badge.delivered {
    background: var(--success);
}

.status-badge.cancelled {
    background: var(--danger);
}

.priority-badge.normal {
    background: var(--info);
}

.priority-badge.high {
    background: var(--warning);
}

.priority-badge.urgent {
    background: var(--danger);
}

.payment-badge.pending {
    background: var(--warning);
}

.payment-badge.paid {
    background: var(--success);
}

.payment-badge.failed {
    background: var(--danger);
}

.payment-badge.refunded {
    background: var(--secondary);
}

.order-amount {
    text-align: center;
}

.amount-value {
    font-family: 'Almarai', sans-serif;
    font-size: 24px;
    font-weight: 800;
    color: var(--primary-dark);
    margin-bottom: 4px;
}

.amount-label {
    font-size: 12px;
    color: var(--text-secondary);
}

.order-specs-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
}

.spec-card {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
    transition: var(--transition-liquid);
    padding: 20px;
    display: flex;
    align-items: center;
    gap: 12px;
}

.spec-card:hover {
    box-shadow: var(--shadow-inset);
}

.spec-icon {
    width: 40px;
    height: 40px;
    background: var(--primary-light);
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary-dark);
    font-size: 16px;
}

.spec-info {
    flex: 1;
}

.spec-value {
    font-family: 'Almarai', sans-serif;
    font-size: 16px;
    font-weight: 800;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.spec-label {
    font-size: 12px;
    color: var(--text-secondary);
}

.order-details-section {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    padding: 20px;
    box-shadow: var(--shadow-light);
}

.order-details-section h4 {
    margin-bottom: 12px;
    color: var(--primary-dark);
    font-size: 16px;
}

/* Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø·Ù„Ø¨ */
.order-products-management {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.products-table {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
    overflow: hidden;
}

.table-header {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr 1fr;
    gap: 12px;
    padding: 16px;
    background: var(--primary);
    color: white;
    font-weight: 700;
    font-size: 14px;
}

.table-body {
    max-height: 300px;
    overflow-y: auto;
}

.table-row {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr 1fr;
    gap: 12px;
    padding: 16px;
    border-bottom: 1px solid var(--primary-light);
    align-items: center;
}

.table-row:last-child {
    border-bottom: none;
}

.col-product {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.product-name-table {
    font-weight: 600;
    color: var(--text-primary);
}

.product-code-table {
    font-size: 12px;
    color: var(--text-secondary);
}

.col-price,
.col-quantity,
.col-total {
    text-align: center;
    font-weight: 600;
    color: var(--text-primary);
}

.order-summary-detailed {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    padding: 20px;
    box-shadow: var(--shadow-light);
}

.order-summary-detailed .summary-row {
    padding: 8px 0;
    border-bottom: 1px solid var(--primary-light);
}

.order-summary-detailed .summary-row.total {
    font-size: 18px;
    border-top: 2px solid var(--primary);
    margin-top: 12px;
    padding-top: 12px;
}

/* ØªØªØ¨Ø¹ Ø§Ù„Ø´Ø­Ù† */
.order-tracking {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.tracking-steps {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.tracking-step {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 16px;
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
    transition: var(--transition-liquid);
    opacity: 0.6;
}

.tracking-step.active {
    opacity: 1;
    background: var(--primary-light);
    border-right: 4px solid var(--primary);
}

.tracking-step.completed {
    opacity: 1;
}

.step-icon {
    width: 40px;
    height: 40px;
    background: var(--primary);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 16px;
}

.tracking-step.completed .step-icon {
    background: var(--success);
}

.tracking-step.active .step-icon {
    background: var(--primary);
    box-shadow: 0 0 0 4px rgba(0, 137, 123, 0.2);
}

.step-info {
    flex: 1;
}

.step-title {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.step-date {
    font-size: 12px;
    color: var(--text-secondary);
}

.tracking-info {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    padding: 20px;
    box-shadow: var(--shadow-light);
}

.tracking-info h4 {
    margin-bottom: 16px;
    color: var(--primary-dark);
}

.tracking-details {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
}

.tracking-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px;
    background: var(--bg-surface);
    border-radius: var(--radius-md);
    border: 1px solid var(--primary-light);
}

.tracking-item span:first-child {
    font-weight: 600;
    color: var(--text-primary);
}

.tracking-item span:last-child {
    color: var(--text-secondary);
}

/* Ø³Ø¬Ù„ Ø§Ù„Ø·Ù„Ø¨ */
.order-history {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    padding: 20px;
    box-shadow: var(--shadow-light);
}

.history-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
    max-height: 300px;
    overflow-y: auto;
}

.history-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px;
    background: var(--bg-surface);
    border-radius: var(--radius-md);
    border-left: 4px solid var(--primary);
}

.history-action {
    font-weight: 600;
    color: var(--text-primary);
}

.history-details {
    display: flex;
    gap: 16px;
    font-size: 12px;
    color: var(--text-secondary);
}

.history-user {
    font-weight: 700;
    color: var(--primary-dark);
}

.history-date {
    font-size: 11px;
    color: var(--text-secondary);
    opacity: 0.7;
}

/* Ø£Ù‚Ø¯Ø§Ù… Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª */
.order-actions-footer {
    display: flex;
    gap: 12px;
    padding-top: 20px;
    border-top: 1px solid var(--primary-light);
    flex-wrap: wrap;
}

.order-actions-footer .btn-neumorphism {
    flex: 1;
    min-width: 120px;
}

/* ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© */
.status-update-form {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

/* Ø§Ù„ÙÙ„ØªØ±Ø© */
.filter-section {
    padding: 20px;
}

.filter-group {
    margin-bottom: 24px;
}

.filter-title {
    font-weight: 700;
    margin-bottom: 12px;
    color: var(--text-primary);
    font-size: 16px;
}

.filter-options {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.filter-option {
    display: flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
}

.filter-option input {
    margin: 0;
}

.price-range {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.price-inputs {
    display: flex;
    gap: 12px;
}

.price-input {
    flex: 1;
    padding: 12px 16px;
    border: 1px solid var(--primary-light);
    border-radius: var(--radius-md);
    background: var(--bg-light);
    font-size: 14px;
}

.filter-actions {
    display: flex;
    gap: 12px;
    margin-top: 24px;
}

/* Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
.loading-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
    padding: 40px 20px;
}

.loading-spinner {
    width: 40px;
    height: 40px;
    border: 4px solid var(--primary-light);
    border-top: 4px solid var(--primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø²ÙŠØ¯ */
.load-more-section {
    display: flex;
    justify-content: center;
    padding: 20px;
}

/* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø³ÙˆØ§Ø¦Ù„ */
.liquid-transition {
    transition: var(--transition-liquid);
}

/* Ø§Ù„ØªØ¬Ø§ÙˆØ¨ */
@media (max-width: 480px) {
    .stats-bar {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .orders-grid {
        grid-template-columns: 1fr;
    }
    
    .form-grid {
        grid-template-columns: 1fr;
    }
    
    .order-specs-grid {
        grid-template-columns: 1fr;
    }
    
    .tracking-details {
        grid-template-columns: 1fr;
    }
    
    .table-header,
    .table-row {
        grid-template-columns: 1fr;
        gap: 8px;
    }
    
    .order-actions-footer {
        flex-direction: column;
    }
    
    .order-actions-footer .btn-neumorphism {
        min-width: auto;
    }
    
    .tabs-header {
        flex-wrap: wrap;
    }
    
    .tab-btn {
        flex: 1;
        min-width: 80px;
        font-size: 11px;
    }
}

@media (max-width: 400px) {
    .order-header {
        flex-direction: column;
        gap: 16px;
        text-align: center;
    }
    
    .order-meta {
        justify-content: center;
    }
    
    .order-status {
        justify-content: center;
    }
    
    .stats-bar {
        grid-template-columns: repeat(3, 1fr);
    }
    
    .stat-value {
        font-size: 14px;
    }
    
    .stat-label {
        font-size: 9px;
    }
}
</style>
</head>
<body>
    <div class="ultra-app">
        <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© -->
        <div class="status-bar">
            <div class="status-left">
                <span id="currentTime">--:--</span>
            </div>
            <div class="status-right">
                <i class="fas fa-signal"></i>
                <i class="fas fa-wifi"></i>
                <i class="fas fa-battery-full"></i>
            </div>
        </div>

        <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
        <div class="app-header">
            <div class="header-top">
                <div class="title-section">
                    <h1>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª ğŸ›’</h1>
                    <p>Ø¥Ø¯Ø§Ø±Ø© ÙƒØ§Ù…Ù„Ø© Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙˆØ§Ù„Ø´Ø­Ù†</p>
                </div>
                <div class="order-actions">
                    <button class="action-icon liquid-transition" id="searchToggleBtn">
                        <i class="fas fa-search"></i>
                    </button>
                    <button class="action-icon liquid-transition" id="filterBtn">
                        <i class="fas fa-filter"></i>
                    </button>
                    <button class="action-icon liquid-transition" id="addOrderBtn">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </div>

            <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« -->
            <div class="search-bar" id="searchBar" style="display: none;">
                <i class="fas fa-search search-icon"></i>
                <input type="text" class="search-input" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨ØŒ Ø§Ù„Ø¹Ù…ÙŠÙ„ØŒ Ø£Ùˆ Ø§Ù„Ù…Ù†ØªØ¬..." id="searchInput">
                <button class="action-icon liquid-transition" onclick="orders.toggleSearch()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø© -->
            <div class="stats-bar">
                <div class="stat-item liquid-transition" onclick="orders.filterByStatus('all')">
                    <div class="stat-value" id="totalOrders">0</div>
                    <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
                </div>
                <div class="stat-item liquid-transition" onclick="orders.filterByStatus('pending')">
                    <div class="stat-value" id="pendingOrders">0</div>
                    <div class="stat-label">Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</div>
                </div>
                <div class="stat-item liquid-transition" onclick="orders.filterByStatus('processing')">
                    <div class="stat-value" id="processingOrders">0</div>
                    <div class="stat-label">Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©</div>
                </div>
                <div class="stat-item liquid-transition" onclick="orders.filterByStatus('shipped')">
                    <div class="stat-value" id="shippedOrders">0</div>
                    <div class="stat-label">ØªÙ… Ø§Ù„Ø´Ø­Ù†</div>
                </div>
                <div class="stat-item liquid-transition" onclick="orders.filterByStatus('delivered')">
                    <div class="stat-value" id="deliveredOrders">0</div>
                    <div class="stat-label">ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…</div>
                </div>
                <div class="stat-item liquid-transition" onclick="orders.filterByStatus('cancelled')">
                    <div class="stat-value" id="cancelledOrders">0</div>
                    <div class="stat-label">Ù…Ù„ØºÙŠØ©</div>
                </div>
            </div>
        </div>

        <!-- Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª -->
        <div class="tabs-section">
            <div class="tabs-header">
                <button class="tab-btn active" data-tab="all" onclick="orders.switchTab('all')">
                    <i class="fas fa-th-large"></i>
                    Ø§Ù„ÙƒÙ„
                </button>
                <button class="tab-btn" data-tab="today" onclick="orders.switchTab('today')">
                    <i class="fas fa-calendar-day"></i>
                    Ø§Ù„ÙŠÙˆÙ…
                </button>
                <button class="tab-btn" data-tab="urgent" onclick="orders.switchTab('urgent')">
                    <i class="fas fa-exclamation-circle"></i>
                    Ø¹Ø§Ø¬Ù„Ø©
                </button>
                <button class="tab-btn" data-tab="pending_payment" onclick="orders.switchTab('pending_payment')">
                    <i class="fas fa-money-bill-wave"></i>
                    Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¯ÙØ¹
                </button>
            </div>
        </div>

        <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª -->
        <div class="orders-management">
            <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª -->
            <div class="toolbar">
                <div class="view-options">
                    <button class="view-option active" data-view="list" onclick="orders.changeView('list')">
                        <i class="fas fa-list"></i>
                    </button>
                    <button class="view-option" data-view="grid" onclick="orders.changeView('grid')">
                        <i class="fas fa-th-large"></i>
                    </button>
                </div>
                <div class="sort-options">
                    <select id="sortSelect" onchange="orders.sortOrders()">
                        <option value="date_desc">Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹</option>
                        <option value="date_asc">Ø§Ù„Ø£Ù‚Ø¯Ù… Ø£ÙˆÙ„Ø§Ù‹</option>
                        <option value="amount_desc">Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù‚ÙŠÙ…Ø©</option>
                        <option value="amount_asc">Ø§Ù„Ø£Ù‚Ù„ Ù‚ÙŠÙ…Ø©</option>
                        <option value="customer_asc">Ø§Ù„Ø¹Ù…ÙŠÙ„ (Ø£-ÙŠ)</option>
                        <option value="customer_desc">Ø§Ù„Ø¹Ù…ÙŠÙ„ (ÙŠ-Ø£)</option>
                    </select>
                </div>
            </div>

            <!-- Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø·Ù„Ø¨Ø§Øª -->
            <div class="orders-container">
                <div class="orders-list" id="ordersList">
                    <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                </div>

                <div class="orders-grid" id="ordersGrid" style="display: none;">
                    <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                </div>
            </div>

            <!-- ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø²ÙŠØ¯ -->
            <div class="load-more-section">
                <button class="btn-neumorphism btn-primary-neumorphism" id="loadMoreBtn" onclick="orders.loadMore()">
                    <i class="fas fa-sync-alt"></i>
                    ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø²ÙŠØ¯
                </button>
            </div>
        </div>

        <!-- Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ø§Ø¦Ù… -->
        <button class="floating-action-btn liquid-transition" onclick="orders.showAddOrderModal()">
            <i class="fas fa-plus"></i>
        </button>

        <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø³ÙÙ„ÙŠ -->
        <div class="bottom-nav-dock">
            <a href="index.html" class="nav-item-dock">
                <div class="nav-icon-dock">
                    <i class="fas fa-home"></i>
                </div>
                <div class="nav-label">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
            </a>
            <a href="products.html" class="nav-item-dock">
                <div class="nav-icon-dock">
                    <i class="fas fa-pills"></i>
                </div>
                <div class="nav-label">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</div>
            </a>
            <a href="orders.html" class="nav-item-dock active">
                <div class="nav-icon-dock">
                    <i class="fas fa-shopping-cart"></i>
                </div>
                <div class="nav-label">Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
            </a>
            <a href="reports.html" class="nav-item-dock">
                <div class="nav-icon-dock">
                    <i class="fas fa-chart-bar"></i>
                </div>
                <div class="nav-label">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div>
            </a>
            <a href="profile.html" class="nav-item-dock">
                <div class="nav-icon-dock">
                    <i class="fas fa-user"></i>
                </div>
                <div class="nav-label">Ø­Ø³Ø§Ø¨ÙŠ</div>
            </a>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ -->
    <div id="orderFormModal" class="modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h2 id="orderFormTitle">Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯</h2>
                <span class="close" onclick="orders.closeOrderForm()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="orderForm" class="order-form">
                    <div class="form-section">
                        <h3>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="orderCustomer">Ø§Ù„Ø¹Ù…ÙŠÙ„ *</label>
                                <select id="orderCustomer" name="customer" required>
                                    <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="orderPhone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ *</label>
                                <input type="tel" id="orderPhone" name="phone" required>
                            </div>
                            <div class="form-group">
                                <label for="orderEmail">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                                <input type="email" id="orderEmail" name="email">
                            </div>
                            <div class="form-group">
                                <label for="orderAddress">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙˆØµÙŠÙ„ *</label>
                                <textarea id="orderAddress" name="address" rows="2" required></textarea>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="orderPriority">Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø·Ù„Ø¨</label>
                                <select id="orderPriority" name="priority">
                                    <option value="normal">Ø¹Ø§Ø¯ÙŠØ©</option>
                                    <option value="high">Ø¹Ø§Ù„ÙŠØ©</option>
                                    <option value="urgent">Ø¹Ø§Ø¬Ù„Ø©</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="orderPaymentMethod">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</label>
                                <select id="orderPaymentMethod" name="paymentMethod">
                                    <option value="cash">Ù†Ù‚Ø¯ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</option>
                                    <option value="card">Ø¨Ø·Ø§Ù‚Ø© Ø§Ø¦ØªÙ…Ø§Ù†</option>
                                    <option value="transfer">ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ</option>
                                    <option value="wallet">Ù…Ø­ÙØ¸Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="orderPaymentStatus">Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹</label>
                                <select id="orderPaymentStatus" name="paymentStatus">
                                    <option value="pending">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¯ÙØ¹</option>
                                    <option value="paid">Ù…Ø¯ÙÙˆØ¹</option>
                                    <option value="failed">ÙØ´Ù„ Ø§Ù„Ø¯ÙØ¹</option>
                                    <option value="refunded">ØªÙ… Ø§Ù„Ø§Ø³ØªØ±Ø¯Ø§Ø¯</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="orderStatus">Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨</label>
                                <select id="orderStatus" name="status">
                                    <option value="pending">Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</option>
                                    <option value="confirmed">ØªÙ… Ø§Ù„ØªØ£ÙƒÙŠØ¯</option>
                                    <option value="processing">Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©</option>
                                    <option value="shipped">ØªÙ… Ø§Ù„Ø´Ø­Ù†</option>
                                    <option value="delivered">ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…</option>
                                    <option value="cancelled">Ù…Ù„ØºÙŠ</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø·Ù„Ø¨</h3>
                        <div class="products-selection">
                            <div class="search-products">
                                <input type="text" id="productSearch" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬..." class="search-input">
                                <button type="button" class="btn-neumorphism" onclick="orders.searchProducts()">
                                    <i class="fas fa-search"></i>
                                </button>
                            </div>
                            <div class="products-list-selection" id="productsListSelection">
                                <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                            </div>
                            <div class="selected-products" id="selectedProducts">
                                <h4>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©</h4>
                                <div class="selected-items" id="selectedItems">
                                    <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                                </div>
                                <div class="order-summary">
                                    <div class="summary-row">
                                        <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ:</span>
                                        <span id="subtotalAmount">0.00 Ø±.Ø³</span>
                                    </div>
                                    <div class="summary-row">
                                        <span>Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¶Ø§ÙØ© (15%):</span>
                                        <span id="taxAmount">0.00 Ø±.Ø³</span>
                                    </div>
                                    <div class="summary-row">
                                        <span>Ø±Ø³ÙˆÙ… Ø§Ù„Ø´Ø­Ù†:</span>
                                        <span id="shippingAmount">0.00 Ø±.Ø³</span>
                                    </div>
                                    <div class="summary-row total">
                                        <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ:</span>
                                        <span id="totalAmount">0.00 Ø±.Ø³</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</h3>
                        <div class="form-group">
                            <label for="orderNotes">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø·Ù„Ø¨</label>
                            <textarea id="orderNotes" name="notes" rows="3" placeholder="Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ø­ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨..."></textarea>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-neumorphism" onclick="orders.closeOrderForm()">
                            Ø¥Ù„ØºØ§Ø¡
                        </button>
                        <button type="submit" class="btn-neumorphism btn-primary-neumorphism">
                            <i class="fas fa-save"></i>
                            Ø­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ -->
    <div id="orderDetailsModal" class="modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h2 id="orderDetailsTitle">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨</h2>
                <span class="close" onclick="orders.closeOrderDetails()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="order-details-tabs">
                    <div class="tabs-header">
                        <button class="tab-btn active" data-tab="overview">Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©</button>
                        <button class="tab-btn" data-tab="products">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</button>
                        <button class="tab-btn" data-tab="tracking">ØªØªØ¨Ø¹ Ø§Ù„Ø´Ø­Ù†</button>
                        <button class="tab-btn" data-tab="history">Ø§Ù„Ø³Ø¬Ù„</button>
                    </div>

                    <div class="tabs-content">
                        <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù†Ø¸Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø© -->
                        <div class="tab-pane active" id="overviewTab">
                            <div class="order-overview">
                                <div class="order-header">
                                    <div class="order-info">
                                        <h3 id="detailOrderId"></h3>
                                        <div class="order-meta">
                                            <span id="detailOrderDate"></span>
                                            <span id="detailOrderCustomer"></span>
                                            <span id="detailOrderPhone"></span>
                                        </div>
                                        <div class="order-status">
                                            <span class="status-badge" id="detailOrderStatus"></span>
                                            <span class="priority-badge" id="detailOrderPriority"></span>
                                            <span class="payment-badge" id="detailOrderPayment"></span>
                                        </div>
                                    </div>
                                    <div class="order-amount">
                                        <div class="amount-value" id="detailOrderAmount"></div>
                                        <div class="amount-label">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ</div>
                                    </div>
                                </div>

                                <div class="order-specs-grid">
                                    <div class="spec-card">
                                        <div class="spec-icon">
                                            <i class="fas fa-user"></i>
                                        </div>
                                        <div class="spec-info">
                                            <div class="spec-value" id="detailCustomerName"></div>
                                            <div class="spec-label">Ø§Ù„Ø¹Ù…ÙŠÙ„</div>
                                        </div>
                                    </div>
                                    <div class="spec-card">
                                        <div class="spec-icon">
                                            <i class="fas fa-phone"></i>
                                        </div>
                                        <div class="spec-info">
                                            <div class="spec-value" id="detailCustomerPhone"></div>
                                            <div class="spec-label">Ø§Ù„Ù‡Ø§ØªÙ</div>
                                        </div>
                                    </div>
                                    <div class="spec-card">
                                        <div class="spec-icon">
                                            <i class="fas fa-map-marker-alt"></i>
                                        </div>
                                        <div class="spec-info">
                                            <div class="spec-value" id="detailDeliveryArea"></div>
                                            <div class="spec-label">Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªÙˆØµÙŠÙ„</div>
                                        </div>
                                    </div>
                                    <div class="spec-card">
                                        <div class="spec-icon">
                                            <i class="fas fa-truck"></i>
                                        </div>
                                        <div class="spec-info">
                                            <div class="spec-value" id="detailShippingMethod"></div>
                                            <div class="spec-label">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø´Ø­Ù†</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="order-details-section">
                                    <h4>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙˆØµÙŠÙ„</h4>
                                    <p id="detailShippingAddress"></p>
                                </div>

                                <div class="order-details-section">
                                    <h4>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø·Ù„Ø¨</h4>
                                    <p id="detailOrderNotes"></p>
                                </div>
                            </div>
                        </div>

                        <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
                        <div class="tab-pane" id="productsTab">
                            <div class="order-products-management">
                                <div class="products-table">
                                    <div class="table-header">
                                        <div class="col-product">Ø§Ù„Ù…Ù†ØªØ¬</div>
                                        <div class="col-price">Ø§Ù„Ø³Ø¹Ø±</div>
                                        <div class="col-quantity">Ø§Ù„ÙƒÙ…ÙŠØ©</div>
                                        <div class="col-total">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</div>
                                    </div>
                                    <div class="table-body" id="orderProductsList">
                                        <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                                    </div>
                                </div>
                                
                                <div class="order-summary-detailed">
                                    <div class="summary-row">
                                        <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ:</span>
                                        <span id="detailSubtotal">0.00 Ø±.Ø³</span>
                                    </div>
                                    <div class="summary-row">
                                        <span>Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¶Ø§ÙØ©:</span>
                                        <span id="detailTax">0.00 Ø±.Ø³</span>
                                    </div>
                                    <div class="summary-row">
                                        <span>Ø±Ø³ÙˆÙ… Ø§Ù„Ø´Ø­Ù†:</span>
                                        <span id="detailShipping">0.00 Ø±.Ø³</span>
                                    </div>
                                    <div class="summary-row">
                                        <span>Ø§Ù„Ø®ØµÙ…:</span>
                                        <span id="detailDiscount">0.00 Ø±.Ø³</span>
                                    </div>
                                    <div class="summary-row total">
                                        <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ:</span>
                                        <span id="detailTotal">0.00 Ø±.Ø³</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ØªØ¨ÙˆÙŠØ¨ ØªØªØ¨Ø¹ Ø§Ù„Ø´Ø­Ù† -->
                        <div class="tab-pane" id="trackingTab">
                            <div class="order-tracking">
                                <div class="tracking-steps">
                                    <div class="tracking-step active">
                                        <div class="step-icon">
                                            <i class="fas fa-shopping-cart"></i>
                                        </div>
                                        <div class="step-info">
                                            <div class="step-title">ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</div>
                                            <div class="step-date" id="stepOrdered"></div>
                                        </div>
                                    </div>
                                    <div class="tracking-step" id="stepConfirmed">
                                        <div class="step-icon">
                                            <i class="fas fa-check-circle"></i>
                                        </div>
                                        <div class="step-info">
                                            <div class="step-title">ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨</div>
                                            <div class="step-date"></div>
                                        </div>
                                    </div>
                                    <div class="tracking-step" id="stepProcessing">
                                        <div class="step-icon">
                                            <i class="fas fa-cog"></i>
                                        </div>
                                        <div class="step-info">
                                            <div class="step-title">Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©</div>
                                            <div class="step-date"></div>
                                        </div>
                                    </div>
                                    <div class="tracking-step" id="stepShipped">
                                        <div class="step-icon">
                                            <i class="fas fa-shipping-fast"></i>
                                        </div>
                                        <div class="step-info">
                                            <div class="step-title">ØªÙ… Ø§Ù„Ø´Ø­Ù†</div>
                                            <div class="step-date"></div>
                                        </div>
                                    </div>
                                    <div class="tracking-step" id="stepDelivered">
                                        <div class="step-icon">
                                            <i class="fas fa-home"></i>
                                        </div>
                                        <div class="step-info">
                                            <div class="step-title">ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…</div>
                                            <div class="step-date"></div>
                                        </div>
                                    </div>
                                </div>

                                <div class="tracking-info">
                                    <h4>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø­Ù†</h4>
                                    <div class="tracking-details">
                                        <div class="tracking-item">
                                            <span>Ø´Ø±ÙƒØ© Ø§Ù„Ø´Ø­Ù†:</span>
                                            <span id="trackingCompany">-</span>
                                        </div>
                                        <div class="tracking-item">
                                            <span>Ø±Ù‚Ù… Ø§Ù„ØªØªØ¨Ø¹:</span>
                                            <span id="trackingNumber">-</span>
                                        </div>
                                        <div class="tracking-item">
                                            <span>Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ Ù„Ù„ØªØ³Ù„ÙŠÙ…:</span>
                                            <span id="estimatedDelivery">-</span>
                                        </div>
                                        <div class="tracking-item">
                                            <span>Ø³Ø§Ø¦Ù‚ Ø§Ù„ØªÙˆØµÙŠÙ„:</span>
                                            <span id="deliveryDriver">-</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø³Ø¬Ù„ -->
                        <div class="tab-pane" id="historyTab">
                            <div class="order-history">
                                <div class="history-list" id="orderHistoryList">
                                    <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="order-actions-footer">
                    <button class="btn-neumorphism" onclick="orders.editOrder()">
                        <i class="fas fa-edit"></i>
                        ØªØ¹Ø¯ÙŠÙ„
                    </button>
                    <button class="btn-neumorphism btn-secondary-neumorphism" onclick="orders.updateOrderStatus()">
                        <i class="fas fa-sync-alt"></i>
                        ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©
                    </button>
                    <button class="btn-neumorphism btn-danger-neumorphism" onclick="orders.cancelOrder()">
                        <i class="fas fa-times"></i>
                        Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨
                    </button>
                    <button class="btn-neumorphism btn-primary-neumorphism" onclick="orders.printOrder()">
                        <i class="fas fa-print"></i>
                        Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ -->
    <div id="statusUpdateModal" class="modal">
        <div class="modal-content small-modal">
            <div class="modal-header">
                <h2>ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨</h2>
                <span class="close" onclick="orders.closeStatusUpdate()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="status-update-form">
                    <div class="form-group">
                        <label for="newOrderStatus">Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</label>
                        <select id="newOrderStatus">
                            <option value="pending">Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</option>
                            <option value="confirmed">ØªÙ… Ø§Ù„ØªØ£ÙƒÙŠØ¯</option>
                            <option value="processing">Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©</option>
                            <option value="shipped">ØªÙ… Ø§Ù„Ø´Ø­Ù†</option>
                            <option value="delivered">ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…</option>
                            <option value="cancelled">Ù…Ù„ØºÙŠ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="statusNotes">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>
                        <textarea id="statusNotes" rows="3" placeholder="Ø£Ø¶Ù Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø­ÙˆÙ„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©..."></textarea>
                    </div>
                    <div class="form-actions">
                        <button class="btn-neumorphism" onclick="orders.closeStatusUpdate()">
                            Ø¥Ù„ØºØ§Ø¡
                        </button>
                        <button class="btn-neumorphism btn-primary-neumorphism" onclick="orders.confirmStatusUpdate()">
                            <i class="fas fa-check"></i>
                            ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ­Ø¯ÙŠØ«
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„ÙÙ„ØªØ±Ø© -->
    <div id="filterModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ØªØµÙÙŠØ© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h2>
                <span class="close" onclick="orders.closeFilter()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="filter-section">
                    <div class="filter-group">
                        <div class="filter-title">Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨</div>
                        <div class="filter-options">
                            <label class="filter-option">
                                <input type="checkbox" name="status" value="pending" checked>
                                <span>Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</span>
                            </label>
                            <label class="filter-option">
                                <input type="checkbox" name="status" value="confirmed">
                                <span>ØªÙ… Ø§Ù„ØªØ£ÙƒÙŠØ¯</span>
                            </label>
                            <label class="filter-option">
                                <input type="checkbox" name="status" value="processing">
                                <span>Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©</span>
                            </label>
                            <label class="filter-option">
                                <input type="checkbox" name="status" value="shipped">
                                <span>ØªÙ… Ø§Ù„Ø´Ø­Ù†</span>
                            </label>
                            <label class="filter-option">
                                <input type="checkbox" name="status" value="delivered">
                                <span>ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…</span>
                            </label>
                            <label class="filter-option">
                                <input type="checkbox" name="status" value="cancelled">
                                <span>Ù…Ù„ØºÙŠØ©</span>
                            </label>
                        </div>
                    </div>

                    <div class="filter-group">
                        <div class="filter-title">Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹</div>
                        <div class="filter-options">
                            <label class="filter-option">
                                <input type="checkbox" name="payment" value="pending" checked>
                                <span>Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¯ÙØ¹</span>
                            </label>
                            <label class="filter-option">
                                <input type="checkbox" name="payment" value="paid">
                                <span>Ù…Ø¯ÙÙˆØ¹</span>
                            </label>
                            <label class="filter-option">
                                <input type="checkbox" name="payment" value="failed">
                                <span>ÙØ´Ù„ Ø§Ù„Ø¯ÙØ¹</span>
                            </label>
                            <label class="filter-option">
                                <input type="checkbox" name="payment" value="refunded">
                                <span>ØªÙ… Ø§Ù„Ø§Ø³ØªØ±Ø¯Ø§Ø¯</span>
                            </label>
                        </div>
                    </div>

                    <div class="filter-group">
                        <div class="filter-title">Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©</div>
                        <div class="filter-options">
                            <label class="filter-option">
                                <input type="radio" name="period" value="today" checked>
                                <span>Ø§Ù„ÙŠÙˆÙ…</span>
                            </label>
                            <label class="filter-option">
                                <input type="radio" name="period" value="week">
                                <span>Ø£Ø®Ø± 7 Ø£ÙŠØ§Ù…</span>
                            </label>
                            <label class="filter-option">
                                <input type="radio" name="period" value="month">
                                <span>Ø£Ø®Ø± 30 ÙŠÙˆÙ…</span>
                            </label>
                            <label class="filter-option">
                                <input type="radio" name="period" value="all">
                                <span>ÙƒÙ„ Ø§Ù„ÙØªØ±Ø§Øª</span>
                            </label>
                        </div>
                    </div>

                    <div class="filter-group">
                        <div class="filter-title">Ù†Ø·Ø§Ù‚ Ø§Ù„Ø³Ø¹Ø±</div>
                        <div class="price-range">
                            <div class="price-inputs">
                                <input type="number" class="price-input" id="filterMinAmount" placeholder="Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰" value="0">
                                <input type="number" class="price-input" id="filterMaxAmount" placeholder="Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰" value="10000">
                            </div>
                        </div>
                    </div>

                    <div class="filter-actions">
                        <button class="btn-neumorphism" onclick="orders.resetFilters()">
                            Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†
                        </button>
                        <button class="btn-neumorphism btn-primary-neumorphism" onclick="orders.applyFilters()">
                            ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„ØªØ±Ø©
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
    <div id="loadingModal" class="modal">
        <div class="modal-content small-modal">
            <div class="loading-content">
                <div class="loading-spinner"></div>
                <p>Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...</p>
            </div>
        </div>
    </div>

    <script>
// Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„
class OrdersManagement {
    constructor() {
        this.orders = [];
        this.customers = [];
        this.products = [];
        this.filteredOrders = [];
        this.currentOrder = null;
        this.currentView = 'list';
        this.visibleOrders = 10;
        this.currentFilters = {
            status: ['pending', 'confirmed', 'processing', 'shipped'],
            payment: ['pending', 'paid'],
            period: 'today',
            minAmount: 0,
            maxAmount: 10000
        };
        this.sortBy = 'date_desc';
        this.selectedProducts = [];
        this.init();
    }

    init() {
        this.loadData();
        this.setupEventListeners();
        this.renderOrders();
        this.updateStats();
        this.setupRealTimeUpdates();
        this.updateTime();
    }

    loadData() {
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† localStorage Ø£Ùˆ API
        const savedOrders = localStorage.getItem('pharma_orders_management');
        const savedCustomers = localStorage.getItem('pharma_customers');
        const savedProducts = localStorage.getItem('pharma_products_management');

        if (savedOrders) {
            this.orders = JSON.parse(savedOrders);
        } else {
            this.orders = this.getDefaultOrders();
        }

        if (savedCustomers) {
            this.customers = JSON.parse(savedCustomers);
        } else {
            this.customers = this.getDefaultCustomers();
        }

        if (savedProducts) {
            this.products = JSON.parse(savedProducts);
        } else {
            this.products = this.getDefaultProducts();
        }

        this.filteredOrders = [...this.orders];
        this.applyFilters();
        this.saveData();
    }

    getDefaultOrders() {
        return [
            {
                id: 'ORD-001',
                customerId: 1,
                customerName: 'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯',
                phone: '+966501234567',
                email: 'ahmed@example.com',
                address: 'Ø­ÙŠ Ø§Ù„Ù†Ø®ÙŠÙ„ØŒ Ø´Ø§Ø±Ø¹ Ø§Ù„Ù…Ù„Ùƒ ÙÙ‡Ø¯ØŒ Ø§Ù„Ø±ÙŠØ§Ø¶ 12345',
                products: [
                    { id: 1, name: 'Ø¨Ø§Ø±Ø§Ø³ÙŠØªØ§Ù…ÙˆÙ„ 500 Ù…Ø¬Ù…', code: 'PARA-500', price: 15.00, quantity: 2, total: 30.00 },
                    { id: 2, name: 'ÙÙŠØªØ§Ù…ÙŠÙ† Ø³ÙŠ 1000 Ù…Ø¬Ù…', code: 'VITC-1000', price: 45.00, quantity: 1, total: 45.00 }
                ],
                subtotal: 75.00,
                tax: 11.25,
                shipping: 15.00,
                discount: 0.00,
                total: 101.25,
                status: 'pending',
                priority: 'normal',
                paymentMethod: 'cash',
                paymentStatus: 'pending',
                notes: 'Ø§Ù„ØªÙˆØµÙŠÙ„ Ù‚Ø¨Ù„ Ø§Ù„Ø³Ø§Ø¹Ø© 6 Ù…Ø³Ø§Ø¡Ù‹',
                createdAt: '2024-01-15T10:30:00',
                updatedAt: '2024-01-15T10:30:00',
                history: [
                    { action: 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨', user: 'Ø§Ù„Ù†Ø¸Ø§Ù…', date: '2024-01-15T10:30:00' }
                ],
                tracking: {
                    company: 'Ø´Ø±ÙƒØ© Ø§Ù„Ø´Ø­Ù† Ø§Ù„Ø³Ø±ÙŠØ¹',
                    number: 'TRK-001',
                    estimatedDelivery: '2024-01-17',
                    driver: 'Ù…Ø­Ù…Ø¯ Ø£Ø­Ù…Ø¯',
                    steps: [
                        { step: 'ordered', date: '2024-01-15T10:30:00', completed: true },
                        { step: 'confirmed', date: null, completed: false },
                        { step: 'processing', date: null, completed: false },
                        { step: 'shipped', date: null, completed: false },
                        { step: 'delivered', date: null, completed: false }
                    ]
                }
            },
            {
                id: 'ORD-002',
                customerId: 2,
                customerName: 'ÙØ§Ø·Ù…Ø© Ø¹Ù„ÙŠ',
                phone: '+966502345678',
                email: 'fatima@example.com',
                address: 'Ø­ÙŠ Ø§Ù„Ø¹Ù„ÙŠØ§ØŒ Ø´Ø§Ø±Ø¹ Ø§Ù„ØªØ­Ù„ÙŠØ©ØŒ Ø¬Ø¯Ø© 23456',
                products: [
                    { id: 3, name: 'Ø£ÙˆÙ…ÙŠØºØ§ 3 ÙƒØ¨Ø³ÙˆÙ„Ø§Øª', code: 'OMEGA-1000', price: 75.00, quantity: 1, total: 75.00 },
                    { id: 6, name: 'Ù‚Ø·Ø±Ø© Ø§Ù„Ø¹ÙŠÙ† Ø§Ù„Ù…Ø±Ø·Ø¨Ø©', code: 'EYE-DROP', price: 28.00, quantity: 2, total: 56.00 }
                ],
                subtotal: 131.00,
                tax: 19.65,
                shipping: 20.00,
                discount: 10.00,
                total: 160.65,
                status: 'confirmed',
                priority: 'high',
                paymentMethod: 'card',
                paymentStatus: 'paid',
                notes: 'Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙŠÙØ¶Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ù‚Ø¨Ù„ Ø§Ù„ØªÙˆØµÙŠÙ„',
                createdAt: '2024-01-15T09:15:00',
                updatedAt: '2024-01-15T11:00:00',
                history: [
                    { action: 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨', user: 'Ø§Ù„Ù†Ø¸Ø§Ù…', date: '2024-01-15T09:15:00' },
                    { action: 'ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨', user: 'Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…', date: '2024-01-15T10:00:00' },
                    { action: 'ØªÙ… Ø§Ù„Ø¯ÙØ¹', user: 'Ø§Ù„Ù†Ø¸Ø§Ù…', date: '2024-01-15T11:00:00' }
                ],
                tracking: {
                    company: 'Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©',
                    number: 'TRK-002',
                    estimatedDelivery: '2024-01-16',
                    driver: 'Ø®Ø§Ù„Ø¯ Ù…Ø­Ù…Ø¯',
                    steps: [
                        { step: 'ordered', date: '2024-01-15T09:15:00', completed: true },
                        { step: 'confirmed', date: '2024-01-15T10:00:00', completed: true },
                        { step: 'processing', date: null, completed: false },
                        { step: 'shipped', date: null, completed: false },
                        { step: 'delivered', date: null, completed: false }
                    ]
                }
            },
            {
                id: 'ORD-003',
                customerId: 3,
                customerName: 'Ø®Ø§Ù„Ø¯ Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡',
                phone: '+966503456789',
                email: 'khaled@example.com',
                address: 'Ø­ÙŠ Ø§Ù„ØµØ­Ø§ÙØ©ØŒ Ø´Ø§Ø±Ø¹ Ø§Ù„Ø¹Ù„ÙŠØ§ Ø§Ù„Ø¹Ø§Ù…ØŒ Ø§Ù„Ø±ÙŠØ§Ø¶ 34567',
                products: [
                    { id: 4, name: 'ÙƒØ±ÙŠÙ… Ù‡ÙŠØ¯Ø±ÙˆÙƒÙˆØ±ØªÙŠØ²ÙˆÙ† 1%', code: 'HYDRO-1', price: 22.00, quantity: 1, total: 22.00 },
                    { id: 7, name: 'Ø´Ø±Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø§Ù„ Ù„Ù„Ø£Ø·ÙØ§Ù„', code: 'COUGH-SYRUP', price: 18.00, quantity: 1, total: 18.00 }
                ],
                subtotal: 40.00,
                tax: 6.00,
                shipping: 10.00,
                discount: 0.00,
                total: 56.00,
                status: 'processing',
                priority: 'normal',
                paymentMethod: 'cash',
                paymentStatus: 'pending',
                notes: '',
                createdAt: '2024-01-14T16:45:00',
                updatedAt: '2024-01-15T08:30:00',
                history: [
                    { action: 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨', user: 'Ø§Ù„Ù†Ø¸Ø§Ù…', date: '2024-01-14T16:45:00' },
                    { action: 'ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨', user: 'Ø³Ø§Ø±Ø©', date: '2024-01-14T17:30:00' },
                    { action: 'Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©', user: 'Ø§Ù„Ù…Ø®Ø²Ù†', date: '2024-01-15T08:30:00' }
                ],
                tracking: {
                    company: 'Ø´Ø±ÙƒØ© Ø§Ù„Ø´Ø­Ù† Ø§Ù„Ø³Ø±ÙŠØ¹',
                    number: 'TRK-003',
                    estimatedDelivery: '2024-01-16',
                    driver: 'Ø¹Ù„ÙŠ Ø­Ø³Ù†',
                    steps: [
                        { step: 'ordered', date: '2024-01-14T16:45:00', completed: true },
                        { step: 'confirmed', date: '2024-01-14T17:30:00', completed: true },
                        { step: 'processing', date: '2024-01-15T08:30:00', completed: true },
                        { step: 'shipped', date: null, completed: false },
                        { step: 'delivered', date: null, completed: false }
                    ]
                }
            },
            {
                id: 'ORD-004',
                customerId: 4,
                customerName: 'Ù†ÙˆØ±Ø© Ø§Ù„Ø³Ø¹Ø¯',
                phone: '+966504567890',
                email: 'nora@example.com',
                address: 'Ø­ÙŠ Ø§Ù„Ø±ÙˆØ¶Ø©ØŒ Ø´Ø§Ø±Ø¹ Ø§Ù„Ø£Ù…ÙŠØ± SultanØŒ Ø§Ù„Ø¯Ù…Ø§Ù… 45678',
                products: [
                    { id: 1, name: 'Ø¨Ø§Ø±Ø§Ø³ÙŠØªØ§Ù…ÙˆÙ„ 500 Ù…Ø¬Ù…', code: 'PARA-500', price: 15.00, quantity: 3, total: 45.00 },
                    { id: 2, name: 'ÙÙŠØªØ§Ù…ÙŠÙ† Ø³ÙŠ 1000 Ù…Ø¬Ù…', code: 'VITC-1000', price: 45.00, quantity: 2, total: 90.00 },
                    { id: 3, name: 'Ø£ÙˆÙ…ÙŠØºØ§ 3 ÙƒØ¨Ø³ÙˆÙ„Ø§Øª', code: 'OMEGA-1000', price: 75.00, quantity: 1, total: 75.00 }
                ],
                subtotal: 210.00,
                tax: 31.50,
                shipping: 25.00,
                discount: 15.00,
                total: 251.50,
                status: 'shipped',
                priority: 'urgent',
                paymentMethod: 'transfer',
                paymentStatus: 'paid',
                notes: 'Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙŠØ·Ù„Ø¨ ÙØ§ØªÙˆØ±Ø© Ø¶Ø±ÙŠØ¨ÙŠØ©',
                createdAt: '2024-01-14T14:20:00',
                updatedAt: '2024-01-15T09:15:00',
                history: [
                    { action: 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨', user: 'Ø§Ù„Ù†Ø¸Ø§Ù…', date: '2024-01-14T14:20:00' },
                    { action: 'ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨', user: 'Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…', date: '2024-01-14T15:00:00' },
                    { action: 'ØªÙ… Ø§Ù„Ø¯ÙØ¹', user: 'Ø§Ù„Ù†Ø¸Ø§Ù…', date: '2024-01-14T16:30:00' },
                    { action: 'Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©', user: 'Ø§Ù„Ù…Ø®Ø²Ù†', date: '2024-01-15T08:00:00' },
                    { action: 'ØªÙ… Ø§Ù„Ø´Ø­Ù†', user: 'Ø§Ù„Ø´Ø­Ù†', date: '2024-01-15T09:15:00' }
                ],
                tracking: {
                    company: 'Ø£Ø±Ø§Ù…ÙƒØ³',
                    number: 'TRK-004',
                    estimatedDelivery: '2024-01-16',
                    driver: 'ÙÙ‡Ø¯ Ù†Ø§ØµØ±',
                    steps: [
                        { step: 'ordered', date: '2024-01-14T14:20:00', completed: true },
                        { step: 'confirmed', date: '2024-01-14T15:00:00', completed: true },
                        { step: 'processing', date: '2024-01-15T08:00:00', completed: true },
                        { step: 'shipped', date: '2024-01-15T09:15:00', completed: true },
                        { step: 'delivered', date: null, completed: false }
                    ]
                }
            },
            {
                id: 'ORD-005',
                customerId: 5,
                customerName: 'Ù…Ø­Ù…Ø¯ Ø£Ø­Ù…Ø¯',
                phone: '+966505678901',
                email: 'mohammed@example.com',
                address: 'Ø­ÙŠ Ø§Ù„Ø´Ø±ÙÙŠØ©ØŒ Ø´Ø§Ø±Ø¹ Ø§Ù„Ù…Ù„Ùƒ AbdullahØŒ Ø¬Ø¯Ø© 56789',
                products: [
                    { id: 5, name: 'Ø£Ù…ÙˆÙƒØ³ÙŠØ³ÙŠÙ„ÙŠÙ† 500 Ù…Ø¬Ù…', code: 'AMOX-500', price: 35.00, quantity: 1, total: 35.00 },
                    { id: 6, name: 'Ù‚Ø·Ø±Ø© Ø§Ù„Ø¹ÙŠÙ† Ø§Ù„Ù…Ø±Ø·Ø¨Ø©', code: 'EYE-DROP', price: 28.00, quantity: 1, total: 28.00 }
                ],
                subtotal: 63.00,
                tax: 9.45,
                shipping: 12.00,
                discount: 0.00,
                total: 84.45,
                status: 'delivered',
                priority: 'normal',
                paymentMethod: 'cash',
                paymentStatus: 'paid',
                notes: 'ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ… Ù„Ù„Ø¹Ù…ÙŠÙ„ Ø´Ø®ØµÙŠØ§Ù‹',
                createdAt: '2024-01-13T11:00:00',
                updatedAt: '2024-01-14T16:00:00',
                history: [
                    { action: 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨', user: 'Ø§Ù„Ù†Ø¸Ø§Ù…', date: '2024-01-13T11:00:00' },
                    { action: 'ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨', user: 'Ø³Ø§Ø±Ø©', date: '2024-01-13T12:30:00' },
                    { action: 'Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©', user: 'Ø§Ù„Ù…Ø®Ø²Ù†', date: '2024-01-14T09:00:00' },
                    { action: 'ØªÙ… Ø§Ù„Ø´Ø­Ù†', user: 'Ø§Ù„Ø´Ø­Ù†', date: '2024-01-14T14:00:00' },
                    { action: 'ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…', user: 'Ø³Ø¹ÙŠØ¯', date: '2024-01-14T16:00:00' }
                ],
                tracking: {
                    company: 'Ø´Ø±ÙƒØ© Ø§Ù„Ø´Ø­Ù† Ø§Ù„Ø³Ø±ÙŠØ¹',
                    number: 'TRK-005',
                    estimatedDelivery: '2024-01-14',
                    driver: 'Ø³Ø¹ÙŠØ¯ Ù…Ø­Ù…Ø¯',
                    steps: [
                        { step: 'ordered', date: '2024-01-13T11:00:00', completed: true },
                        { step: 'confirmed', date: '2024-01-13T12:30:00', completed: true },
                        { step: 'processing', date: '2024-01-14T09:00:00', completed: true },
                        { step: 'shipped', date: '2024-01-14T14:00:00', completed: true },
                        { step: 'delivered', date: '2024-01-14T16:00:00', completed: true }
                    ]
                }
            },
            {
                id: 'ORD-006',
                customerId: 6,
                customerName: 'Ù„ÙŠÙ†Ø§ ÙØ§Ø±Ø³',
                phone: '+966506789012',
                email: 'lina@example.com',
                address: 'Ø­ÙŠ Ø§Ù„Ù…Ø±ÙˆØ¬ØŒ Ø´Ø§Ø±Ø¹ Ø§Ù„Ø®Ù„ÙŠØ¬ØŒ Ø§Ù„Ø®Ø¨Ø± 67890',
                products: [
                    { id: 7, name: 'Ø´Ø±Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø§Ù„ Ù„Ù„Ø£Ø·ÙØ§Ù„', code: 'COUGH-SYRUP', price: 18.00, quantity: 2, total: 36.00 }
                ],
                subtotal: 36.00,
                tax: 5.40,
                shipping: 10.00,
                discount: 0.00,
                total: 51.40,
                status: 'cancelled',
                priority: 'normal',
                paymentMethod: 'card',
                paymentStatus: 'refunded',
                notes: 'Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø·Ù„Ø¨ Ø§Ù„Ø¥Ù„ØºØ§Ø¡',
                createdAt: '2024-01-13T15:30:00',
                updatedAt: '2024-01-13T17:45:00',
                history: [
                    { action: 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨', user: 'Ø§Ù„Ù†Ø¸Ø§Ù…', date: '2024-01-13T15:30:00' },
                    { action: 'ØªÙ… Ø§Ù„Ø¯ÙØ¹', user: 'Ø§Ù„Ù†Ø¸Ø§Ù…', date: '2024-01-13T16:00:00' },
                    { action: 'ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨', user: 'Ù„ÙŠÙ†Ø§ ÙØ§Ø±Ø³', date: '2024-01-13T17:30:00' },
                    { action: 'ØªÙ… Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø¨Ù„Øº', user: 'Ø§Ù„Ù…Ø§Ù„ÙŠØ©', date: '2024-01-13T17:45:00' }
                ],
                tracking: {
                    company: '-',
                    number: '-',
                    estimatedDelivery: '-',
                    driver: '-',
                    steps: [
                        { step: 'ordered', date: '2024-01-13T15:30:00', completed: true },
                        { step: 'confirmed', date: null, completed: false },
                        { step: 'processing', date: null, completed: false },
                        { step: 'shipped', date: null, completed: false },
                        { step: 'delivered', date: null, completed: false }
                    ]
                }
            }
        ];
    }

    getDefaultCustomers() {
        return [
            { id: 1, name: 'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯', phone: '+966501234567', email: 'ahmed@example.com', address: 'Ø­ÙŠ Ø§Ù„Ù†Ø®ÙŠÙ„ØŒ Ø§Ù„Ø±ÙŠØ§Ø¶' },
            { id: 2, name: 'ÙØ§Ø·Ù…Ø© Ø¹Ù„ÙŠ', phone: '+966502345678', email: 'fatima@example.com', address: 'Ø­ÙŠ Ø§Ù„Ø¹Ù„ÙŠØ§ØŒ Ø¬Ø¯Ø©' },
            { id: 3, name: 'Ø®Ø§Ù„Ø¯ Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡', phone: '+966503456789', email: 'khaled@example.com', address: 'Ø­ÙŠ Ø§Ù„ØµØ­Ø§ÙØ©ØŒ Ø§Ù„Ø±ÙŠØ§Ø¶' },
            { id: 4, name: 'Ù†ÙˆØ±Ø© Ø§Ù„Ø³Ø¹Ø¯', phone: '+966504567890', email: 'nora@example.com', address: 'Ø­ÙŠ Ø§Ù„Ø±ÙˆØ¶Ø©ØŒ Ø§Ù„Ø¯Ù…Ø§Ù…' },
            { id: 5, name: 'Ù…Ø­Ù…Ø¯ Ø£Ø­Ù…Ø¯', phone: '+966505678901', email: 'mohammed@example.com', address: 'Ø­ÙŠ Ø§Ù„Ø´Ø±ÙÙŠØ©ØŒ Ø¬Ø¯Ø©' },
            { id: 6, name: 'Ù„ÙŠÙ†Ø§ ÙØ§Ø±Ø³', phone: '+966506789012', email: 'lina@example.com', address: 'Ø­ÙŠ Ø§Ù„Ù…Ø±ÙˆØ¬ØŒ Ø§Ù„Ø®Ø¨Ø±' },
            { id: 7, name: 'Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù† Ø³Ø§Ù„Ù…', phone: '+966507890123', email: 'abdo@example.com', address: 'Ø­ÙŠ Ø§Ù„Ù†Ø²Ù‡Ø©ØŒ Ø§Ù„Ø±ÙŠØ§Ø¶' },
            { id: 8, name: 'Ø³Ø§Ø±Ø© Ù†Ø§ØµØ±', phone: '+966508901234', email: 'sara@example.com', address: 'Ø­ÙŠ Ø§Ù„ÙŠØ§Ø³Ù…ÙŠÙ†ØŒ Ø¬Ø¯Ø©' }
        ];
    }

    getDefaultProducts() {
        return [
            { id: 1, name: 'Ø¨Ø§Ø±Ø§Ø³ÙŠØªØ§Ù…ÙˆÙ„ 500 Ù…Ø¬Ù…', code: 'PARA-500', price: 15.00, stock: 150 },
            { id: 2, name: 'ÙÙŠØªØ§Ù…ÙŠÙ† Ø³ÙŠ 1000 Ù…Ø¬Ù…', code: 'VITC-1000', price: 45.00, stock: 75 },
            { id: 3, name: 'Ø£ÙˆÙ…ÙŠØºØ§ 3 ÙƒØ¨Ø³ÙˆÙ„Ø§Øª', code: 'OMEGA-1000', price: 75.00, stock: 30 },
            { id: 4, name: 'ÙƒØ±ÙŠÙ… Ù‡ÙŠØ¯Ø±ÙˆÙƒÙˆØ±ØªÙŠØ²ÙˆÙ† 1%', code: 'HYDRO-1', price: 22.00, stock: 8 },
            { id: 5, name: 'Ø£Ù…ÙˆÙƒØ³ÙŠØ³ÙŠÙ„ÙŠÙ† 500 Ù…Ø¬Ù…', code: 'AMOX-500', price: 35.00, stock: 0 },
            { id: 6, name: 'Ù‚Ø·Ø±Ø© Ø§Ù„Ø¹ÙŠÙ† Ø§Ù„Ù…Ø±Ø·Ø¨Ø©', code: 'EYE-DROP', price: 28.00, stock: 45 },
            { id: 7, name: 'Ø´Ø±Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø§Ù„ Ù„Ù„Ø£Ø·ÙØ§Ù„', code: 'COUGH-SYRUP', price: 18.00, stock: 60 },
            { id: 8, name: 'Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø¶ØºØ·', code: 'BP-MED', price: 42.00, stock: 25 }
        ];
    }

    saveData() {
        localStorage.setItem('pharma_orders_management', JSON.stringify(this.orders));
        localStorage.setItem('pharma_customers', JSON.stringify(this.customers));
    }

    setupEventListeners() {
        // Ø²Ø± Ø§Ù„Ø¨Ø­Ø«
        const searchToggleBtn = document.getElementById('searchToggleBtn');
        if (searchToggleBtn) {
            searchToggleBtn.addEventListener('click', () => {
                this.toggleSearch();
            });
        }

        // Ø²Ø± Ø§Ù„ÙÙ„ØªØ±Ø©
        const filterBtn = document.getElementById('filterBtn');
        if (filterBtn) {
            filterBtn.addEventListener('click', () => {
                this.showFilter();
            });
        }

        // Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ©
        const addOrderBtn = document.getElementById('addOrderBtn');
        if (addOrderBtn) {
            addOrderBtn.addEventListener('click', () => {
                this.showAddOrderModal();
            });
        }

        // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
        const searchInput = document.getElementById('searchInput');
        if (searchInput) {
            searchInput.addEventListener('input', (e) => {
                this.searchOrders(e.target.value);
            });
        }

        // Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø·Ù„Ø¨
        const orderForm = document.getElementById('orderForm');
        if (orderForm) {
            orderForm.addEventListener('submit', (e) => {
                e.preventDefault();
                this.saveOrder();
            });
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª
        setInterval(() => {
            this.updateTime();
        }, 60000);

        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
        window.addEventListener('click', (e) => {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            });
        });

        // ØªØºÙŠÙŠØ± Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙÙŠ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
        const customerSelect = document.getElementById('orderCustomer');
        if (customerSelect) {
            customerSelect.addEventListener('change', (e) => {
                this.onCustomerChange(e.target.value);
            });
        }
    }

    updateTime() {
        const now = new Date();
        const timeString = now.toLocaleTimeString('ar-EG', { 
            hour: '2-digit', 
            minute: '2-digit',
            hour12: true 
        });
        const timeElement = document.getElementById('currentTime');
        if (timeElement) {
            timeElement.textContent = timeString;
        }
    }

    toggleSearch() {
        const searchBar = document.getElementById('searchBar');
        if (searchBar.style.display === 'none') {
            searchBar.style.display = 'flex';
            document.getElementById('searchInput').focus();
        } else {
            searchBar.style.display = 'none';
            document.getElementById('searchInput').value = '';
            this.searchOrders('');
        }
    }

    searchOrders(query) {
        if (query.trim() === '') {
            this.applyFilters();
        } else {
            const searchTerm = query.toLowerCase();
            this.filteredOrders = this.orders.filter(order => 
                order.id.toLowerCase().includes(searchTerm) ||
                order.customerName.toLowerCase().includes(searchTerm) ||
                order.phone.includes(searchTerm) ||
                order.products.some(p => p.name.toLowerCase().includes(searchTerm) || p.code.toLowerCase().includes(searchTerm))
            );
        }
        
        this.applySorting();
        this.renderOrders();
        this.updateStats();
    }

    filterByStatus(status) {
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ø´Ø·Ø©
        document.querySelectorAll('.stat-item').forEach(item => item.classList.remove('active'));
        event.target.closest('.stat-item').classList.add('active');

        if (status === 'all') {
            this.currentFilters.status = ['pending', 'confirmed', 'processing', 'shipped', 'delivered', 'cancelled'];
        } else {
            this.currentFilters.status = [status];
        }

        this.applyFilters();
    }

    applyFilters() {
        this.filteredOrders = this.orders.filter(order => {
            // ÙÙ„ØªØ±Ø© Ø§Ù„Ø­Ø§Ù„Ø©
            const statusMatch = this.currentFilters.status.includes(order.status);
            
            // ÙÙ„ØªØ±Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹
            const paymentMatch = this.currentFilters.payment.includes(order.paymentStatus);
            
            // ÙÙ„ØªØ±Ø© Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©
            const orderDate = new Date(order.createdAt);
            const now = new Date();
            let periodMatch = true;
            
            switch (this.currentFilters.period) {
                case 'today':
                    periodMatch = orderDate.toDateString() === now.toDateString();
                    break;
                case 'week':
                    const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
                    periodMatch = orderDate >= weekAgo;
                    break;
                case 'month':
                    const monthAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);
                    periodMatch = orderDate >= monthAgo;
                    break;
                case 'all':
                default:
                    periodMatch = true;
            }
            
            // ÙÙ„ØªØ±Ø© Ù†Ø·Ø§Ù‚ Ø§Ù„Ø³Ø¹Ø±
            const amountMatch = order.total >= this.currentFilters.minAmount && 
                              order.total <= this.currentFilters.maxAmount;

            return statusMatch && paymentMatch && periodMatch && amountMatch;
        });

        this.applySorting();
        this.renderOrders();
        this.updateStats();
    }

    applySorting() {
        switch (this.sortBy) {
            case 'date_desc':
                this.filteredOrders.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
                break;
            case 'date_asc':
                this.filteredOrders.sort((a, b) => new Date(a.createdAt) - new Date(b.createdAt));
                break;
            case 'amount_desc':
                this.filteredOrders.sort((a, b) => b.total - a.total);
                break;
            case 'amount_asc':
                this.filteredOrders.sort((a, b) => a.total - b.total);
                break;
            case 'customer_asc':
                this.filteredOrders.sort((a, b) => a.customerName.localeCompare(b.customerName));
                break;
            case 'customer_desc':
                this.filteredOrders.sort((a, b) => b.customerName.localeCompare(a.customerName));
                break;
        }
    }

    sortOrders() {
        const sortSelect = document.getElementById('sortSelect');
        this.sortBy = sortSelect.value;
        this.applySorting();
        this.renderOrders();
    }

    changeView(view) {
        this.currentView = view;
        
        // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¹Ø±Ø¶
        document.querySelectorAll('.view-option').forEach(btn => {
            btn.classList.remove('active');
            if (btn.dataset.view === view) {
                btn.classList.add('active');
            }
        });

        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶
        const listView = document.getElementById('ordersList');
        const gridView = document.getElementById('ordersGrid');
        
        if (view === 'list') {
            listView.style.display = 'flex';
            gridView.style.display = 'none';
        } else {
            listView.style.display = 'none';
            gridView.style.display = 'grid';
        }
    }

    switchTab(tabName) {
        // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ¨ÙˆÙŠØ¨
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.classList.remove('active');
            if (btn.dataset.tab === tabName) {
                btn.classList.add('active');
            }
        });

        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„ØªØ¨ÙˆÙŠØ¨
        switch (tabName) {
            case 'all':
                this.currentFilters.status = ['pending', 'confirmed', 'processing', 'shipped', 'delivered'];
                break;
            case 'today':
                this.currentFilters.period = 'today';
                break;
            case 'urgent':
                this.currentFilters.status = ['pending', 'confirmed', 'processing'];
                // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© ÙÙ„ØªØ±Ø© Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø¹Ø§Ø¬Ù„Ø©
                break;
            case 'pending_payment':
                this.currentFilters.payment = ['pending'];
                break;
        }

        this.applyFilters();
    }

    renderOrders() {
        this.renderOrdersList();
        this.renderOrdersGrid();
        this.updateLoadMoreButton();
    }

    renderOrdersList() {
        const ordersList = document.getElementById('ordersList');
        if (!ordersList) return;

        const ordersToShow = this.filteredOrders.slice(0, this.visibleOrders);
        
        let listHTML = '';
        ordersToShow.forEach(order => {
            const productsText = order.products.map(p => `${p.name} (${p.quantity})`).join('ØŒ ');
            
            listHTML += `
                <div class="order-card-list liquid-transition" onclick="orders.showOrderDetails('${order.id}')">
                    <div class="order-header-list">
                        <div class="order-id-list">${order.id}</div>
                        <div class="order-date-list">${this.formatDate(order.createdAt)}</div>
                    </div>
                    <div class="order-customer-list">${order.customerName}</div>
                    <div class="order-products-list">${productsText}</div>
                    <div class="order-footer-list">
                        <div class="order-amount-list">${order.total.toFixed(2)} Ø±.Ø³</div>
                        <div class="order-status-list">
                            <span class="status-badge-list ${order.status}">${this.getStatusText(order.status)}</span>
                            <span class="priority-badge-list ${order.priority}">${this.getPriorityText(order.priority)}</span>
                        </div>
                    </div>
                </div>
            `;
        });

        ordersList.innerHTML = listHTML || '<div style="text-align: center; padding: 40px; color: var(--text-secondary);">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª</div>';
    }

    renderOrdersGrid() {
        const ordersGrid = document.getElementById('ordersGrid');
        if (!ordersGrid) return;

        const ordersToShow = this.filteredOrders.slice(0, this.visibleOrders);
        
        let gridHTML = '';
        ordersToShow.forEach(order => {
            const productsText = order.products.slice(0, 2).map(p => p.name).join('ØŒ ');
            
            gridHTML += `
                <div class="order-card-grid liquid-transition" onclick="orders.showOrderDetails('${order.id}')">
                    <div class="order-header-grid">
                        <div class="order-id-grid">${order.id}</div>
                        <div class="order-date-grid">${this.formatDate(order.createdAt)}</div>
                    </div>
                    <div class="order-customer-grid">${order.customerName}</div>
                    <div class="order-products-grid">${productsText}</div>
                    <div class="order-footer-grid">
                        <div class="order-amount-grid">${order.total.toFixed(2)} Ø±.Ø³</div>
                        <div class="order-status-grid">
                            <span class="status-badge-grid ${order.status}">${this.getStatusText(order.status)}</span>
                            <span class="priority-badge-grid ${order.priority}">${this.getPriorityText(order.priority)}</span>
                        </div>
                    </div>
                </div>
            `;
        });

        ordersGrid.innerHTML = gridHTML || '<div style="text-align: center; padding: 40px; color: var(--text-secondary); grid-column: 1 / -1;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª</div>';
    }

    getStatusText(status) {
        const statusMap = {
            'pending': 'Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±',
            'confirmed': 'ØªÙ… Ø§Ù„ØªØ£ÙƒÙŠØ¯',
            'processing': 'Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©',
            'shipped': 'ØªÙ… Ø§Ù„Ø´Ø­Ù†',
            'delivered': 'ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…',
            'cancelled': 'Ù…Ù„ØºÙŠ'
        };
        return statusMap[status] || status;
    }

    getPriorityText(priority) {
        const priorityMap = {
            'normal': 'Ø¹Ø§Ø¯ÙŠØ©',
            'high': 'Ø¹Ø§Ù„ÙŠØ©',
            'urgent': 'Ø¹Ø§Ø¬Ù„Ø©'
        };
        return priorityMap[priority] || priority;
    }

    updateStats() {
        const totalOrders = this.orders.length;
        const pendingOrders = this.orders.filter(o => o.status === 'pending').length;
        const processingOrders = this.orders.filter(o => o.status === 'processing').length;
        const shippedOrders = this.orders.filter(o => o.status === 'shipped').length;
        const deliveredOrders = this.orders.filter(o => o.status === 'delivered').length;
        const cancelledOrders = this.orders.filter(o => o.status === 'cancelled').length;

        document.getElementById('totalOrders').textContent = totalOrders;
        document.getElementById('pendingOrders').textContent = pendingOrders;
        document.getElementById('processingOrders').textContent = processingOrders;
        document.getElementById('shippedOrders').textContent = shippedOrders;
        document.getElementById('deliveredOrders').textContent = deliveredOrders;
        document.getElementById('cancelledOrders').textContent = cancelledOrders;
    }

    updateLoadMoreButton() {
        const loadMoreBtn = document.getElementById('loadMoreBtn');
        if (loadMoreBtn) {
            if (this.visibleOrders >= this.filteredOrders.length) {
                loadMoreBtn.style.display = 'none';
            } else {
                loadMoreBtn.style.display = 'flex';
            }
        }
    }

    loadMore() {
        this.visibleOrders += 10;
        this.renderOrders();
    }

    showAddOrderModal() {
        this.currentOrder = null;
        this.selectedProducts = [];
        document.getElementById('orderFormTitle').textContent = 'Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯';
        document.getElementById('orderForm').reset();
        
        // ØªØ¹Ø¨Ø¦Ø© Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
        this.populateCustomerOptions();
        
        // ØªØ¹Ø¨Ø¦Ø© Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
        this.populateProductsList();
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù„Ø®Øµ
        this.updateOrderSummary();
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†Ø§ÙØ°Ø©
        document.getElementById('orderFormModal').style.display = 'block';
    }

    populateCustomerOptions() {
        const customerSelect = document.getElementById('orderCustomer');
        customerSelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„</option>';
        
        this.customers.forEach(customer => {
            const option = document.createElement('option');
            option.value = customer.id;
            option.textContent = `${customer.name} - ${customer.phone}`;
            customerSelect.appendChild(option);
        });
    }

    populateProductsList() {
        const productsList = document.getElementById('productsListSelection');
        let productsHTML = '';
        
        this.products.forEach(product => {
            if (product.stock > 0) {
                productsHTML += `
                    <div class="product-item-selection liquid-transition" onclick="orders.addProductToOrder(${product.id})">
                        <div class="product-info-selection">
                            <div class="product-name-selection">${product.name}</div>
                            <div class="product-price-selection">${product.price} Ø±.Ø³</div>
                            <div class="product-stock-selection">Ø§Ù„Ù…Ø®Ø²ÙˆÙ†: ${product.stock}</div>
                        </div>
                        <button class="add-product-btn" onclick="event.stopPropagation(); orders.addProductToOrder(${product.id})">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                `;
            }
        });
        
        productsList.innerHTML = productsHTML || '<div style="text-align: center; padding: 20px; color: var(--text-secondary);">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ù…ØªØ§Ø­Ø©</div>';
    }

    onCustomerChange(customerId) {
        const customer = this.customers.find(c => c.id == customerId);
        if (customer) {
            document.getElementById('orderPhone').value = customer.phone;
            document.getElementById('orderEmail').value = customer.email || '';
            document.getElementById('orderAddress').value = customer.address;
        }
    }

    addProductToOrder(productId) {
        const product = this.products.find(p => p.id == productId);
        if (!product) return;

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ø¶Ø§ÙØ§Ù‹ Ù…Ø³Ø¨Ù‚Ø§Ù‹
        const existingItem = this.selectedProducts.find(item => item.id == productId);
        if (existingItem) {
            existingItem.quantity += 1;
            existingItem.total = existingItem.price * existingItem.quantity;
        } else {
            this.selectedProducts.push({
                id: product.id,
                name: product.name,
                code: product.code,
                price: product.price,
                quantity: 1,
                total: product.price
            });
        }

        this.renderSelectedProducts();
        this.updateOrderSummary();
    }

    removeProductFromOrder(productId) {
        this.selectedProducts = this.selectedProducts.filter(item => item.id != productId);
        this.renderSelectedProducts();
        this.updateOrderSummary();
    }

    updateProductQuantity(productId, newQuantity) {
        const item = this.selectedProducts.find(item => item.id == productId);
        if (item && newQuantity > 0) {
            item.quantity = newQuantity;
            item.total = item.price * item.quantity;
            this.renderSelectedProducts();
            this.updateOrderSummary();
        }
    }

    renderSelectedProducts() {
        const selectedItems = document.getElementById('selectedItems');
        let itemsHTML = '';
        
        this.selectedProducts.forEach(item => {
            itemsHTML += `
                <div class="selected-item">
                    <div class="item-info">
                        <div class="item-name">${item.name}</div>
                        <div class="item-details">
                            <span>${item.price} Ø±.Ø³</span>
                            <span>${item.code}</span>
                        </div>
                    </div>
                    <div class="item-quantity">
                        <button class="quantity-btn" onclick="orders.updateProductQuantity(${item.id}, ${item.quantity - 1})">
                            <i class="fas fa-minus"></i>
                        </button>
                        <input type="number" class="quantity-input" value="${item.quantity}" 
                               onchange="orders.updateProductQuantity(${item.id}, parseInt(this.value))" min="1">
                        <button class="quantity-btn" onclick="orders.updateProductQuantity(${item.id}, ${item.quantity + 1})">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    <div class="item-total">${item.total.toFixed(2)} Ø±.Ø³</div>
                    <button class="remove-item-btn" onclick="orders.removeProductFromOrder(${item.id})">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
        });
        
        selectedItems.innerHTML = itemsHTML || '<div style="text-align: center; padding: 20px; color: var(--text-secondary);">Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ù…Ù†ØªØ¬Ø§Øª</div>';
    }

    updateOrderSummary() {
        const subtotal = this.selectedProducts.reduce((sum, item) => sum + item.total, 0);
        const tax = subtotal * 0.15; // Ø¶Ø±ÙŠØ¨Ø© 15%
        const shipping = subtotal > 200 ? 0 : 15; // Ø´Ø­Ù† Ù…Ø¬Ø§Ù†ÙŠ Ù„Ù„Ø·Ù„Ø¨Ø§Øª ÙÙˆÙ‚ 200 Ø±.Ø³
        const total = subtotal + tax + shipping;

        document.getElementById('subtotalAmount').textContent = `${subtotal.toFixed(2)} Ø±.Ø³`;
        document.getElementById('taxAmount').textContent = `${tax.toFixed(2)} Ø±.Ø³`;
        document.getElementById('shippingAmount').textContent = `${shipping.toFixed(2)} Ø±.Ø³`;
        document.getElementById('totalAmount').textContent = `${total.toFixed(2)} Ø±.Ø³`;
    }

    closeOrderForm() {
        document.getElementById('orderFormModal').style.display = 'none';
    }

    saveOrder() {
        if (this.selectedProducts.length === 0) {
            alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù„Ù„Ø·Ù„Ø¨');
            return;
        }

        const formData = new FormData(document.getElementById('orderForm'));
        const orderData = Object.fromEntries(formData);
        
        // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¨Ø§Ù„Øº
        const subtotal = this.selectedProducts.reduce((sum, item) => sum + item.total, 0);
        const tax = subtotal * 0.15;
        const shipping = subtotal > 200 ? 0 : 15;
        const total = subtotal + tax + shipping;

        const newOrder = {
            id: `ORD-${String(this.orders.length + 1).padStart(3, '0')}`,
            customerId: parseInt(orderData.customer),
            customerName: this.customers.find(c => c.id == orderData.customer)?.name || '',
            phone: orderData.phone,
            email: orderData.email,
            address: orderData.address,
            products: [...this.selectedProducts],
            subtotal: subtotal,
            tax: tax,
            shipping: shipping,
            discount: 0,
            total: total,
            status: orderData.status,
            priority: orderData.priority,
            paymentMethod: orderData.paymentMethod,
            paymentStatus: orderData.paymentStatus,
            notes: orderData.notes,
            createdAt: new Date().toISOString(),
            updatedAt: new Date().toISOString(),
            history: [
                { action: 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨', user: 'Ø§Ù„Ù†Ø¸Ø§Ù…', date: new Date().toISOString() }
            ],
            tracking: {
                company: 'Ø´Ø±ÙƒØ© Ø§Ù„Ø´Ø­Ù† Ø§Ù„Ø³Ø±ÙŠØ¹',
                number: `TRK-${String(this.orders.length + 1).padStart(3, '0')}`,
                estimatedDelivery: this.getEstimatedDeliveryDate(),
                driver: 'Ù‚ÙŠØ¯ Ø§Ù„ØªØ¹ÙŠÙŠÙ†',
                steps: [
                    { step: 'ordered', date: new Date().toISOString(), completed: true },
                    { step: 'confirmed', date: null, completed: false },
                    { step: 'processing', date: null, completed: false },
                    { step: 'shipped', date: null, completed: false },
                    { step: 'delivered', date: null, completed: false }
                ]
            }
        };

        this.orders.unshift(newOrder);
        this.saveData();
        this.filteredOrders = [...this.orders];
        this.applySorting();
        this.renderOrders();
        this.updateStats();
        this.closeOrderForm();
        
        this.showToast('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­');
    }

    getEstimatedDeliveryDate() {
        const deliveryDate = new Date();
        deliveryDate.setDate(deliveryDate.getDate() + 2); // ØªÙ‚Ø¯ÙŠØ± ÙŠÙˆÙ…ÙŠÙ† Ù„Ù„ØªÙˆØµÙŠÙ„
        return deliveryDate.toISOString().split('T')[0];
    }

    showOrderDetails(orderId) {
        const order = this.orders.find(o => o.id === orderId);
        if (!order) return;

        this.currentOrder = order;
        
        // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
        document.getElementById('detailOrderId').textContent = order.id;
        document.getElementById('detailOrderDate').textContent = this.formatDate(order.createdAt);
        document.getElementById('detailOrderCustomer').textContent = order.customerName;
        document.getElementById('detailOrderPhone').textContent = order.phone;
        document.getElementById('detailOrderAmount').textContent = `${order.total.toFixed(2)} Ø±.Ø³`;
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© ÙˆØ§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª
        const statusBadge = document.getElementById('detailOrderStatus');
        statusBadge.textContent = this.getStatusText(order.status);
        statusBadge.className = `status-badge ${order.status}`;
        
        const priorityBadge = document.getElementById('detailOrderPriority');
        priorityBadge.textContent = this.getPriorityText(order.priority);
        priorityBadge.className = `priority-badge ${order.priority}`;
        
        const paymentBadge = document.getElementById('detailOrderPayment');
        paymentBadge.textContent = this.getPaymentStatusText(order.paymentStatus);
        paymentBadge.className = `payment-badge ${order.paymentStatus}`;
        
        // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©
        document.getElementById('detailCustomerName').textContent = order.customerName;
        document.getElementById('detailCustomerPhone').textContent = order.phone;
        document.getElementById('detailDeliveryArea').textContent = this.getAreaFromAddress(order.address);
        document.getElementById('detailShippingMethod').textContent = this.getShippingMethodText(order.shipping);
        document.getElementById('detailShippingAddress').textContent = order.address;
        document.getElementById('detailOrderNotes').textContent = order.notes || 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª';
        
        // ØªØ¹Ø¨Ø¦Ø© ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
        this.populateOrderProducts(order);
        
        // ØªØ¹Ø¨Ø¦Ø© ØªØ¨ÙˆÙŠØ¨ ØªØªØ¨Ø¹ Ø§Ù„Ø´Ø­Ù†
        this.populateOrderTracking(order);
        
        // ØªØ¹Ø¨Ø¦Ø© ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø³Ø¬Ù„
        this.populateOrderHistory(order);
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†Ø§ÙØ°Ø©
        document.getElementById('orderDetailsModal').style.display = 'block';
    }

    getPaymentStatusText(status) {
        const statusMap = {
            'pending': 'Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¯ÙØ¹',
            'paid': 'Ù…Ø¯ÙÙˆØ¹',
            'failed': 'ÙØ´Ù„ Ø§Ù„Ø¯ÙØ¹',
            'refunded': 'ØªÙ… Ø§Ù„Ø§Ø³ØªØ±Ø¯Ø§Ø¯'
        };
        return statusMap[status] || status;
    }

    getAreaFromAddress(address) {
        // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ù…Ù† Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (Ù…Ø­Ø§ÙƒØ§Ø©)
        if (address.includes('Ø§Ù„Ø±ÙŠØ§Ø¶')) return 'Ø§Ù„Ø±ÙŠØ§Ø¶';
        if (address.includes('Ø¬Ø¯Ø©')) return 'Ø¬Ø¯Ø©';
        if (address.includes('Ø§Ù„Ø¯Ù…Ø§Ù…')) return 'Ø§Ù„Ø¯Ù…Ø§Ù…';
        if (address.includes('Ø§Ù„Ø®Ø¨Ø±')) return 'Ø§Ù„Ø®Ø¨Ø±';
        return 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
    }

    getShippingMethodText(shippingCost) {
        return shippingCost === 0 ? 'Ø´Ø­Ù† Ù…Ø¬Ø§Ù†ÙŠ' : 'Ø´Ø­Ù† Ø¹Ø§Ø¯ÙŠ';
    }

    populateOrderProducts(order) {
        const productsList = document.getElementById('orderProductsList');
        let productsHTML = '';
        
        order.products.forEach(product => {
            productsHTML += `
                <div class="table-row">
                    <div class="col-product">
                        <div class="product-name-table">${product.name}</div>
                        <div class="product-code-table">${product.code}</div>
                    </div>
                    <div class="col-price">${product.price} Ø±.Ø³</div>
                    <div class="col-quantity">${product.quantity}</div>
                    <div class="col-total">${product.total.toFixed(2)} Ø±.Ø³</div>
                </div>
            `;
        });
        
        productsList.innerHTML = productsHTML;
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù„Ø®Øµ
        document.getElementById('detailSubtotal').textContent = `${order.subtotal.toFixed(2)} Ø±.Ø³`;
        document.getElementById('detailTax').textContent = `${order.tax.toFixed(2)} Ø±.Ø³`;
        document.getElementById('detailShipping').textContent = `${order.shipping.toFixed(2)} Ø±.Ø³`;
        document.getElementById('detailDiscount').textContent = `${order.discount.toFixed(2)} Ø±.Ø³`;
        document.getElementById('detailTotal').textContent = `${order.total.toFixed(2)} Ø±.Ø³`;
    }

    populateOrderTracking(order) {
        // ØªØ­Ø¯ÙŠØ« Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØªØ¨Ø¹
        const steps = ['ordered', 'confirmed', 'processing', 'shipped', 'delivered'];
        steps.forEach(step => {
            const stepElement = document.getElementById(`step${this.capitalizeFirstLetter(step)}`);
            const stepData = order.tracking.steps.find(s => s.step === step);
            
            if (stepData && stepData.completed) {
                stepElement.classList.add('completed', 'active');
                if (stepData.date) {
                    stepElement.querySelector('.step-date').textContent = this.formatDate(stepData.date);
                }
            } else if (step === 'ordered') {
                stepElement.classList.add('active');
            } else {
                stepElement.classList.remove('active', 'completed');
            }
        });
        
        // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØªØ¨Ø¹
        document.getElementById('trackingCompany').textContent = order.tracking.company;
        document.getElementById('trackingNumber').textContent = order.tracking.number;
        document.getElementById('estimatedDelivery').textContent = this.formatDate(order.tracking.estimatedDelivery);
        document.getElementById('deliveryDriver').textContent = order.tracking.driver;
        
        // ØªØ­Ø¯ÙŠØ« ØªØ§Ø±ÙŠØ® Ø§Ù„Ø®Ø·ÙˆØ§Øª
        if (order.tracking.steps[0].date) {
            document.getElementById('stepOrdered').querySelector('.step-date').textContent = 
                this.formatDate(order.tracking.steps[0].date);
        }
    }

    populateOrderHistory(order) {
        const historyList = document.getElementById('orderHistoryList');
        let historyHTML = '';
        
        order.history.forEach(record => {
            historyHTML += `
                <div class="history-item">
                    <div class="history-action">${record.action}</div>
                    <div class="history-details">
                        <span class="history-user">Ø¨ÙˆØ§Ø³Ø·Ø©: ${record.user}</span>
                    </div>
                    <div class="history-date">${this.formatDateTime(record.date)}</div>
                </div>
            `;
        });
        
        historyList.innerHTML = historyHTML;
    }

    capitalizeFirstLetter(string) {
        return string.charAt(0).toUpperCase() + string.slice(1);
    }

    closeOrderDetails() {
        document.getElementById('orderDetailsModal').style.display = 'none';
    }

    editOrder() {
        if (!this.currentOrder) return;
        this.showToast('Ø³ÙŠØªÙ… ÙØªØ­ Ù†Ù…ÙˆØ°Ø¬ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨');
        // ÙŠÙ…ÙƒÙ† ØªÙ†ÙÙŠØ° Ù…Ù†Ø·Ù‚ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙƒØ§Ù…Ù„ Ù‡Ù†Ø§
    }

    updateOrderStatus() {
        if (!this.currentOrder) return;
        document.getElementById('statusUpdateModal').style.display = 'block';
    }

    closeStatusUpdate() {
        document.getElementById('statusUpdateModal').style.display = 'none';
    }

    confirmStatusUpdate() {
        if (!this.currentOrder) return;

        const newStatus = document.getElementById('newOrderStatus').value;
        const notes = document.getElementById('statusNotes').value;

        // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨
        this.currentOrder.status = newStatus;
        this.currentOrder.updatedAt = new Date().toISOString();

        // Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ø¬Ù„
        this.currentOrder.history.unshift({
            action: `ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© Ø¥Ù„Ù‰: ${this.getStatusText(newStatus)}`,
            user: 'Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„',
            date: new Date().toISOString(),
            notes: notes
        });

        // ØªØ­Ø¯ÙŠØ« ØªØªØ¨Ø¹ Ø§Ù„Ø´Ø­Ù† Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±
        this.updateTrackingSteps(newStatus);

        this.saveData();
        this.renderOrders();
        this.updateStats();
        this.closeStatusUpdate();
        this.showOrderDetails(this.currentOrder.id);
        
        this.showToast('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­');
    }

    updateTrackingSteps(newStatus) {
        const stepsMap = {
            'confirmed': 'confirmed',
            'processing': 'processing',
            'shipped': 'shipped',
            'delivered': 'delivered'
        };

        const stepToUpdate = stepsMap[newStatus];
        if (stepToUpdate) {
            const step = this.currentOrder.tracking.steps.find(s => s.step === stepToUpdate);
            if (step) {
                step.completed = true;
                step.date = new Date().toISOString();
            }
        }
    }

    cancelOrder() {
        if (!this.currentOrder) return;

        if (confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨ ${this.currentOrder.id}ØŸ`)) {
            this.currentOrder.status = 'cancelled';
            this.currentOrder.updatedAt = new Date().toISOString();

            // Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ø¬Ù„
            this.currentOrder.history.unshift({
                action: 'ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨',
                user: 'Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„',
                date: new Date().toISOString()
            });

            this.saveData();
            this.renderOrders();
            this.updateStats();
            this.closeOrderDetails();
            
            this.showToast('ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­');
        }
    }

    printOrder() {
        if (!this.currentOrder) return;
        this.showToast('Ø¬Ø§Ø±ÙŠ ØªØ­Ø¶ÙŠØ± Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©...');
        // ÙŠÙ…ÙƒÙ† ØªÙ†ÙÙŠØ° Ù…Ù†Ø·Ù‚ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ù‡Ù†Ø§
    }

    showFilter() {
        document.getElementById('filterModal').style.display = 'block';
    }

    closeFilter() {
        document.getElementById('filterModal').style.display = 'none';
    }

    applyFilters() {
        // Ø¬Ù…Ø¹ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙÙ„ØªØ±Ø© Ù…Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
        const statusCheckboxes = document.querySelectorAll('input[name="status"]:checked');
        this.currentFilters.status = Array.from(statusCheckboxes).map(cb => cb.value);
        
        const paymentCheckboxes = document.querySelectorAll('input[name="payment"]:checked');
        this.currentFilters.payment = Array.from(paymentCheckboxes).map(cb => cb.value);
        
        const periodRadio = document.querySelector('input[name="period"]:checked');
        this.currentFilters.period = periodRadio ? periodRadio.value : 'today';
        
        this.currentFilters.minAmount = parseInt(document.getElementById('filterMinAmount').value) || 0;
        this.currentFilters.maxAmount = parseInt(document.getElementById('filterMaxAmount').value) || 10000;

        this.applyFilters();
        this.closeFilter();
    }

    resetFilters() {
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„ Ø§Ù„ÙÙ„ØªØ±Ø©
        document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
            if ((cb.name === 'status' && (cb.value === 'pending' || cb.value === 'confirmed' || cb.value === 'processing' || cb.value === 'shipped')) ||
                (cb.name === 'payment' && (cb.value === 'pending' || cb.value === 'paid'))) {
                cb.checked = true;
            } else {
                cb.checked = false;
            }
        });
        
        document.querySelector('input[name="period"][value="today"]').checked = true;
        document.getElementById('filterMinAmount').value = 0;
        document.getElementById('filterMaxAmount').value = 10000;
        
        this.currentFilters = {
            status: ['pending', 'confirmed', 'processing', 'shipped'],
            payment: ['pending', 'paid'],
            period: 'today',
            minAmount: 0,
            maxAmount: 10000
        };
        
        this.applyFilters();
    }

    formatDate(dateString) {
        const date = new Date(dateString);
        return date.toLocaleDateString('ar-EG', {
            day: 'numeric',
            month: 'short'
        });
    }

    formatDateTime(dateString) {
        const date = new Date(dateString);
        return date.toLocaleString('ar-EG', {
            day: 'numeric',
            month: 'short',
            hour: '2-digit',
            minute: '2-digit'
        });
    }

    showToast(message) {
        // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± Toast
        const toast = document.createElement('div');
        toast.textContent = message;
        toast.style.cssText = `
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--primary);
            color: white;
            padding: 12px 24px;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-card);
            z-index: 3000;
            font-weight: 600;
            transition: var(--transition-liquid);
            max-width: 300px;
            text-align: center;
        `;
        
        document.body.appendChild(toast);
        
        // Ø¥Ø²Ø§Ù„Ø© Toast Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†
        setTimeout(() => {
            toast.style.opacity = '0';
            setTimeout(() => {
                if (document.body.contains(toast)) {
                    document.body.removeChild(toast);
                }
            }, 300);
        }, 3000);
    }

    setupRealTimeUpdates() {
        // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ­Ø¯ÙŠØ«Ø§Øª ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
        setInterval(() => {
            this.simulateRealTimeUpdate();
        }, 30000); // ÙƒÙ„ 30 Ø«Ø§Ù†ÙŠØ©
    }

    simulateRealTimeUpdate() {
        // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª
        if (Math.random() > 0.7) {
            const randomOrder = this.orders.find(order => 
                order.status === 'processing' || order.status === 'shipped'
            );
            
            if (randomOrder) {
                let newStatus;
                let action;
                
                if (randomOrder.status === 'processing' && Math.random() > 0.5) {
                    newStatus = 'shipped';
                    action = 'ØªÙ… Ø´Ø­Ù† Ø§Ù„Ø·Ù„Ø¨';
                } else if (randomOrder.status === 'shipped' && Math.random() > 0.7) {
                    newStatus = 'delivered';
                    action = 'ØªÙ… ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø·Ù„Ø¨';
                }
                
                if (newStatus) {
                    randomOrder.status = newStatus;
                    randomOrder.updatedAt = new Date().toISOString();
                    
                    randomOrder.history.unshift({
                        action: action,
                        user: 'Ø§Ù„Ù†Ø¸Ø§Ù…',
                        date: new Date().toISOString()
                    });
                    
                    this.updateTrackingSteps(newStatus);
                    this.saveData();
                    
                    if (this.currentOrder && this.currentOrder.id === randomOrder.id) {
                        this.showOrderDetails(randomOrder.id);
                    }
                    
                    this.renderOrders();
                    this.updateStats();
                }
            }
        }
    }

    searchProducts() {
        const query = document.getElementById('productSearch').value.toLowerCase();
        const productItems = document.querySelectorAll('.product-item-selection');
        
        productItems.forEach(item => {
            const productName = item.querySelector('.product-name-selection').textContent.toLowerCase();
            if (productName.includes(query)) {
                item.style.display = 'flex';
            } else {
                item.style.display = 'none';
            }
        });
    }
}

// ØªÙ‡ÙŠØ¦Ø© Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
document.addEventListener('DOMContentLoaded', function() {
    window.orders = new OrdersManagement();
});
</script>
</body>
</html>