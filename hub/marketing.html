<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M24 - Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙˆØ§Ù„ØªØ³ÙˆÙŠÙ‚</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Almarai:wght@400;700;800&family=Tajawal:wght@300;400;500;700;800;900&display=swap" rel="stylesheet">
    <style>
:root {
    /* Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© */
    --primary: #00897B;
    --primary-dark: #00695C;
    --primary-light: #B2DFDB;
    --secondary: #FFB300;
    --accent: #FF5252;
    --success: #4CAF50;
    --warning: #FF9800;
    --info: #2196F3;
    --danger: #F44336;

    /* Ø®Ù„ÙÙŠØ© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ */
    --bg-light: #E0F2F1;
    --bg-surface: #ffffff;
    --shadow-light: -6px -6px 12px rgba(255, 255, 255, 0.9), 6px 6px 12px rgba(0, 0, 0, 0.1);
    --shadow-inset: inset 3px 3px 6px rgba(0, 0, 0, 0.1), inset -3px -3px 6px rgba(255, 255, 255, 0.9);
    --shadow-card: 0 10px 30px rgba(0, 0, 0, 0.15);
    --text-primary: #1E293B;
    --text-secondary: #475569;

    /* Ø§Ù„Ø²ÙˆØ§ÙŠØ§ ÙˆØ§Ù„Ø§Ù†ØªÙ‚Ø§Ù„Ø§Øª */
    --radius-xl: 30px;
    --radius-lg: 20px;
    --radius-md: 16px;
    --radius-sm: 12px;
    --transition-liquid: all 0.35s cubic-bezier(0.25, 0.8, 0.25, 1);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Tajawal', sans-serif;
    -webkit-tap-highlight-color: transparent;
}

body {
    background: var(--bg-light);
    color: var(--text-primary);
    direction: rtl;
    overflow-x: hidden;
    min-height: 100vh;
}

/* Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
.ultra-app {
    max-width: 450px;
    min-height: 100vh;
    margin: 0 auto;
    background: var(--bg-light);
    position: relative;
    box-shadow: 0 0 40px rgba(0, 0, 0, 0.05);
    overflow-x: hidden;
    padding-bottom: 100px;
}

/* Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© */
.status-bar {
    background: transparent;
    color: var(--text-primary);
    padding: 10px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 14px;
    font-weight: 500;
    z-index: 1000;
}

.status-right i {
    margin-right: 8px;
}

/* Ø§Ù„Ù‡ÙŠØ¯Ø± */
.app-header {
    padding: 24px 20px 0;
}

.header-top {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
}

.title-section h1 {
    font-family: 'Almarai', sans-serif;
    font-size: 26px;
    font-weight: 800;
    color: var(--primary-dark);
    margin-bottom: 4px;
}

.title-section p {
    font-size: 14px;
    color: var(--text-secondary);
}

.marketing-actions {
    display: flex;
    gap: 10px;
}

.action-icon {
    background: var(--bg-light);
    box-shadow: var(--shadow-light);
    border: none;
    width: 48px;
    height: 48px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary);
    cursor: pointer;
    transition: var(--transition-liquid);
    position: relative;
    font-size: 18px;
}

.action-icon:active {
    box-shadow: var(--shadow-inset);
    color: var(--primary-dark);
}

.icon-badge {
    position: absolute;
    top: 5px;
    right: 5px;
    background: var(--accent);
    color: white;
    border-radius: 50%;
    width: 16px;
    height: 16px;
    font-size: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
}

/* Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« */
.search-bar {
    background: var(--bg-light);
    box-shadow: var(--shadow-inset);
    padding: 12px 20px;
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 16px;
}

.search-input {
    flex: 1;
    border: none;
    background: transparent;
    font-size: 16px;
    color: var(--text-primary);
    outline: none;
    padding: 0;
}

.search-icon {
    color: var(--text-secondary);
}

/* Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø© */
.quick-stats-section {
    padding: 0 20px;
    margin-bottom: 20px;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
}

.stat-card {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
    transition: var(--transition-liquid);
    padding: 20px;
    display: flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
}

.stat-card:hover {
    box-shadow: var(--shadow-inset);
    transform: translateY(-2px);
}

.stat-icon {
    width: 50px;
    height: 50px;
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    color: white;
}

.stat-icon.revenue {
    background: linear-gradient(135deg, #4CAF50, #45a049);
}

.stat-icon.orders {
    background: linear-gradient(135deg, #2196F3, #1976D2);
}

.stat-icon.customers {
    background: linear-gradient(135deg, #FF9800, #F57C00);
}

.stat-icon.conversion {
    background: linear-gradient(135deg, #9C27B0, #7B1FA2);
}

.stat-info {
    flex: 1;
}

.stat-value {
    font-family: 'Almarai', sans-serif;
    font-size: 18px;
    font-weight: 800;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.stat-label {
    font-size: 12px;
    color: var(--text-secondary);
}

.stat-trend {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 12px;
    font-weight: 700;
    padding: 6px 10px;
    border-radius: var(--radius-sm);
}

.stat-trend.positive {
    background: #E8F5E8;
    color: #388E3C;
}

.stat-trend.negative {
    background: #FFEBEE;
    color: #D32F2F;
}

/* Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
.tabs-navigation {
    padding: 0 20px;
    margin-bottom: 20px;
}

.tabs-container {
    display: flex;
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    padding: 8px;
    box-shadow: var(--shadow-light);
}

.tab-btn {
    flex: 1;
    background: none;
    border: none;
    padding: 12px 16px;
    border-radius: var(--radius-md);
    font-weight: 600;
    color: var(--text-secondary);
    cursor: pointer;
    transition: var(--transition-liquid);
    font-size: 14px;
}

.tab-btn.active {
    background: var(--primary);
    color: white;
    box-shadow: var(--shadow-inset);
}

.tab-btn:hover {
    background: var(--primary-light);
    color: var(--primary-dark);
}

/* Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª */
.tab-content {
    padding: 0 20px;
}

.tab-pane {
    display: none;
}

.tab-pane.active {
    display: block;
}

/* Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø¹Ø§Ù…Ø© */
.content-section {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
    padding: 20px;
    margin-bottom: 20px;
}

.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.section-header h3 {
    font-family: 'Almarai', sans-serif;
    font-size: 18px;
    font-weight: 700;
    color: var(--text-primary);
}

.period-select, .report-period {
    background: var(--bg-light);
    box-shadow: var(--shadow-light);
    border: none;
    padding: 8px 16px;
    border-radius: var(--radius-md);
    color: var(--text-primary);
    font-size: 14px;
    cursor: pointer;
    outline: none;
}

.btn-text {
    background: none;
    border: none;
    color: var(--primary);
    font-weight: 600;
    cursor: pointer;
    font-size: 14px;
}

/* Ø§Ù„Ù…Ø®Ø·Ø·Ø§Øª */
.chart-container {
    height: 200px;
    position: relative;
}

/* Ø´Ø¨ÙƒØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª */
.products-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
}

.product-card {
    background: var(--bg-surface);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
    transition: var(--transition-liquid);
    padding: 16px;
    cursor: pointer;
}

.product-card:hover {
    box-shadow: var(--shadow-inset);
}

.product-image {
    width: 100%;
    height: 80px;
    background: var(--primary-light);
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    color: var(--primary-dark);
    margin-bottom: 12px;
}

.product-name {
    font-weight: 700;
    font-size: 14px;
    margin-bottom: 8px;
    line-height: 1.4;
}

.product-sales {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 12px;
    color: var(--text-secondary);
}

.sales-amount {
    font-weight: 700;
    color: var(--primary-dark);
}

/* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø­Ù…Ù„Ø§Øª */
.campaigns-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.campaign-item {
    background: var(--bg-surface);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
    transition: var(--transition-liquid);
    padding: 16px;
    cursor: pointer;
    border-right: 4px solid var(--primary);
}

.campaign-item:hover {
    box-shadow: var(--shadow-inset);
    transform: translateX(-4px);
}

.campaign-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 12px;
}

.campaign-title {
    font-weight: 700;
    font-size: 16px;
    color: var(--text-primary);
}

.campaign-status {
    padding: 4px 8px;
    border-radius: var(--radius-sm);
    font-size: 11px;
    font-weight: 700;
}

.status-active {
    background: var(--success);
    color: white;
}

.status-paused {
    background: var(--warning);
    color: white;
}

.status-completed {
    background: var(--info);
    color: white;
}

.campaign-metrics {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    margin-bottom: 12px;
}

.metric {
    text-align: center;
}

.metric-value {
    font-weight: 800;
    font-size: 16px;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.metric-label {
    font-size: 11px;
    color: var(--text-secondary);
}

.campaign-progress {
    margin-top: 12px;
}

.progress-bar {
    width: 100%;
    height: 6px;
    background: var(--primary-light);
    border-radius: 3px;
    overflow: hidden;
    margin-bottom: 8px;
}

.progress-fill {
    height: 100%;
    background: var(--primary);
    border-radius: 3px;
    transition: width 0.3s ease;
}

.progress-text {
    display: flex;
    justify-content: space-between;
    font-size: 12px;
    color: var(--text-secondary);
}

/* Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ù…Ù„Ø§Øª */
.campaigns-management {
    margin-bottom: 20px;
}

.campaigns-toolbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding: 16px;
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
}

.view-options {
    display: flex;
    gap: 8px;
}

.view-option {
    background: var(--bg-light);
    box-shadow: var(--shadow-light);
    border: none;
    padding: 8px 16px;
    border-radius: var(--radius-md);
    color: var(--text-secondary);
    cursor: pointer;
    transition: var(--transition-liquid);
    font-size: 14px;
}

.view-option.active {
    background: var(--primary);
    color: white;
    box-shadow: var(--shadow-inset);
}

.view-option:hover {
    box-shadow: var(--shadow-inset);
}

.btn-primary {
    background: var(--primary);
    box-shadow: 0 4px 15px rgba(0, 137, 123, 0.4);
    border: none;
    padding: 12px 20px;
    border-radius: var(--radius-md);
    color: white;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-liquid);
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 137, 123, 0.6);
}

.btn-primary:active {
    transform: translateY(0);
    box-shadow: var(--shadow-inset);
}

.btn-secondary {
    background: var(--bg-light);
    box-shadow: var(--shadow-light);
    border: none;
    padding: 12px 20px;
    border-radius: var(--radius-md);
    color: var(--text-primary);
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-liquid);
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
}

.btn-secondary:hover {
    box-shadow: var(--shadow-inset);
}

.btn-danger {
    background: var(--danger);
    box-shadow: 0 4px 15px rgba(244, 67, 54, 0.4);
    border: none;
    padding: 12px 20px;
    border-radius: var(--radius-md);
    color: white;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-liquid);
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
}

.btn-danger:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(244, 67, 54, 0.6);
}

/* Ø´Ø¨ÙƒØ© Ø§Ù„Ø­Ù…Ù„Ø§Øª */
.campaigns-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
}

.campaign-card {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
    transition: var(--transition-liquid);
    padding: 20px;
    cursor: pointer;
    position: relative;
    overflow: hidden;
}

.campaign-card:hover {
    box-shadow: var(--shadow-inset);
    transform: translateY(-2px);
}

.campaign-card::before {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 4px;
    height: 100%;
    background: var(--primary);
}

.campaign-type {
    font-size: 12px;
    color: var(--text-secondary);
    margin-bottom: 8px;
}

.campaign-budget {
    font-weight: 700;
    font-size: 18px;
    color: var(--primary-dark);
    margin-bottom: 12px;
}

.campaign-stats {
    display: flex;
    justify-content: space-between;
    margin-bottom: 12px;
}

.campaign-stat {
    text-align: center;
}

.campaign-stat-value {
    font-weight: 800;
    font-size: 14px;
    margin-bottom: 4px;
}

.campaign-stat-label {
    font-size: 10px;
    color: var(--text-secondary);
}

/* Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª */
.analytics-dashboard {
    margin-bottom: 20px;
}

.kpis-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
    margin-bottom: 20px;
}

.kpi-card {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
    transition: var(--transition-liquid);
    padding: 20px;
    display: flex;
    align-items: center;
    gap: 12px;
}

.kpi-card:hover {
    box-shadow: var(--shadow-inset);
}

.kpi-icon {
    width: 50px;
    height: 50px;
    background: var(--primary);
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 20px;
}

.kpi-content {
    flex: 1;
}

.kpi-value {
    font-family: 'Almarai', sans-serif;
    font-size: 20px;
    font-weight: 800;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.kpi-label {
    font-size: 12px;
    color: var(--text-secondary);
    margin-bottom: 4px;
}

.kpi-trend {
    font-size: 11px;
    font-weight: 700;
    padding: 2px 6px;
    border-radius: var(--radius-sm);
}

.kpi-trend.positive {
    background: #E8F5E8;
    color: #388E3C;
}

.kpi-trend.negative {
    background: #FFEBEE;
    color: #D32F2F;
}

/* Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± */
.reports-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 20px;
}

.report-card {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
    padding: 20px;
}

.report-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.report-header h4 {
    font-family: 'Almarai', sans-serif;
    font-size: 16px;
    font-weight: 700;
    color: var(--text-primary);
}

/* Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù‚Ù†ÙˆØ§Øª */
.channel-performance {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.channel-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 0;
    border-bottom: 1px solid var(--primary-light);
}

.channel-item:last-child {
    border-bottom: none;
}

.channel-info {
    display: flex;
    align-items: center;
    gap: 12px;
}

.channel-icon {
    width: 32px;
    height: 32px;
    background: var(--primary-light);
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary-dark);
    font-size: 14px;
}

.channel-name {
    font-weight: 600;
    font-size: 14px;
}

.channel-stats {
    text-align: right;
}

.channel-value {
    font-weight: 700;
    font-size: 14px;
    margin-bottom: 2px;
}

.channel-trend {
    font-size: 11px;
    color: var(--text-secondary);
}

/* Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ */
.geo-distribution {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.region-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 0;
}

.region-name {
    font-weight: 600;
    font-size: 14px;
}

.region-bar {
    flex: 1;
    height: 6px;
    background: var(--primary-light);
    border-radius: 3px;
    margin: 0 12px;
    overflow: hidden;
}

.region-fill {
    height: 100%;
    background: var(--primary);
    border-radius: 3px;
}

.region-percentage {
    font-weight: 700;
    font-size: 14px;
    color: var(--primary-dark);
    min-width: 40px;
    text-align: left;
}

/* Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙŠÙ† */
.leads-management {
    margin-bottom: 20px;
}

.leads-stats {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
    margin-bottom: 20px;
}

.lead-stat-card {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
    transition: var(--transition-liquid);
    padding: 20px;
    text-align: center;
    cursor: pointer;
}

.lead-stat-card:hover {
    box-shadow: var(--shadow-inset);
}

.lead-stat-value {
    font-family: 'Almarai', sans-serif;
    font-size: 24px;
    font-weight: 800;
    color: var(--primary-dark);
    margin-bottom: 8px;
}

.lead-stat-label {
    font-size: 12px;
    color: var(--text-secondary);
}

.leads-container {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
    padding: 20px;
}

.leads-toolbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.filter-options select {
    background: var(--bg-light);
    box-shadow: var(--shadow-light);
    border: none;
    padding: 10px 16px;
    border-radius: var(--radius-md);
    color: var(--text-primary);
    font-size: 14px;
    cursor: pointer;
    outline: none;
}

.leads-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
    max-height: 400px;
    overflow-y: auto;
}

.lead-item {
    background: var(--bg-surface);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-light);
    transition: var(--transition-liquid);
    padding: 16px;
    cursor: pointer;
    border-right: 4px solid var(--info);
}

.lead-item:hover {
    box-shadow: var(--shadow-inset);
}

.lead-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 12px;
}

.lead-name {
    font-weight: 700;
    font-size: 16px;
    color: var(--text-primary);
}

.lead-status {
    padding: 4px 8px;
    border-radius: var(--radius-sm);
    font-size: 11px;
    font-weight: 700;
}

.status-new {
    background: var(--info);
    color: white;
}

.status-contacted {
    background: var(--warning);
    color: white;
}

.status-qualified {
    background: var(--success);
    color: white;
}

.status-converted {
    background: var(--primary);
    color: white;
}

.lead-details {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.lead-contact {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 12px;
    color: var(--text-secondary);
}

.lead-source {
    font-size: 11px;
    color: var(--text-secondary);
    background: var(--primary-light);
    padding: 2px 8px;
    border-radius: var(--radius-sm);
    display: inline-block;
}

/* Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.2);
    backdrop-filter: blur(10px);
    transition: opacity 0.3s ease-out;
    z-index: 2000;
}

.modal-content {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.4);
    box-shadow: var(--shadow-card);
    animation: modalSlideUp 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    border-radius: var(--radius-xl) var(--radius-xl) 0 0;
    max-height: 85vh;
    overflow-y: auto;
}

.modal-content.large-modal {
    max-height: 90vh;
}

@keyframes modalSlideUp {
    from {opacity: 0; transform: translateY(100%);}
    to {opacity: 1; transform: translateY(0);}
}

.modal-header {
    background: var(--primary);
    color: white;
    padding: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-radius: var(--radius-xl) var(--radius-xl) 0 0;
    position: sticky;
    top: 0;
    z-index: 10;
}

.modal-header h2 {
    margin: 0;
    font-size: 20px;
}

.close {
    font-size: 24px;
    cursor: pointer;
}

.modal-body {
    padding: 20px;
}

/* Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ */
.form-section {
    margin-bottom: 24px;
}

.form-section h3 {
    font-family: 'Almarai', sans-serif;
    font-size: 16px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 16px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--primary-light);
}

.form-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 16px;
}

@media (min-width: 480px) {
    .form-grid {
        grid-template-columns: 1fr 1fr;
    }
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.form-group label {
    font-weight: 600;
    font-size: 14px;
    color: var(--text-primary);
}

.form-group input,
.form-group select,
.form-group textarea {
    background: var(--bg-light);
    box-shadow: var(--shadow-inset);
    border: none;
    padding: 12px 16px;
    border-radius: var(--radius-md);
    color: var(--text-primary);
    font-size: 14px;
    outline: none;
    transition: var(--transition-liquid);
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
    box-shadow: var(--shadow-light);
}

.channels-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
}

.channel-checkbox {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    padding: 8px;
    border-radius: var(--radius-sm);
    transition: var(--transition-liquid);
}

.channel-checkbox:hover {
    background: var(--primary-light);
}

.channel-checkbox input[type="checkbox"] {
    width: 18px;
    height: 18px;
    accent-color: var(--primary);
}

.form-actions {
    display: flex;
    gap: 12px;
    justify-content: flex-end;
    margin-top: 24px;
    padding-top: 16px;
    border-top: 1px solid var(--primary-light);
}

/* ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ù…Ù„Ø© */
.campaign-details {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.campaign-header-details {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    padding: 20px;
    box-shadow: var(--shadow-light);
}

.info-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
}

.info-item {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.info-item label {
    font-size: 12px;
    color: var(--text-secondary);
    font-weight: 600;
}

.info-item span {
    font-size: 14px;
    color: var(--text-primary);
    font-weight: 500;
}

.campaign-metrics-details h3,
.campaign-channels h3,
.campaign-description h3 {
    font-family: 'Almarai', sans-serif;
    font-size: 16px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 12px;
}

.metrics-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
}

.metric-card {
    background: var(--bg-light);
    border-radius: var(--radius-lg);
    padding: 16px;
    text-align: center;
    box-shadow: var(--shadow-light);
}

.metric-card .metric-value {
    font-family: 'Almarai', sans-serif;
    font-size: 20px;
    font-weight: 800;
    color: var(--primary-dark);
    margin-bottom: 4px;
}

.metric-card .metric-label {
    font-size: 12px;
    color: var(--text-secondary);
}

.channels-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.channel-tag {
    background: var(--primary-light);
    color: var(--primary-dark);
    padding: 6px 12px;
    border-radius: var(--radius-sm);
    font-size: 12px;
    font-weight: 600;
}

.campaign-description p {
    background: var(--bg-light);
    padding: 16px;
    border-radius: var(--radius-lg);
    line-height: 1.6;
    color: var(--text-primary);
}

.campaign-actions {
    display: flex;
    gap: 12px;
    justify-content: center;
    flex-wrap: wrap;
}

/* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø³ÙÙ„ÙŠ */
.bottom-nav-dock {
    position: fixed;
    bottom: 25px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--bg-light);
    box-shadow: var(--shadow-light);
    display: flex;
    padding: 8px 10px;
    border-radius: var(--radius-xl);
    z-index: 1000;
    max-width: 360px;
    width: calc(100% - 40px);
    border: 1px solid rgba(255, 255, 255, 0.5);
}

.nav-item-dock {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 8px 0;
    border-radius: var(--radius-md);
    transition: var(--transition-liquid);
    flex: 1;
    position: relative;
    text-decoration: none;
    color: var(--text-secondary);
}

.nav-item-dock.active {
    color: var(--primary-dark);
}

.nav-item-dock.active .nav-icon-dock {
    background: var(--primary);
    color: white;
    box-shadow: 0 4px 15px rgba(0, 137, 123, 0.5);
    width: 44px;
    height: 44px;
    border-radius: 50%;
    transform: translateY(-10px);
    transition: var(--transition-liquid);
}

.nav-icon-dock {
    font-size: 20px;
    margin-bottom: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 44px;
    height: 44px;
    transition: var(--transition-liquid);
}

.nav-label {
    font-size: 10px;
    font-weight: 600;
    margin-top: 4px;
    transition: var(--transition-liquid);
}

.nav-item-dock.active .nav-label {
    font-weight: 800;
    color: var(--primary-dark);
}

/* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø³ÙˆØ§Ø¦Ù„ */
.liquid-transition {
    transition: var(--transition-liquid);
}

/* Ø§Ù„ØªØ¬Ø§ÙˆØ¨ */
@media (max-width: 480px) {
    .stats-grid {
        grid-template-columns: 1fr;
    }
    
    .products-grid {
        grid-template-columns: 1fr;
    }
    
    .campaigns-grid {
        grid-template-columns: 1fr;
    }
    
    .kpis-grid {
        grid-template-columns: 1fr;
    }
    
    .leads-stats {
        grid-template-columns: 1fr;
    }
    
    .campaigns-toolbar {
        flex-direction: column;
        gap: 12px;
        align-items: stretch;
    }
    
    .leads-toolbar {
        flex-direction: column;
        gap: 12px;
        align-items: stretch;
    }
    
    .tabs-container {
        flex-wrap: wrap;
    }
    
    .tab-btn {
        flex: 1 0 45%;
        margin-bottom: 4px;
    }
    
    .info-grid {
        grid-template-columns: 1fr;
    }
    
    .metrics-grid {
        grid-template-columns: 1fr;
    }
    
    .campaign-actions {
        flex-direction: column;
    }
    
    .form-actions {
        flex-direction: column;
    }
}

@media (max-width: 380px) {
    .campaign-metrics {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .section-header {
        flex-direction: column;
        gap: 12px;
        align-items: flex-start;
    }
    
    .channels-grid {
        grid-template-columns: 1fr;
    }
}
</style>
</head>
<body>
    <div class="ultra-app">
        <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© -->
        <div class="status-bar">
            <div class="status-left">
                <span id="currentTime">--:--</span>
            </div>
            <div class="status-right">
                <i class="fas fa-signal"></i>
                <i class="fas fa-wifi"></i>
                <i class="fas fa-battery-full"></i>
            </div>
        </div>

        <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
        <div class="app-header">
            <div class="header-top">
                <div class="title-section">
                    <h1>M24 Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙˆØ§Ù„ØªØ³ÙˆÙŠÙ‚ ğŸ“ˆ</h1>
                    <p>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ù…Ù„Ø§Øª ÙˆØªØ­Ù„ÙŠÙ„Ø§Øª Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</p>
                </div>
                <div class="marketing-actions">
                    <button class="action-icon liquid-transition" id="analyticsBtn">
                        <i class="fas fa-chart-bar"></i>
                    </button>
                    <button class="action-icon liquid-transition" id="notificationsBtn">
                        <i class="fas fa-bell"></i>
                        <span class="icon-badge">2</span>
                    </button>
                    <button class="action-icon liquid-transition" id="addCampaignBtn">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </div>

            <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« -->
            <div class="search-bar" id="searchBar" style="display: none;">
                <i class="fas fa-search search-icon"></i>
                <input type="text" class="search-input" placeholder="Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø­Ù…Ù„Ø§Øª ÙˆØ§Ù„Ø¹Ù…Ù„Ø§Ø¡..." id="searchInput">
                <button class="action-icon liquid-transition" id="closeSearchBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>

        <!-- Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø© -->
        <div class="quick-stats-section">
            <div class="stats-grid">
                <div class="stat-card liquid-transition">
                    <div class="stat-icon revenue">
                        <i class="fas fa-money-bill-wave"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-value" id="totalRevenue">0 Ø±.Ø³</div>
                        <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</div>
                    </div>
                    <div class="stat-trend positive">
                        <i class="fas fa-arrow-up"></i>
                        15%
                    </div>
                </div>

                <div class="stat-card liquid-transition">
                    <div class="stat-icon orders">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-value" id="totalOrders">0</div>
                        <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
                    </div>
                    <div class="stat-trend positive">
                        <i class="fas fa-arrow-up"></i>
                        8%
                    </div>
                </div>

                <div class="stat-card liquid-transition">
                    <div class="stat-icon customers">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-value" id="totalCustomers">0</div>
                        <div class="stat-label">Ø¹Ù…Ù„Ø§Ø¡ Ø¬Ø¯Ø¯</div>
                    </div>
                    <div class="stat-trend positive">
                        <i class="fas fa-arrow-up"></i>
                        12%
                    </div>
                </div>

                <div class="stat-card liquid-transition">
                    <div class="stat-icon conversion">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-value" id="conversionRate">0%</div>
                        <div class="stat-label">Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„</div>
                    </div>
                    <div class="stat-trend negative">
                        <i class="fas fa-arrow-down"></i>
                        3%
                    </div>
                </div>
            </div>
        </div>

        <!-- Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
        <div class="tabs-navigation">
            <div class="tabs-container">
                <button class="tab-btn active" data-tab="overview">Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©</button>
                <button class="tab-btn" data-tab="campaigns">Ø§Ù„Ø­Ù…Ù„Ø§Øª</button>
                <button class="tab-btn" data-tab="analytics">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</button>
                <button class="tab-btn" data-tab="leads">Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙŠÙ†</button>
            </div>
        </div>

        <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª -->
        <div class="tab-content">
            <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù†Ø¸Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø© -->
            <div class="tab-pane active" id="overviewTab">
                <!-- Ù…Ø®Ø·Ø· Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª -->
                <div class="content-section">
                    <div class="section-header">
                        <h3>Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ©</h3>
                        <select class="period-select" id="revenuePeriod">
                            <option value="7d">Ø¢Ø®Ø± 7 Ø£ÙŠØ§Ù…</option>
                            <option value="30d" selected>Ø¢Ø®Ø± 30 ÙŠÙˆÙ…</option>
                            <option value="90d">Ø¢Ø®Ø± 90 ÙŠÙˆÙ…</option>
                        </select>
                    </div>
                    <div class="chart-container">
                        <canvas id="revenueChart"></canvas>
                    </div>
                </div>

                <!-- Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù…Ø¨ÙŠØ¹Ø§Ù‹ -->
                <div class="content-section">
                    <div class="section-header">
                        <h3>Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù…Ø¨ÙŠØ¹Ø§Ù‹</h3>
                        <button class="btn-text" id="viewAllProductsBtn">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</button>
                    </div>
                    <div class="products-grid" id="topProductsGrid">
                        <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                    </div>
                </div>

                <!-- Ø§Ù„Ø­Ù…Ù„Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø© -->
                <div class="content-section">
                    <div class="section-header">
                        <h3>Ø§Ù„Ø­Ù…Ù„Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©</h3>
                        <button class="btn-text" id="viewAllCampaignsBtn">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</button>
                    </div>
                    <div class="campaigns-list" id="activeCampaignsList">
                        <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                    </div>
                </div>
            </div>

            <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø­Ù…Ù„Ø§Øª -->
            <div class="tab-pane" id="campaignsTab">
                <div class="campaigns-management">
                    <!-- Ø´Ø±ÙŠØ· Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø­Ù…Ù„Ø§Øª -->
                    <div class="campaigns-toolbar">
                        <div class="view-options">
                            <button class="view-option active" data-view="all">Ø§Ù„ÙƒÙ„</button>
                            <button class="view-option" data-view="active">Ù†Ø´Ø·Ø©</button>
                            <button class="view-option" data-view="paused">Ù…ØªÙˆÙ‚ÙØ©</button>
                            <button class="view-option" data-view="completed">Ù…ÙƒØªÙ…Ù„Ø©</button>
                        </div>
                        <button class="btn-primary" id="createCampaignBtn">
                            <i class="fas fa-plus"></i>
                            Ø­Ù…Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©
                        </button>
                    </div>

                    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø­Ù…Ù„Ø§Øª -->
                    <div class="campaigns-container" id="campaignsContainer">
                        <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                    </div>
                </div>
            </div>

            <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± -->
            <div class="tab-pane" id="analyticsTab">
                <div class="analytics-dashboard">
                    <!-- Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ -->
                    <div class="kpis-grid">
                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="fas fa-eye"></i>
                            </div>
                            <div class="kpi-content">
                                <div class="kpi-value" id="totalImpressions">0</div>
                                <div class="kpi-label">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª</div>
                                <div class="kpi-trend positive">+12%</div>
                            </div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="fas fa-mouse-pointer"></i>
                            </div>
                            <div class="kpi-content">
                                <div class="kpi-value" id="totalClicks">0</div>
                                <div class="kpi-label">Ø§Ù„Ù†Ù‚Ø±Ø§Øª</div>
                                <div class="kpi-trend positive">+8%</div>
                            </div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="fas fa-shopping-cart"></i>
                            </div>
                            <div class="kpi-content">
                                <div class="kpi-value" id="totalConversions">0</div>
                                <div class="kpi-label">Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø´Ø±Ø§Ø¡</div>
                                <div class="kpi-trend negative">-3%</div>
                            </div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="fas fa-money-bill-wave"></i>
                            </div>
                            <div class="kpi-content">
                                <div class="kpi-value" id="totalROI">0%</div>
                                <div class="kpi-label">Ø¹Ø§Ø¦Ø¯ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±</div>
                                <div class="kpi-trend positive">+5%</div>
                            </div>
                        </div>
                    </div>

                    <!-- Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ© -->
                    <div class="reports-grid">
                        <div class="report-card">
                            <div class="report-header">
                                <h4>Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù‚Ù†ÙˆØ§Øª</h4>
                                <select class="report-period" id="channelPeriod">
                                    <option value="week">Ø£Ø³Ø¨ÙˆØ¹ÙŠ</option>
                                    <option value="month" selected>Ø´Ù‡Ø±ÙŠ</option>
                                    <option value="quarter">Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠ</option>
                                </select>
                            </div>
                            <div class="channel-performance" id="channelPerformance">
                                <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                            </div>
                        </div>

                        <div class="report-card">
                            <div class="report-header">
                                <h4>Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ</h4>
                                <button class="btn-text" id="viewMapBtn">Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</button>
                            </div>
                            <div class="geo-distribution" id="geoDistribution">
                                <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙŠÙ† -->
            <div class="tab-pane" id="leadsTab">
                <div class="leads-management">
                    <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙŠÙ† -->
                    <div class="leads-stats">
                        <div class="lead-stat-card">
                            <div class="lead-stat-value" id="totalLeads">0</div>
                            <div class="lead-stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙŠÙ†</div>
                        </div>
                        <div class="lead-stat-card">
                            <div class="lead-stat-value" id="newLeads">0</div>
                            <div class="lead-stat-label">Ø¬Ø¯Ø¯ Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±</div>
                        </div>
                        <div class="lead-stat-card">
                            <div class="lead-stat-value" id="convertedLeads">0</div>
                            <div class="lead-stat-label">ØªÙ… ØªØ­ÙˆÙŠÙ„Ù‡Ù…</div>
                        </div>
                        <div class="lead-stat-card">
                            <div class="lead-stat-value" id="conversionRateLeads">0%</div>
                            <div class="lead-stat-label">Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„</div>
                        </div>
                    </div>

                    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙŠÙ† -->
                    <div class="leads-container">
                        <div class="leads-toolbar">
                            <div class="filter-options">
                                <select id="leadsFilter">
                                    <option value="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙŠÙ†</option>
                                    <option value="new">Ø¬Ø¯Ø¯</option>
                                    <option value="contacted">ØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„</option>
                                    <option value="qualified">Ù…Ø¤Ù‡Ù„ÙŠÙ†</option>
                                    <option value="converted">ØªÙ… Ø§Ù„ØªØ­ÙˆÙŠÙ„</option>
                                </select>
                            </div>
                            <button class="btn-primary" id="addLeadBtn">
                                <i class="fas fa-plus"></i>
                                Ø¹Ù…ÙŠÙ„ Ù…Ø­ØªÙ…Ù„ Ø¬Ø¯ÙŠØ¯
                            </button>
                        </div>

                        <div class="leads-list" id="leadsList">
                            <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø³ÙÙ„ÙŠ -->
        <div class="bottom-nav-dock">
            <a href="index.html" class="nav-item-dock">
                <div class="nav-icon-dock">
                    <i class="fas fa-home"></i>
                </div>
                <div class="nav-label">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
            </a>
            <a href="products.html" class="nav-item-dock">
                <div class="nav-icon-dock">
                    <i class="fas fa-pills"></i>
                </div>
                <div class="nav-label">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</div>
            </a>
            <a href="marketing.html" class="nav-item-dock active">
                <div class="nav-icon-dock">
                    <i class="fas fa-bullhorn"></i>
                </div>
                <div class="nav-label">Ø§Ù„ØªØ³ÙˆÙŠÙ‚</div>
            </a>
            <a href="reports.html" class="nav-item-dock">
                <div class="nav-icon-dock">
                    <i class="fas fa-chart-bar"></i>
                </div>
                <div class="nav-label">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div>
            </a>
            <a href="profile.html" class="nav-item-dock">
                <div class="nav-icon-dock">
                    <i class="fas fa-user"></i>
                </div>
                <div class="nav-label">Ø­Ø³Ø§Ø¨ÙŠ</div>
            </a>
        </div>
    </div>

    <!-- Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© -->
    <!-- Ù†Ø§ÙØ°Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø­Ù…Ù„Ø© -->
    <div id="campaignModal" class="modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h2 id="campaignModalTitle">Ø­Ù…Ù„Ø© ØªØ³ÙˆÙŠÙ‚ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©</h2>
                <span class="close" id="closeCampaignModal">&times;</span>
            </div>
            <div class="modal-body" id="campaignModalBody">
                <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
            </div>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ù…Ù„Ø© -->
    <div id="campaignDetailsModal" class="modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h2 id="campaignDetailsTitle">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ù…Ù„Ø©</h2>
                <span class="close" id="closeCampaignDetails">&times;</span>
            </div>
            <div class="modal-body" id="campaignDetailsBody">
                <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
            </div>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙ…Ù„ -->
    <div id="leadModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="leadModalTitle">Ø¹Ù…ÙŠÙ„ Ù…Ø­ØªÙ…Ù„ Ø¬Ø¯ÙŠØ¯</h2>
                <span class="close" id="closeLeadModal">&times;</span>
            </div>
            <div class="modal-body" id="leadModalBody">
                <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
            </div>
        </div>
   </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø®Ø±ÙŠØ·Ø© -->
    <div id="mapModal" class="modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h2>Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ</h2>
                <span class="close" id="closeMapModal">&times;</span>
            </div>
            <div class="modal-body">
                <div id="mapContainer" style="height: 400px; background: #f0f0f0; display: flex; align-items: center; justify-content: center; border-radius: 12px;">
                    <p>Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§</p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
// Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙˆØ§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„
class MarketingManagement {
    constructor() {
        this.campaigns = [];
        this.leads = [];
        this.products = [];
        this.analytics = {};
        this.currentTab = 'overview';
        this.currentCampaign = null;
        this.currentLead = null;
        this.revenueChart = null;
        this.init();
    }

    init() {
        this.loadData();
        this.setupEventListeners();
        this.setupTabs();
        this.renderOverview();
        this.renderCampaigns();
        this.renderAnalytics();
        this.renderLeads();
        this.updateTime();
        this.setupRealTimeUpdates();
    }

    loadData() {
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† localStorage Ø£Ùˆ API
        const savedCampaigns = localStorage.getItem('pharma_marketing_campaigns');
        const savedLeads = localStorage.getItem('pharma_marketing_leads');
        const savedAnalytics = localStorage.getItem('pharma_marketing_analytics');

        if (savedCampaigns) {
            this.campaigns = JSON.parse(savedCampaigns);
        } else {
            this.campaigns = this.getDefaultCampaigns();
        }

        if (savedLeads) {
            this.leads = JSON.parse(savedLeads);
        } else {
            this.leads = this.getDefaultLeads();
        }

        if (savedAnalytics) {
            this.analytics = JSON.parse(savedAnalytics);
        } else {
            this.analytics = this.getDefaultAnalytics();
        }

        this.products = this.getTopProducts();
        this.saveData();
    }

    getDefaultCampaigns() {
        return [
            {
                id: 1,
                name: 'Ø­Ù…Ù„Ø© Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø¨Ø±Ø¯ ÙˆØ§Ù„Ø¥Ù†ÙÙ„ÙˆÙ†Ø²Ø§',
                type: 'Ù…Ù†ØªØ¬',
                status: 'active',
                budget: 5000,
                spent: 3200,
                startDate: '2024-01-01',
                endDate: '2024-03-31',
                target: 'Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ§Øª ÙˆØ§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª',
                channels: ['email', 'social_media', 'direct_sales'],
                impressions: 15000,
                clicks: 1200,
                conversions: 85,
                revenue: 45000,
                roi: 18.5,
                description: 'Ø­Ù…Ù„Ø© ØªØ±ÙˆÙŠØ¬ÙŠØ© Ù„Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø¨Ø±Ø¯ ÙˆØ§Ù„Ø¥Ù†ÙÙ„ÙˆÙ†Ø²Ø§ Ù„Ù…ÙˆØ³Ù… Ø§Ù„Ø´ØªØ§Ø¡'
            },
            {
                id: 2,
                name: 'Ø¹Ø±ÙˆØ¶ Ø§Ù„ÙÙŠØªØ§Ù…ÙŠÙ†Ø§Øª Ø§Ù„Ù…ÙˆØ³Ù…ÙŠØ©',
                type: 'ØªØ±ÙˆÙŠØ¬',
                status: 'active',
                budget: 3000,
                spent: 1800,
                startDate: '2024-01-15',
                endDate: '2024-02-28',
                target: 'Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ø£ÙØ±Ø§Ø¯',
                channels: ['social_media', 'website'],
                impressions: 8000,
                clicks: 650,
                conversions: 42,
                revenue: 28000,
                roi: 15.6,
                description: 'Ø¹Ø±ÙˆØ¶ Ø®Ø§ØµØ© Ø¹Ù„Ù‰ Ù…ÙƒÙ…Ù„Ø§Øª Ø§Ù„ÙÙŠØªØ§Ù…ÙŠÙ†Ø§Øª Ø®Ù„Ø§Ù„ ÙØµÙ„ Ø§Ù„Ø´ØªØ§Ø¡'
            },
            {
                id: 3,
                name: 'Ø¨Ø±Ù†Ø§Ù…Ø¬ ÙˆÙ„Ø§Ø¡ Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ§Øª',
                type: 'ÙˆÙ„Ø§Ø¡',
                status: 'paused',
                budget: 8000,
                spent: 4500,
                startDate: '2023-11-01',
                endDate: '2024-04-30',
                target: 'Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ§Øª Ø§Ù„Ø´Ø±ÙŠÙƒØ©',
                channels: ['direct_sales', 'events'],
                impressions: 5000,
                clicks: 300,
                conversions: 25,
                revenue: 120000,
                roi: 26.7,
                description: 'Ø¨Ø±Ù†Ø§Ù…Ø¬ ÙˆÙ„Ø§Ø¡ Ù„Ù„ØµÙŠØ¯Ù„ÙŠØ§Øª Ø§Ù„Ø´Ø±ÙŠÙƒØ© ÙŠÙ‚Ø¯Ù… Ø®ØµÙˆÙ…Ø§Øª ÙˆÙ…Ø²Ø§ÙŠØ§ Ø­ØµØ±ÙŠØ©'
            },
            {
                id: 4,
                name: 'Ø­Ù…Ù„Ø© Ø§Ù„ØªÙˆØ¹ÙŠØ© Ø¨Ù…Ø±Ø¶ Ø§Ù„Ø³ÙƒØ±ÙŠ',
                type: 'ØªÙˆØ¹ÙŠØ©',
                status: 'completed',
                budget: 2000,
                spent: 2000,
                startDate: '2023-12-01',
                endDate: '2023-12-31',
                target: 'Ø§Ù„Ø¬Ù…Ù‡ÙˆØ± Ø§Ù„Ø¹Ø§Ù…',
                channels: ['social_media', 'email', 'events'],
                impressions: 12000,
                clicks: 900,
                conversions: 35,
                revenue: 18000,
                roi: 9.0,
                description: 'Ø­Ù…Ù„Ø© ØªÙˆØ¹ÙˆÙŠØ© Ø­ÙˆÙ„ Ø§Ù„ÙˆÙ‚Ø§ÙŠØ© ÙˆØ§Ù„Ø¹Ù„Ø§Ø¬ Ù…Ù† Ù…Ø±Ø¶ Ø§Ù„Ø³ÙƒØ±ÙŠ'
            }
        ];
    }

    getDefaultLeads() {
        return [
            {
                id: 1,
                name: 'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯',
                company: 'ØµÙŠØ¯Ù„ÙŠØ© Ø§Ù„Ù†ÙˆØ±',
                email: 'ahmed@pharmacy.com',
                phone: '+966501234567',
                source: 'website',
                status: 'qualified',
                budget: 15000,
                interest: 'Ø£Ø¯ÙˆÙŠØ© Ù…Ø²Ù…Ù†Ø©',
                lastContact: '2024-01-15',
                notes: 'Ù…Ù‡ØªÙ… Ø¨Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø³ÙƒØ±ÙŠ ÙˆØ§Ù„Ø¶ØºØ·'
            },
            {
                id: 2,
                name: 'ÙØ§Ø·Ù…Ø© Ø¹Ù„ÙŠ',
                company: 'Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø§Ù„Ø¯ÙˆÙ„ÙŠ',
                email: 'fatima@hospital.com',
                phone: '+966502345678',
                source: 'referral',
                status: 'contacted',
                budget: 25000,
                interest: 'Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª Ø·Ø¨ÙŠØ©',
                lastContact: '2024-01-14',
                notes: 'Ø·Ù„Ø¨ Ø¹ÙŠÙ†Ø§Øª Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©'
            },
            {
                id: 3,
                name: 'Ø®Ø§Ù„Ø¯ Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡',
                company: 'Ù…Ø±ÙƒØ² Ø§Ù„Ø±Ø¹Ø§ÙŠØ© Ø§Ù„ØµØ­ÙŠØ©',
                email: 'khaled@care.com',
                phone: '+966503456789',
                source: 'social_media',
                status: 'new',
                budget: 8000,
                interest: 'Ù…ÙƒÙ…Ù„Ø§Øª ØºØ°Ø§Ø¦ÙŠØ©',
                lastContact: '2024-01-13',
                notes: 'ÙŠØ¨Ø­Ø« Ø¹Ù† Ø¹Ø±ÙˆØ¶ Ø®Ø§ØµØ© Ù„Ù„ÙƒÙ…ÙŠØ§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø©'
            },
            {
                id: 4,
                name: 'Ù†ÙˆØ±Ø© Ø§Ù„Ø³Ø¹Ø¯',
                company: 'Ø³Ù„Ø³Ù„Ø© ØµÙŠØ¯Ù„ÙŠØ§Øª Ø§Ù„Ø¯ÙˆØ§Ø¡',
                email: 'nora@pharmacy.com',
                phone: '+966504567890',
                source: 'email',
                status: 'converted',
                budget: 40000,
                interest: 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª',
                lastContact: '2024-01-12',
                notes: 'Ø¹Ù…ÙŠÙ„ Ø¯Ø§Ø¦Ù…ØŒ Ø·Ù„Ø¨ ÙƒØªØ§Ù„ÙˆØ¬ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©'
            }
        ];
    }

    getDefaultAnalytics() {
        return {
            revenue: {
                total: 245800,
                monthly: 85600,
                weekly: 21500,
                daily: 3500
            },
            orders: {
                total: 1248,
                monthly: 156,
                weekly: 42,
                daily: 8
            },
            customers: {
                total: 5248,
                new: 124,
                returning: 385
            },
            conversion: {
                rate: 3.2,
                trend: -0.3
            },
            channels: {
                direct_sales: { value: 45, trend: 12 },
                website: { value: 25, trend: 8 },
                social_media: { value: 15, trend: 15 },
                email: { value: 10, trend: -2 },
                referrals: { value: 5, trend: 5 }
            },
            regions: {
                'ØµÙ†Ø¹Ø§Ø¡': 35,
                'Ø­Ø¬Ø©': 25,
                'Ø§Ù„Ø­Ø¯ÙŠØ¯Ø©': 15,
                'Ø¹Ù…Ø±Ø§Ù†': 10,
                'Ø°Ù…Ø§Ø±': 8,
                'Ø¹Ø¯Ù†': 7
            }
        };
    }

    getTopProducts() {
        return [
            { id: 1, name: 'Ø¨Ø§Ø±Ø§Ø³ÙŠØªØ§Ù…ÙˆÙ„ 500 Ù…Ø¬Ù…', sales: 245, revenue: 3675, icon: 'fa-pills' },
            { id: 2, name: 'ÙÙŠØªØ§Ù…ÙŠÙ† Ø³ÙŠ 1000 Ù…Ø¬Ù…', sales: 189, revenue: 8505, icon: 'fa-apple-alt' },
            { id: 3, name: 'Ø£ÙˆÙ…ÙŠØºØ§ 3 ÙƒØ¨Ø³ÙˆÙ„Ø§Øª', sales: 156, revenue: 11700, icon: 'fa-capsules' },
            { id: 4, name: 'ÙƒØ±ÙŠÙ… Ù‡ÙŠØ¯Ø±ÙˆÙƒÙˆØ±ØªÙŠØ²ÙˆÙ†', sales: 98, revenue: 2156, icon: 'fa-allergies' }
        ];
    }

    saveData() {
        localStorage.setItem('pharma_marketing_campaigns', JSON.stringify(this.campaigns));
        localStorage.setItem('pharma_marketing_leads', JSON.stringify(this.leads));
        localStorage.setItem('pharma_marketing_analytics', JSON.stringify(this.analytics));
    }

    setupEventListeners() {
        // Ø²Ø± Ø§Ù„Ø¨Ø­Ø«
        const searchToggleBtn = document.getElementById('analyticsBtn');
        if (searchToggleBtn) {
            searchToggleBtn.addEventListener('click', () => {
                this.toggleSearch();
            });
        }

        // Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ©
        const addCampaignBtn = document.getElementById('addCampaignBtn');
        if (addCampaignBtn) {
            addCampaignBtn.addEventListener('click', () => {
                this.createCampaign();
            });
        }

        // Ø²Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø­Ù…Ù„Ø©
        const createCampaignBtn = document.getElementById('createCampaignBtn');
        if (createCampaignBtn) {
            createCampaignBtn.addEventListener('click', () => {
                this.createCampaign();
            });
        }

        // Ø²Ø± Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ù…Ø­ØªÙ…Ù„
        const addLeadBtn = document.getElementById('addLeadBtn');
        if (addLeadBtn) {
            addLeadBtn.addEventListener('click', () => {
                this.addLead();
            });
        }

        // Ø²Ø± Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø±ÙŠØ·Ø©
        const viewMapBtn = document.getElementById('viewMapBtn');
        if (viewMapBtn) {
            viewMapBtn.addEventListener('click', () => {
                this.showMapModal();
            });
        }

        // Ø²Ø± Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
        const viewAllProductsBtn = document.getElementById('viewAllProductsBtn');
        if (viewAllProductsBtn) {
            viewAllProductsBtn.addEventListener('click', () => {
                this.viewAllProducts();
            });
        }

        // Ø²Ø± Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù…Ù„Ø§Øª
        const viewAllCampaignsBtn = document.getElementById('viewAllCampaignsBtn');
        if (viewAllCampaignsBtn) {
            viewAllCampaignsBtn.addEventListener('click', () => {
                this.viewAllCampaigns();
            });
        }

        // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
        const searchInput = document.getElementById('searchInput');
        if (searchInput) {
            searchInput.addEventListener('input', (e) => {
                this.searchContent(e.target.value);
            });
        }

        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø¨Ø­Ø«
        const closeSearchBtn = document.getElementById('closeSearchBtn');
        if (closeSearchBtn) {
            closeSearchBtn.addEventListener('click', () => {
                this.toggleSearch();
            });
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª
        setInterval(() => {
            this.updateTime();
        }, 60000);

        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
        const closeCampaignModal = document.getElementById('closeCampaignModal');
        if (closeCampaignModal) {
            closeCampaignModal.addEventListener('click', () => {
                this.closeCampaignModal();
            });
        }

        const closeCampaignDetails = document.getElementById('closeCampaignDetails');
        if (closeCampaignDetails) {
            closeCampaignDetails.addEventListener('click', () => {
                this.closeCampaignDetails();
            });
        }

        const closeLeadModal = document.getElementById('closeLeadModal');
        if (closeLeadModal) {
            closeLeadModal.addEventListener('click', () => {
                this.closeLeadModal();
            });
        }

        const closeMapModal = document.getElementById('closeMapModal');
        if (closeMapModal) {
            closeMapModal.addEventListener('click', () => {
                this.closeMapModal();
            });
        }

        window.addEventListener('click', (e) => {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            });
        });

        // ØªØ­Ø¯ÙŠØ« Ù…Ø®Ø·Ø· Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª
        const revenuePeriod = document.getElementById('revenuePeriod');
        if (revenuePeriod) {
            revenuePeriod.addEventListener('change', (e) => {
                this.updateRevenueChart(e.target.value);
            });
        }

        // ØªØµÙÙŠØ© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙŠÙ†
        const leadsFilter = document.getElementById('leadsFilter');
        if (leadsFilter) {
            leadsFilter.addEventListener('change', (e) => {
                this.filterLeads(e.target.value);
            });
        }

        // ØªØ­Ø¯ÙŠØ« Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù‚Ù†ÙˆØ§Øª
        const channelPeriod = document.getElementById('channelPeriod');
        if (channelPeriod) {
            channelPeriod.addEventListener('change', (e) => {
                this.updateChannelPerformance(e.target.value);
            });
        }
    }

    setupTabs() {
        const tabBtns = document.querySelectorAll('.tab-btn');
        tabBtns.forEach(btn => {
            btn.addEventListener('click', (e) => {
                const tabName = e.target.dataset.tab;
                this.switchTab(tabName);
            });
        });

        // ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø¹Ø±Ø¶ Ø§Ù„Ø­Ù…Ù„Ø§Øª
        const viewOptions = document.querySelectorAll('.view-option[data-view]');
        viewOptions.forEach(option => {
            option.addEventListener('click', (e) => {
                const view = e.target.dataset.view;
                this.filterCampaigns(view);
            });
        });
    }

    switchTab(tabName) {
        this.currentTab = tabName;
        
        // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ¨ÙˆÙŠØ¨
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.classList.remove('active');
            if (btn.dataset.tab === tabName) {
                btn.classList.add('active');
            }
        });

        // ØªØ­Ø¯ÙŠØ« Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ¨ÙˆÙŠØ¨
        document.querySelectorAll('.tab-pane').forEach(pane => {
            pane.classList.remove('active');
            if (pane.id === `${tabName}Tab`) {
                pane.classList.add('active');
            }
        });

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø®Ø§Øµ Ø¨ÙƒÙ„ ØªØ¨ÙˆÙŠØ¨
        switch(tabName) {
            case 'overview':
                this.renderOverview();
                break;
            case 'campaigns':
                this.renderCampaigns();
                break;
            case 'analytics':
                this.renderAnalytics();
                break;
            case 'leads':
                this.renderLeads();
                break;
        }
    }

    updateTime() {
        const now = new Date();
        const timeString = now.toLocaleTimeString('ar-EG', { 
            hour: '2-digit', 
            minute: '2-digit',
            hour12: true 
        });
        const timeElement = document.getElementById('currentTime');
        if (timeElement) {
            timeElement.textContent = timeString;
        }
    }

    toggleSearch() {
        const searchBar = document.getElementById('searchBar');
        if (searchBar.style.display === 'none') {
            searchBar.style.display = 'flex';
            document.getElementById('searchInput').focus();
        } else {
            searchBar.style.display = 'none';
            document.getElementById('searchInput').value = '';
            this.searchContent('');
        }
    }

    searchContent(query) {
        // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø­Ø§Ù„ÙŠ Ø­Ø³Ø¨ Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù†Ø´Ø·
        switch(this.currentTab) {
            case 'campaigns':
                this.searchCampaigns(query);
                break;
            case 'leads':
                this.searchLeads(query);
                break;
            default:
                // Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø¹Ø§Ù…
                break;
        }
    }

    // === ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù†Ø¸Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø© ===
    renderOverview() {
        this.updateQuickStats();
        this.initRevenueChart();
        this.renderTopProducts();
        this.renderActiveCampaigns();
    }

    updateQuickStats() {
        document.getElementById('totalRevenue').textContent = `${this.analytics.revenue.monthly.toLocaleString()} Ø±.Ø³`;
        document.getElementById('totalOrders').textContent = this.analytics.orders.monthly.toLocaleString();
        document.getElementById('totalCustomers').textContent = this.analytics.customers.new.toLocaleString();
        document.getElementById('conversionRate').textContent = `${this.analytics.conversion.rate}%`;
    }

    initRevenueChart() {
        const ctx = document.getElementById('revenueChart').getContext('2d');
        
        if (this.revenueChart) {
            this.revenueChart.destroy();
        }

        const data = this.getRevenueData('30d');
        
        this.revenueChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: data.labels,
                datasets: [{
                    label: 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª',
                    data: data.values,
                    borderColor: '#00897B',
                    backgroundColor: 'rgba(0, 137, 123, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    x: {
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(0, 0, 0, 0.1)'
                        }
                    }
                }
            }
        });
    }

    getRevenueData(period) {
        // Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ø§ÙƒØ§Ø© Ù„Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª
        const data = {
            '7d': {
                labels: ['Ø§Ù„Ø³Ø¨Øª', 'Ø§Ù„Ø£Ø­Ø¯', 'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø¬Ù…Ø¹Ø©'],
                values: [3200, 2800, 3500, 4200, 3800, 4500, 5000]
            },
            '30d': {
                labels: ['Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 1', 'Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 2', 'Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 3', 'Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 4'],
                values: [18500, 21500, 19800, 25800]
            },
            '90d': {
                labels: ['Ø§Ù„Ø´Ù‡Ø± 1', 'Ø§Ù„Ø´Ù‡Ø± 2', 'Ø§Ù„Ø´Ù‡Ø± 3'],
                values: [75600, 82400, 87800]
            }
        };
        
        return data[period] || data['30d'];
    }

    updateRevenueChart(period) {
        const data = this.getRevenueData(period);
        this.revenueChart.data.labels = data.labels;
        this.revenueChart.data.datasets[0].data = data.values;
        this.revenueChart.update();
    }

    renderTopProducts() {
        const grid = document.getElementById('topProductsGrid');
        let html = '';

        this.products.forEach(product => {
            html += `
                <div class="product-card liquid-transition">
                    <div class="product-image">
                        <i class="fas ${product.icon}"></i>
                    </div>
                    <div class="product-name">${product.name}</div>
                    <div class="product-sales">
                        <span>${product.sales} Ù…Ø¨ÙŠØ¹</span>
                        <span class="sales-amount">${product.revenue.toLocaleString()} Ø±.Ø³</span>
                    </div>
                </div>
            `;
        });

        grid.innerHTML = html;
    }

    renderActiveCampaigns() {
        const list = document.getElementById('activeCampaignsList');
        const activeCampaigns = this.campaigns.filter(c => c.status === 'active').slice(0, 3);
        
        let html = '';

        activeCampaigns.forEach(campaign => {
            const progress = (campaign.spent / campaign.budget) * 100;
            const roiColor = campaign.roi > 15 ? 'positive' : 'negative';
            
            html += `
                <div class="campaign-item liquid-transition" onclick="marketing.showCampaignDetails(${campaign.id})">
                    <div class="campaign-header">
                        <div class="campaign-title">${campaign.name}</div>
                        <div class="campaign-status status-active">Ù†Ø´Ø·Ø©</div>
                    </div>
                    <div class="campaign-metrics">
                        <div class="metric">
                            <div class="metric-value">${campaign.impressions.toLocaleString()}</div>
                            <div class="metric-label">Ù…Ø´Ø§Ù‡Ø¯Ø©</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">${campaign.conversions}</div>
                            <div class="metric-label">ØªØ­ÙˆÙŠÙ„</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value ${roiColor}">${campaign.roi}%</div>
                            <div class="metric-label">Ø¹Ø§Ø¦Ø¯ Ø§Ø³ØªØ«Ù…Ø§Ø±</div>
                        </div>
                    </div>
                    <div class="campaign-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progress}%"></div>
                        </div>
                        <div class="progress-text">
                            <span>${campaign.spent.toLocaleString()} Ø±.Ø³</span>
                            <span>${campaign.budget.toLocaleString()} Ø±.Ø³</span>
                        </div>
                    </div>
                </div>
            `;
        });

        list.innerHTML = html;
    }

    // === ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø­Ù…Ù„Ø§Øª ===
    renderCampaigns() {
        this.renderCampaignsGrid();
    }

    renderCampaignsGrid() {
        const container = document.getElementById('campaignsContainer');
        let html = '';

        this.campaigns.forEach(campaign => {
            const progress = (campaign.spent / campaign.budget) * 100;
            const statusClass = `status-${campaign.status}`;
            const statusText = this.getStatusText(campaign.status);
            const typeText = this.getCampaignTypeText(campaign.type);
            
            html += `
                <div class="campaign-card liquid-transition" onclick="marketing.showCampaignDetails(${campaign.id})">
                    <div class="campaign-type">${typeText}</div>
                    <div class="campaign-title">${campaign.name}</div>
                    <div class="campaign-budget">${campaign.budget.toLocaleString()} Ø±.Ø³</div>
                    <div class="campaign-stats">
                        <div class="campaign-stat">
                            <div class="campaign-stat-value">${campaign.conversions}</div>
                            <div class="campaign-stat-label">ØªØ­ÙˆÙŠÙ„</div>
                        </div>
                        <div class="campaign-stat">
                            <div class="campaign-stat-value">${campaign.roi}%</div>
                            <div class="campaign-stat-label">Ø¹Ø§Ø¦Ø¯ Ø§Ø³ØªØ«Ù…Ø§Ø±</div>
                        </div>
                    </div>
                    <div class="campaign-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progress}%"></div>
                        </div>
                        <div class="progress-text">
                            <span>${Math.round(progress)}%</span>
                            <span class="campaign-status ${statusClass}">${statusText}</span>
                        </div>
                    </div>
                </div>
            `;
        });

        container.innerHTML = html;
    }

    getStatusText(status) {
        const statusMap = {
            'active': 'Ù†Ø´Ø·Ø©',
            'paused': 'Ù…ØªÙˆÙ‚ÙØ©',
            'completed': 'Ù…ÙƒØªÙ…Ù„Ø©'
        };
        return statusMap[status] || status;
    }

    getCampaignTypeText(type) {
        const typeMap = {
            'Ù…Ù†ØªØ¬': 'Ø­Ù…Ù„Ø© Ù…Ù†ØªØ¬',
            'ØªØ±ÙˆÙŠØ¬': 'Ø¹Ø±Ø¶ ØªØ±ÙˆÙŠØ¬ÙŠ',
            'ÙˆÙ„Ø§Ø¡': 'Ø¨Ø±Ù†Ø§Ù…Ø¬ ÙˆÙ„Ø§Ø¡',
            'ØªÙˆØ¹ÙŠØ©': 'Ø­Ù…Ù„Ø© ØªÙˆØ¹ÙˆÙŠØ©'
        };
        return typeMap[type] || type;
    }

    filterCampaigns(view) {
        // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¹Ø±Ø¶
        document.querySelectorAll('.view-option[data-view]').forEach(btn => {
            btn.classList.remove('active');
            if (btn.dataset.view === view) {
                btn.classList.add('active');
            }
        });

        let filteredCampaigns = this.campaigns;
        
        if (view !== 'all') {
            filteredCampaigns = this.campaigns.filter(campaign => campaign.status === view);
        }

        // Ø¥Ø¹Ø§Ø¯Ø© Ø¹Ø±Ø¶ Ø§Ù„Ø­Ù…Ù„Ø§Øª Ø§Ù„Ù…ØµÙØ§Ø©
        this.renderFilteredCampaigns(filteredCampaigns);
    }

    renderFilteredCampaigns(campaigns) {
        const container = document.getElementById('campaignsContainer');
        let html = '';

        campaigns.forEach(campaign => {
            const progress = (campaign.spent / campaign.budget) * 100;
            const statusClass = `status-${campaign.status}`;
            const statusText = this.getStatusText(campaign.status);
            const typeText = this.getCampaignTypeText(campaign.type);
            
            html += `
                <div class="campaign-card liquid-transition" onclick="marketing.showCampaignDetails(${campaign.id})">
                    <div class="campaign-type">${typeText}</div>
                    <div class="campaign-title">${campaign.name}</div>
                    <div class="campaign-budget">${campaign.budget.toLocaleString()} Ø±.Ø³</div>
                    <div class="campaign-stats">
                        <div class="campaign-stat">
                            <div class="campaign-stat-value">${campaign.conversions}</div>
                            <div class="campaign-stat-label">ØªØ­ÙˆÙŠÙ„</div>
                        </div>
                        <div class="campaign-stat">
                            <div class="campaign-stat-value">${campaign.roi}%</div>
                            <div class="campaign-stat-label">Ø¹Ø§Ø¦Ø¯ Ø§Ø³ØªØ«Ù…Ø§Ø±</div>
                        </div>
                    </div>
                    <div class="campaign-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progress}%"></div>
                        </div>
                        <div class="progress-text">
                            <span>${Math.round(progress)}%</span>
                            <span class="campaign-status ${statusClass}">${statusText}</span>
                        </div>
                    </div>
                </div>
            `;
        });

        container.innerHTML = html;
    }

    searchCampaigns(query) {
        if (query.trim() === '') {
            this.renderCampaignsGrid();
            return;
        }

        const searchTerm = query.toLowerCase();
        const filteredCampaigns = this.campaigns.filter(campaign =>
            campaign.name.toLowerCase().includes(searchTerm) ||
            campaign.type.toLowerCase().includes(searchTerm) ||
            campaign.target.toLowerCase().includes(searchTerm)
        );

        this.renderFilteredCampaigns(filteredCampaigns);
    }

    createCampaign() {
        this.currentCampaign = null;
        this.showCampaignForm();
    }

    showCampaignForm() {
        const modal = document.getElementById('campaignModal');
        const modalBody = document.getElementById('campaignModalBody');
        
        const isEdit = this.currentCampaign !== null;
        const title = isEdit ? 'ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø­Ù…Ù„Ø©' : 'Ø­Ù…Ù„Ø© ØªØ³ÙˆÙŠÙ‚ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©';
        
        document.getElementById('campaignModalTitle').textContent = title;

        const formHTML = `
            <div class="campaign-form">
                <div class="form-section">
                    <h3>Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="campaignName">Ø§Ø³Ù… Ø§Ù„Ø­Ù…Ù„Ø© *</label>
                            <input type="text" id="campaignName" value="${isEdit ? this.currentCampaign.name : ''}" required>
                        </div>
                        <div class="form-group">
                            <label for="campaignType">Ù†ÙˆØ¹ Ø§Ù„Ø­Ù…Ù„Ø© *</label>
                            <select id="campaignType" required>
                                <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù†ÙˆØ¹</option>
                                <option value="Ù…Ù†ØªØ¬" ${isEdit && this.currentCampaign.type === 'Ù…Ù†ØªØ¬' ? 'selected' : ''}>Ø­Ù…Ù„Ø© Ù…Ù†ØªØ¬</option>
                                <option value="ØªØ±ÙˆÙŠØ¬" ${isEdit && this.currentCampaign.type === 'ØªØ±ÙˆÙŠØ¬' ? 'selected' : ''}>Ø¹Ø±Ø¶ ØªØ±ÙˆÙŠØ¬ÙŠ</option>
                                <option value="ÙˆÙ„Ø§Ø¡" ${isEdit && this.currentCampaign.type === 'ÙˆÙ„Ø§Ø¡' ? 'selected' : ''}>Ø¨Ø±Ù†Ø§Ù…Ø¬ ÙˆÙ„Ø§Ø¡</option>
                                <option value="ØªÙˆØ¹ÙŠØ©" ${isEdit && this.currentCampaign.type === 'ØªÙˆØ¹ÙŠØ©' ? 'selected' : ''}>Ø­Ù…Ù„Ø© ØªÙˆØ¹ÙˆÙŠØ©</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="campaignBudget">Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© (Ø±.Ø³) *</label>
                            <input type="number" id="campaignBudget" value="${isEdit ? this.currentCampaign.budget : ''}" required>
                        </div>
                        <div class="form-group">
                            <label for="campaignStatus">Ø§Ù„Ø­Ø§Ù„Ø©</label>
                            <select id="campaignStatus">
                                <option value="active" ${isEdit && this.currentCampaign.status === 'active' ? 'selected' : ''}>Ù†Ø´Ø·Ø©</option>
                                <option value="paused" ${isEdit && this.currentCampaign.status === 'paused' ? 'selected' : ''}>Ù…ØªÙˆÙ‚ÙØ©</option>
                                <option value="completed" ${isEdit && this.currentCampaign.status === 'completed' ? 'selected' : ''}>Ù…ÙƒØªÙ…Ù„Ø©</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Ø§Ù„ØªÙˆÙ‚ÙŠØª ÙˆØ§Ù„Ø¬Ù…Ù‡ÙˆØ±</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="campaignStart">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø¡ *</label>
                            <input type="date" id="campaignStart" value="${isEdit ? this.currentCampaign.startDate : ''}" required>
                        </div>
                        <div class="form-group">
                            <label for="campaignEnd">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ *</label>
                            <input type="date" id="campaignEnd" value="${isEdit ? this.currentCampaign.endDate : ''}" required>
                        </div>
                        <div class="form-group">
                            <label for="campaignTarget">Ø§Ù„Ø¬Ù…Ù‡ÙˆØ± Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù *</label>
                            <input type="text" id="campaignTarget" value="${isEdit ? this.currentCampaign.target : ''}" required>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Ù‚Ù†ÙˆØ§Øª Ø§Ù„ØªØ³ÙˆÙŠÙ‚</h3>
                    <div class="channels-grid">
                        <label class="channel-checkbox">
                            <input type="checkbox" name="channels" value="email" ${isEdit && this.currentCampaign.channels.includes('email') ? 'checked' : ''}>
                            <span>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</span>
                        </label>
                        <label class="channel-checkbox">
                            <input type="checkbox" name="channels" value="social_media" ${isEdit && this.currentCampaign.channels.includes('social_media') ? 'checked' : ''}>
                            <span>ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„</span>
                        </label>
                        <label class="channel-checkbox">
                            <input type="checkbox" name="channels" value="website" ${isEdit && this.currentCampaign.channels.includes('website') ? 'checked' : ''}>
                            <span>Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</span>
                        </label>
                        <label class="channel-checkbox">
                            <input type="checkbox" name="channels" value="direct_sales" ${isEdit && this.currentCampaign.channels.includes('direct_sales') ? 'checked' : ''}>
                            <span>Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©</span>
                        </label>
                        <label class="channel-checkbox">
                            <input type="checkbox" name="channels" value="events" ${isEdit && this.currentCampaign.channels.includes('events') ? 'checked' : ''}>
                            <span>Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª</span>
                        </label>
                        <label class="channel-checkbox">
                            <input type="checkbox" name="channels" value="referrals" ${isEdit && this.currentCampaign.channels.includes('referrals') ? 'checked' : ''}>
                            <span>Ø§Ù„ØªÙˆØµÙŠØ§Øª</span>
                        </label>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Ø§Ù„ÙˆØµÙ ÙˆØ§Ù„Ø£Ù‡Ø¯Ø§Ù</h3>
                    <div class="form-group">
                        <label for="campaignDescription">ÙˆØµÙ Ø§Ù„Ø­Ù…Ù„Ø©</label>
                        <textarea id="campaignDescription" rows="4">${isEdit ? this.currentCampaign.description : ''}</textarea>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="marketing.closeCampaignModal()">Ø¥Ù„ØºØ§Ø¡</button>
                    <button type="button" class="btn-primary" onclick="marketing.saveCampaign()">
                        <i class="fas fa-save"></i>
                        ${isEdit ? 'ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ù…Ù„Ø©' : 'Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ù…Ù„Ø©'}
                    </button>
                </div>
            </div>
        `;

        modalBody.innerHTML = formHTML;
        modal.style.display = 'block';
    }

    saveCampaign() {
        // Ø¬Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
        const formData = {
            name: document.getElementById('campaignName').value,
            type: document.getElementById('campaignType').value,
            budget: parseInt(document.getElementById('campaignBudget').value),
            status: document.getElementById('campaignStatus').value,
            startDate: document.getElementById('campaignStart').value,
            endDate: document.getElementById('campaignEnd').value,
            target: document.getElementById('campaignTarget').value,
            description: document.getElementById('campaignDescription').value,
            channels: Array.from(document.querySelectorAll('input[name="channels"]:checked')).map(cb => cb.value)
        };

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        if (!formData.name || !formData.type || !formData.budget) {
            this.showToast('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');
            return;
        }

        if (this.currentCampaign) {
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ù…Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
            Object.assign(this.currentCampaign, formData);
        } else {
            // Ø¥Ù†Ø´Ø§Ø¡ Ø­Ù…Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©
            const newCampaign = {
                id: Math.max(...this.campaigns.map(c => c.id)) + 1,
                ...formData,
                spent: 0,
                impressions: 0,
                clicks: 0,
                conversions: 0,
                revenue: 0,
                roi: 0
            };
            this.campaigns.unshift(newCampaign);
        }

        this.saveData();
        this.renderCampaigns();
        this.renderActiveCampaigns();
        this.closeCampaignModal();
        
        this.showToast(this.currentCampaign ? 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ù…Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­' : 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ù…Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­');
    }

    closeCampaignModal() {
        document.getElementById('campaignModal').style.display = 'none';
    }

    showCampaignDetails(campaignId) {
        const campaign = this.campaigns.find(c => c.id === campaignId);
        if (!campaign) return;

        this.currentCampaign = campaign;
        
        const modal = document.getElementById('campaignDetailsModal');
        const modalBody = document.getElementById('campaignDetailsBody');
        
        document.getElementById('campaignDetailsTitle').textContent = campaign.name;

        const detailsHTML = `
            <div class="campaign-details">
                <div class="campaign-header-details">
                    <div class="campaign-basic-info">
                        <div class="info-grid">
                            <div class="info-item">
                                <label>Ù†ÙˆØ¹ Ø§Ù„Ø­Ù…Ù„Ø©:</label>
                                <span>${this.getCampaignTypeText(campaign.type)}</span>
                            </div>
                            <div class="info-item">
                                <label>Ø§Ù„Ø­Ø§Ù„Ø©:</label>
                                <span class="campaign-status status-${campaign.status}">${this.getStatusText(campaign.status)}</span>
                            </div>
                            <div class="info-item">
                                <label>Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©:</label>
                                <span>${campaign.budget.toLocaleString()} Ø±.Ø³</span>
                            </div>
                            <div class="info-item">
                                <label>Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ:</label>
                                <span>${campaign.spent.toLocaleString()} Ø±.Ø³</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="campaign-metrics-details">
                    <h3>Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡</h3>
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-value">${campaign.impressions.toLocaleString()}</div>
                            <div class="metric-label">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">${campaign.clicks.toLocaleString()}</div>
                            <div class="metric-label">Ø§Ù„Ù†Ù‚Ø±Ø§Øª</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">${campaign.conversions}</div>
                            <div class="metric-label">Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">${campaign.revenue.toLocaleString()} Ø±.Ø³</div>
                            <div class="metric-label">Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</div>
                        </div>
                    </div>
                </div>

                <div class="campaign-channels">
                    <h3>Ù‚Ù†ÙˆØ§Øª Ø§Ù„ØªØ³ÙˆÙŠÙ‚</h3>
                    <div class="channels-list">
                        ${campaign.channels.map(channel => `
                            <div class="channel-tag">${this.getChannelText(channel)}</div>
                        `).join('')}
                    </div>
                </div>

                <div class="campaign-description">
                    <h3>ÙˆØµÙ Ø§Ù„Ø­Ù…Ù„Ø©</h3>
                    <p>${campaign.description}</p>
                </div>

                <div class="campaign-actions">
                    <button class="btn-secondary" onclick="marketing.editCampaign(${campaign.id})">
                        <i class="fas fa-edit"></i>
                        ØªØ¹Ø¯ÙŠÙ„
                    </button>
                    <button class="btn-primary" onclick="marketing.duplicateCampaign(${campaign.id})">
                        <i class="fas fa-copy"></i>
                        Ù†Ø³Ø®
                    </button>
                    <button class="btn-danger" onclick="marketing.deleteCampaign(${campaign.id})">
                        <i class="fas fa-trash"></i>
                        Ø­Ø°Ù
                    </button>
                </div>
            </div>
        `;

        modalBody.innerHTML = detailsHTML;
        modal.style.display = 'block';
    }

    getChannelText(channel) {
        const channelMap = {
            'email': 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
            'social_media': 'ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„',
            'website': 'Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
            'direct_sales': 'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©',
            'events': 'Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª',
            'referrals': 'Ø§Ù„ØªÙˆØµÙŠØ§Øª'
        };
        return channelMap[channel] || channel;
    }

    closeCampaignDetails() {
        document.getElementById('campaignDetailsModal').style.display = 'none';
    }

    editCampaign(campaignId) {
        const campaign = this.campaigns.find(c => c.id === campaignId);
        if (!campaign) return;

        this.currentCampaign = campaign;
        this.showCampaignForm();
        this.closeCampaignDetails();
    }

    duplicateCampaign(campaignId) {
        const campaign = this.campaigns.find(c => c.id === campaignId);
        if (!campaign) return;

        const duplicatedCampaign = {
            ...campaign,
            id: Math.max(...this.campaigns.map(c => c.id)) + 1,
            name: `${campaign.name} (Ù†Ø³Ø®Ø©)`,
            status: 'active',
            spent: 0,
            impressions: 0,
            clicks: 0,
            conversions: 0,
            revenue: 0,
            roi: 0
        };

        this.campaigns.unshift(duplicatedCampaign);
        this.saveData();
        this.renderCampaigns();
        this.renderActiveCampaigns();
        this.closeCampaignDetails();
        
        this.showToast('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø­Ù…Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­');
    }

    deleteCampaign(campaignId) {
        const campaign = this.campaigns.find(c => c.id === campaignId);
        if (!campaign) return;

        if (confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ø­Ù…Ù„Ø© "${campaign.name}"ØŸ`)) {
            this.campaigns = this.campaigns.filter(c => c.id !== campaignId);
            this.saveData();
            this.renderCampaigns();
            this.renderActiveCampaigns();
            this.closeCampaignDetails();
            
            this.showToast('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø­Ù…Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­');
        }
    }

    // === ØªØ¨ÙˆÙŠØ¨ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ===
    renderAnalytics() {
        this.updateKPIs();
        this.renderChannelPerformance();
        this.renderGeoDistribution();
    }

    updateKPIs() {
        document.getElementById('totalImpressions').textContent = '15,000';
        document.getElementById('totalClicks').textContent = '1,200';
        document.getElementById('totalConversions').textContent = '85';
        document.getElementById('totalROI').textContent = '18.5%';
    }

    renderChannelPerformance() {
        const container = document.getElementById('channelPerformance');
        let html = '';

        Object.entries(this.analytics.channels).forEach(([channel, data]) => {
            const channelText = this.getChannelText(channel);
            const trendClass = data.trend > 0 ? 'positive' : 'negative';
            const trendIcon = data.trend > 0 ? 'fa-arrow-up' : 'fa-arrow-down';
            
            html += `
                <div class="channel-item">
                    <div class="channel-info">
                        <div class="channel-icon">
                            <i class="fas ${this.getChannelIcon(channel)}"></i>
                        </div>
                        <div class="channel-name">${channelText}</div>
                    </div>
                    <div class="channel-stats">
                        <div class="channel-value">${data.value}%</div>
                        <div class="channel-trend ${trendClass}">
                            <i class="fas ${trendIcon}"></i>
                            ${Math.abs(data.trend)}%
                        </div>
                    </div>
                </div>
            `;
        });

        container.innerHTML = html;
    }

    getChannelIcon(channel) {
        const icons = {
            'direct_sales': 'fa-handshake',
            'website': 'fa-globe',
            'social_media': 'fa-share-alt',
            'email': 'fa-envelope',
            'referrals': 'fa-user-friends'
        };
        return icons[channel] || 'fa-chart-bar';
    }

    updateChannelPerformance(period) {
        // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ø­Ø³Ø¨ Ø§Ù„ÙØªØ±Ø©
        this.showToast(`ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ù„Ù„ÙØªØ±Ø©: ${period}`);
    }

    renderGeoDistribution() {
        const container = document.getElementById('geoDistribution');
        let html = '';

        Object.entries(this.analytics.regions).forEach(([region, percentage]) => {
            html += `
                <div class="region-item">
                    <div class="region-name">${region}</div>
                    <div class="region-bar">
                        <div class="region-fill" style="width: ${percentage}%"></div>
                    </div>
                    <div class="region-percentage">${percentage}%</div>
                </div>
            `;
        });

        container.innerHTML = html;
    }

    showMapModal() {
        document.getElementById('mapModal').style.display = 'block';
    }

    closeMapModal() {
        document.getElementById('mapModal').style.display = 'none';
    }

    // === ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙŠÙ† ===
    renderLeads() {
        this.updateLeadsStats();
        this.renderLeadsList();
    }

    updateLeadsStats() {
        const totalLeads = this.leads.length;
        const newLeads = this.leads.filter(lead => lead.status === 'new').length;
        const convertedLeads = this.leads.filter(lead => lead.status === 'converted').length;
        const conversionRate = totalLeads > 0 ? ((convertedLeads / totalLeads) * 100).toFixed(1) : 0;

        document.getElementById('totalLeads').textContent = totalLeads;
        document.getElementById('newLeads').textContent = newLeads;
        document.getElementById('convertedLeads').textContent = convertedLeads;
        document.getElementById('conversionRateLeads').textContent = `${conversionRate}%`;
    }

    renderLeadsList() {
        const list = document.getElementById('leadsList');
        let html = '';

        this.leads.forEach(lead => {
            const statusClass = `status-${lead.status}`;
            const statusText = this.getLeadStatusText(lead.status);
            const sourceText = this.getLeadSourceText(lead.source);
            
            html += `
                <div class="lead-item liquid-transition" onclick="marketing.showLeadDetails(${lead.id})">
                    <div class="lead-header">
                        <div class="lead-name">${lead.name}</div>
                        <div class="lead-status ${statusClass}">${statusText}</div>
                    </div>
                    <div class="lead-details">
                        <div class="lead-contact">
                            <i class="fas fa-building"></i>
                            <span>${lead.company}</span>
                        </div>
                        <div class="lead-contact">
                            <i class="fas fa-phone"></i>
                            <span>${lead.phone}</span>
                        </div>
                        <div class="lead-source">${sourceText}</div>
                    </div>
                </div>
            `;
        });

        list.innerHTML = html;
    }

    getLeadStatusText(status) {
        const statusMap = {
            'new': 'Ø¬Ø¯ÙŠØ¯',
            'contacted': 'ØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„',
            'qualified': 'Ù…Ø¤Ù‡Ù„',
            'converted': 'ØªÙ… Ø§Ù„ØªØ­ÙˆÙŠÙ„'
        };
        return statusMap[status] || status;
    }

    getLeadSourceText(source) {
        const sourceMap = {
            'website': 'Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
            'social_media': 'ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„',
            'email': 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
            'referral': 'ØªÙˆØµÙŠØ©',
            'event': 'ÙØ¹Ø§Ù„ÙŠØ©'
        };
        return sourceMap[source] || source;
    }

    filterLeads(filter) {
        let filteredLeads = this.leads;
        
        if (filter !== 'all') {
            filteredLeads = this.leads.filter(lead => lead.status === filter);
        }

        this.renderFilteredLeads(filteredLeads);
    }

    renderFilteredLeads(leads) {
        const list = document.getElementById('leadsList');
        let html = '';

        leads.forEach(lead => {
            const statusClass = `status-${lead.status}`;
            const statusText = this.getLeadStatusText(lead.status);
            const sourceText = this.getLeadSourceText(lead.source);
            
            html += `
                <div class="lead-item liquid-transition" onclick="marketing.showLeadDetails(${lead.id})">
                    <div class="lead-header">
                        <div class="lead-name">${lead.name}</div>
                        <div class="lead-status ${statusClass}">${statusText}</div>
                    </div>
                    <div class="lead-details">
                        <div class="lead-contact">
                            <i class="fas fa-building"></i>
                            <span>${lead.company}</span>
                        </div>
                        <div class="lead-contact">
                            <i class="fas fa-phone"></i>
                            <span>${lead.phone}</span>
                        </div>
                        <div class="lead-source">${sourceText}</div>
                    </div>
                </div>
            `;
        });

        list.innerHTML = html;
    }

    searchLeads(query) {
        if (query.trim() === '') {
            this.renderLeadsList();
            return;
        }

        const searchTerm = query.toLowerCase();
        const filteredLeads = this.leads.filter(lead =>
            lead.name.toLowerCase().includes(searchTerm) ||
            lead.company.toLowerCase().includes(searchTerm) ||
            lead.email.toLowerCase().includes(searchTerm)
        );

        this.renderFilteredLeads(filteredLeads);
    }

    addLead() {
        this.currentLead = null;
        this.showLeadForm();
    }

    showLeadForm() {
        const modal = document.getElementById('leadModal');
        const modalBody = document.getElementById('leadModalBody');
        
        const isEdit = this.currentLead !== null;
        const title = isEdit ? 'ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙ…Ù„' : 'Ø¹Ù…ÙŠÙ„ Ù…Ø­ØªÙ…Ù„ Ø¬Ø¯ÙŠØ¯';
        
        document.getElementById('leadModalTitle').textContent = title;

        const formHTML = `
            <div class="lead-form">
                <div class="form-section">
                    <h3>Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="leadName">Ø§Ù„Ø§Ø³Ù… *</label>
                            <input type="text" id="leadName" value="${isEdit ? this.currentLead.name : ''}" required>
                        </div>
                        <div class="form-group">
                            <label for="leadCompany">Ø§Ù„Ø´Ø±ÙƒØ© *</label>
                            <input type="text" id="leadCompany" value="${isEdit ? this.currentLead.company : ''}" required>
                        </div>
                        <div class="form-group">
                            <label for="leadEmail">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ *</label>
                            <input type="email" id="leadEmail" value="${isEdit ? this.currentLead.email : ''}" required>
                        </div>
                        <div class="form-group">
                            <label for="leadPhone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ *</label>
                            <input type="tel" id="leadPhone" value="${isEdit ? this.currentLead.phone : ''}" required>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="leadSource">Ø§Ù„Ù…ØµØ¯Ø±</label>
                            <select id="leadSource">
                                <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…ØµØ¯Ø±</option>
                                <option value="website" ${isEdit && this.currentLead.source === 'website' ? 'selected' : ''}>Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</option>
                                <option value="social_media" ${isEdit && this.currentLead.source === 'social_media' ? 'selected' : ''}>ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„</option>
                                <option value="email" ${isEdit && this.currentLead.source === 'email' ? 'selected' : ''}>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</option>
                                <option value="referral" ${isEdit && this.currentLead.source === 'referral' ? 'selected' : ''}>ØªÙˆØµÙŠØ©</option>
                                <option value="event" ${isEdit && this.currentLead.source === 'event' ? 'selected' : ''}>ÙØ¹Ø§Ù„ÙŠØ©</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="leadStatus">Ø§Ù„Ø­Ø§Ù„Ø©</label>
                            <select id="leadStatus">
                                <option value="new" ${isEdit && this.currentLead.status === 'new' ? 'selected' : ''}>Ø¬Ø¯ÙŠØ¯</option>
                                <option value="contacted" ${isEdit && this.currentLead.status === 'contacted' ? 'selected' : ''}>ØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„</option>
                                <option value="qualified" ${isEdit && this.currentLead.status === 'qualified' ? 'selected' : ''}>Ù…Ø¤Ù‡Ù„</option>
                                <option value="converted" ${isEdit && this.currentLead.status === 'converted' ? 'selected' : ''}>ØªÙ… Ø§Ù„ØªØ­ÙˆÙŠÙ„</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="leadBudget">Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø© (Ø±.Ø³)</label>
                            <input type="number" id="leadBudget" value="${isEdit ? this.currentLead.budget : ''}">
                        </div>
                        <div class="form-group">
                            <label for="leadInterest">Ù…Ø¬Ø§Ù„ Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù…</label>
                            <input type="text" id="leadInterest" value="${isEdit ? this.currentLead.interest : ''}">
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</h3>
                    <div class="form-group">
                        <label for="leadNotes">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>
                        <textarea id="leadNotes" rows="4">${isEdit ? this.currentLead.notes : ''}</textarea>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="marketing.closeLeadModal()">Ø¥Ù„ØºØ§Ø¡</button>
                    <button type="button" class="btn-primary" onclick="marketing.saveLead()">
                        <i class="fas fa-save"></i>
                        ${isEdit ? 'ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ù…ÙŠÙ„' : 'Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„'}
                    </button>
                </div>
            </div>
        `;

        modalBody.innerHTML = formHTML;
        modal.style.display = 'block';
    }

    saveLead() {
        // Ø¬Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
        const formData = {
            name: document.getElementById('leadName').value,
            company: document.getElementById('leadCompany').value,
            email: document.getElementById('leadEmail').value,
            phone: document.getElementById('leadPhone').value,
            source: document.getElementById('leadSource').value,
            status: document.getElementById('leadStatus').value,
            budget: document.getElementById('leadBudget').value ? parseInt(document.getElementById('leadBudget').value) : 0,
            interest: document.getElementById('leadInterest').value,
            notes: document.getElementById('leadNotes').value,
            lastContact: new Date().toISOString().split('T')[0]
        };

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        if (!formData.name || !formData.company || !formData.email || !formData.phone) {
            this.showToast('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');
            return;
        }

        if (this.currentLead) {
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠ
            Object.assign(this.currentLead, formData);
        } else {
            // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯
            const newLead = {
                id: Math.max(...this.leads.map(l => l.id)) + 1,
                ...formData
            };
            this.leads.unshift(newLead);
        }

        this.saveData();
        this.renderLeads();
        this.closeLeadModal();
        
        this.showToast(this.currentLead ? 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­' : 'ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­');
    }

    showLeadDetails(leadId) {
        const lead = this.leads.find(l => l.id === leadId);
        if (!lead) return;

        this.currentLead = lead;
        
        const modal = document.getElementById('leadModal');
        const modalBody = document.getElementById('leadModalBody');
        
        document.getElementById('leadModalTitle').textContent = lead.name;

        const detailsHTML = `
            <div class="lead-details-view">
                <div class="lead-basic-info">
                    <div class="info-grid">
                        <div class="info-item">
                            <label>Ø§Ù„Ø´Ø±ÙƒØ©:</label>
                            <span>${lead.company}</span>
                        </div>
                        <div class="info-item">
                            <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</label>
                            <span>${lead.email}</span>
                        </div>
                        <div class="info-item">
                            <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</label>
                            <span>${lead.phone}</span>
                        </div>
                        <div class="info-item">
                            <label>Ø§Ù„Ù…ØµØ¯Ø±:</label>
                            <span>${this.getLeadSourceText(lead.source)}</span>
                        </div>
                        <div class="info-item">
                            <label>Ø§Ù„Ø­Ø§Ù„Ø©:</label>
                            <span class="lead-status status-${lead.status}">${this.getLeadStatusText(lead.status)}</span>
                        </div>
                        <div class="info-item">
                            <label>Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©:</label>
                            <span>${lead.budget ? lead.budget.toLocaleString() + ' Ø±.Ø³' : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>
                        </div>
                        <div class="info-item full-width">
                            <label>Ù…Ø¬Ø§Ù„ Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù…:</label>
                            <span>${lead.interest || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>
                        </div>
                        <div class="info-item full-width">
                            <label>Ø¢Ø®Ø± ØªÙˆØ§ØµÙ„:</label>
                            <span>${lead.lastContact}</span>
                        </div>
                    </div>
                </div>

                <div class="lead-notes">
                    <h3>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</h3>
                    <div class="notes-content">
                        <p>${lead.notes || 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª'}</p>
                    </div>
                </div>

                <div class="lead-actions">
                    <button class="btn-secondary" onclick="marketing.editLead(${lead.id})">
                        <i class="fas fa-edit"></i>
                        ØªØ¹Ø¯ÙŠÙ„
                    </button>
                    <button class="btn-danger" onclick="marketing.deleteLead(${lead.id})">
                        <i class="fas fa-trash"></i>
                        Ø­Ø°Ù
                    </button>
                </div>
            </div>
        `;

        modalBody.innerHTML = detailsHTML;
        modal.style.display = 'block';
    }

    editLead(leadId) {
        const lead = this.leads.find(l => l.id === leadId);
        if (!lead) return;

        this.currentLead = lead;
        this.showLeadForm();
    }

    deleteLead(leadId) {
        const lead = this.leads.find(l => l.id === leadId);
        if (!lead) return;

        if (confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ø¹Ù…ÙŠÙ„ "${lead.name}"ØŸ`)) {
            this.leads = this.leads.filter(l => l.id !== leadId);
            this.saveData();
            this.renderLeads();
            this.closeLeadModal();
            
            this.showToast('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­');
        }
    }

    closeLeadModal() {
        document.getElementById('leadModal').style.display = 'none';
    }

    // === ÙˆØ¸Ø§Ø¦Ù Ù…Ø³Ø§Ø¹Ø¯Ø© ===
    viewAllProducts() {
        this.switchTab('analytics');
        this.showToast('Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ ØªØ¨ÙˆÙŠØ¨ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±');
    }

    viewAllCampaigns() {
        this.switchTab('campaigns');
    }

    setupRealTimeUpdates() {
        // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ­Ø¯ÙŠØ«Ø§Øª ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
        setInterval(() => {
            this.simulateRealTimeUpdate();
        }, 30000); // ÙƒÙ„ 30 Ø«Ø§Ù†ÙŠØ©
    }

    simulateRealTimeUpdate() {
        // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ­Ø¯ÙŠØ«Ø§Øª Ù„Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        if (Math.random() > 0.7) {
            this.analytics.revenue.daily += Math.floor(Math.random() * 100) + 50;
            this.analytics.orders.daily += Math.floor(Math.random() * 3) + 1;
            this.saveData();
            this.updateQuickStats();
            
            this.showToast('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø­Ø¯ÙŠØ«Ø©');
        }
    }

    showToast(message) {
        // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± Toast
        const toast = document.createElement('div');
        toast.textContent = message;
        toast.style.cssText = `
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--primary);
            color: white;
            padding: 12px 24px;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-card);
            z-index: 3000;
            font-weight: 600;
            transition: var(--transition-liquid);
            max-width: 300px;
            text-align: center;
        `;
        
        document.body.appendChild(toast);
        
        // Ø¥Ø²Ø§Ù„Ø© Toast Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†
        setTimeout(() => {
            toast.style.opacity = '0';
            setTimeout(() => {
                if (document.body.contains(toast)) {
                    document.body.removeChild(toast);
                }
            }, 300);
        }, 3000);
    }
}

// ØªÙ‡ÙŠØ¦Ø© Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙˆØ§Ù„ØªØ³ÙˆÙŠÙ‚ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
document.addEventListener('DOMContentLoaded', function() {
    window.marketing = new MarketingManagement();
});
</script>
</body>
</html>
